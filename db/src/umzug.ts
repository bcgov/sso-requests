import { Umzug, SequelizeStorage } from 'umzug';
import { sequelize } from '@app/shared/sequelize/models/models';

export const createMigrator = async () => {
  return new Umzug({
    migrations: [
      await import('./migrations/2021.07.01T15.57.60.create-requests-table'),
      await import('./migrations/2021.07.02T15.57.60.create-events-table'),
      await import('./migrations/2021.08.20T15.57.60.update-requests-table'),
      await import('./migrations/2021.08.31T15.57.70.add-requester-names'),
      await import('./migrations/2021.09.14T15.57.70.add-additional-emails'),
      await import('./migrations/2021.09.21T15.57.71.add-requester-notifications'),
      await import('./migrations/2021.11.26T15.57.71.add-browser-flow-override'),
      await import('./migrations/2021.11.26T15.57.72.update-browser-flow-override'),
      await import('./migrations/2021.12.08T12.00.00.create-users-table'),
      await import('./migrations/2021.12.08T12.00.01.create-teams-table'),
      await import('./migrations/2021.12.08T12.00.02.create-users-teams-table'),
      await import('./migrations/2021.12.08T12.00.03.create-users-teams-constraint'),
      await import('./migrations/2021.12.18T15.57.20.update-users-table'),
      await import('./migrations/2021.12.18T15.57.90.update-requests-table'),
      await import('./migrations/2021.12.18T15.57.91.add-users-teams-pending'),
      await import('./migrations/2021.12.18T15.57.91.update-requests-table'),
      await import('./migrations/2022.02.03T19.55.22.add-requester-in-request-table'),
      await import('./migrations/2022.02.10T09.52.22.convert-user-to-member'),
      await import('./migrations/2022.02.24T01.00.00.add-missing-composite-pkey'),
      await import('./migrations/2022.02.24T11.35.00.add-additional-email-in-user-table'),
      await import('./migrations/2022.03.02T00.00.00.add-user-id-field-in-requests-table'),
      await import('./migrations/2022.03.02T10.00.00.allow-idir-userid-null-in-requests-table'),
      await import('./migrations/2022.03.03T00.00.00.add-displayname-field-in-user-table'),
      await import('./migrations/2022.03.18T10.23.00.add-gold-fields-in-request-table'),
      await import('./migrations/2022.03.21T10.06.00.add-has_read_gold_notification-in-user-table'),
      await import('./migrations/2022.04.06T16.00.00.add-roles-fields-in-request-table'),
      await import('./migrations/2022.04.08T09.15.00.add-token-fields-in-request-table'),
      await import('./migrations/2022.04.11T11.36.00.update-action-number-field-type'),
      await import('./migrations/2022.04.25T09.00.00.add-columns-in-request-table'),
      await import('./migrations/2022.05.17T10.30.00.migrate-clientname-to-clientid'),
      await import('./migrations/2022.05.30T11.59.00.add-sa-columns-in-request-table'),
      await import('./migrations/2022.07.05T15.30.09.populate-user-id-in-requests-table'),
      await import('./migrations/2022.07.06T17.00.00.add-auth-type-in-request-table'),
      await import('./migrations/2022.07.15T15.23.00.add-last-changes-in-request-table'),
      await import('./migrations/2022.08.4T11.00.00.add-protocol-in-request-table'),
      await import('./migrations/2022.08.8T08.08.08.add-assertion-lifespan-in-request-table'),
      await import('./migrations/2022.09.9T09.00.00.add-github-approved-in-request-table'),
      await import('./migrations/2022.09.22T11.00.00.add-additional-role-attribute-in-request-table'),
      await import('./migrations/2022.12.01T13.36.60.add-flag-loginpage-header-title'),
      await import('./migrations/2023.03.17T11.00.00.add-saml-post-logout-uri'),
      await import('./migrations/2023.10.12T15.10.00.add-saml-sign-assertions'),
      await import('./migrations/2023.10.11T15.12.25.add-user-surveys'),
      await import('./migrations/2023.10.17T09.46.27.update-survey-length'),
      await import('./migrations/2023.10.26T10.13.85.add-vc-approved'),
      await import('./migrations/2023.11.01T13.26.56.update-vc-name'),
      await import('./migrations/2023.11.09T15.37.58.add-primary-users'),
      await import('./migrations/2023.12.25T01.00.00.create-request-roles-table'),
      await import('./migrations/2023.12.28T00.00.00.create-request-queues-table'),
      await import('./migrations/2024.01.10T00.00.00.update-request-roles-table'),
      await import('./migrations/2024.04.23T00.00.00.add-flag-offline-access-enabled'),
      await import('./migrations/2024.06.06T11.01.11.add-bcsc-table'),
      await import('./migrations/2024.06.21T11.35.24.add-bcsc-prod-approved'),
      await import('./migrations/2024.07.24T00.00.00.update-survey-trigger-event'),
      await import('./migrations/2024.09.16T00.00.00.remove-vc-approved'),
      await import('./migrations/2024.12.03T10.55.55.request-queue-attempts-column'),
      await import('./migrations/2025.03.20T09.43.69.add-social-confirmation'),
    ],
    context: sequelize,
    storage: new SequelizeStorage({
      sequelize,
    }),
    logger: console,
  });
};
