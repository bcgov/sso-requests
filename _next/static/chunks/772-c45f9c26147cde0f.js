"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{36575:function(e,n,r){var t,a=r(71383),c=r(71893).ZP.span(t||(t=(0,a.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"])));n.Z=c},39772:function(e,n,r){var t,a=r(16835),c=r(50029),u=r(71383),s=r(87794),i=r.n(s),o=r(67294),l=r(11915),p=r(71893),d=r(85330),m=r(3016),f=r(42894),h=r(15812),v=r(36575),b=r(91679),x=r(36089),w=r(85893),j=p.ZP.div(t||(t=(0,u.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]))),g={idirEmail:"",role:"member",id:new Date().getTime()};n.Z=(0,h.hU)(function(e){var n,r=e.onSubmit,t=e.alert,u=((0,o.useContext)(x.SessionContext)||{}).session,s=(0,o.useState)([g]),p=s[0],h=s[1],y=(0,o.useState)(""),Z=y[0],k=y[1],P=(0,o.useState)(!1),O=P[0],z=P[1],C=(0,o.useState)(),E=C[0],S=C[1],A=(n=(0,c.Z)(i().mark(function e(){var n,c,s,o,l,d,f,v,x;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:Z,members:p},c=(0,b.p)(n,u.email),o=(s=(0,a.Z)(c,2))[0],l=s[1],!o){e.next=5;break}return e.abrupt("return",S(l));case 5:return z(!0),e.next=8,(0,m.Cm)(n);case 8:if(d=e.sent,v=(f=(0,a.Z)(d,2))[0],(x=f[1])?t.show({variant:"danger",fadeOut:1e4,closable:!0,content:x}):t.show({variant:"success",fadeOut:1e4,closable:!0,content:"Team ".concat(Z," successfully created")}),!v){e.next=16;break}return e.next=16,r(v.id);case 16:h([g]),k(""),z(!1),window.location.hash="#";case 20:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,w.jsxs)("div",{children:[(0,w.jsx)(l.default,{label:"Team Name",onChange:function(e){k(e.target.value)},maxLength:"255","data-testid":"team-name",value:Z}),E&&E.name&&(0,w.jsx)(v.Z,{children:null==E?void 0:E.name}),(0,w.jsx)("br",{}),(0,w.jsx)("strong",{children:"Team Members"}),(0,w.jsx)(b.Z,{errors:E,members:p,setMembers:h,currentUser:u}),(0,w.jsxs)(j,{children:[(0,w.jsx)(d.zx,{variant:"secondary",onClick:function(){window.location.hash="#"},children:"Cancel"}),(0,w.jsx)(d.zx,{type:"button",onClick:A,"data-testid":"send-invitation",children:O?(0,w.jsx)(f.rj,{color:"#FFF",height:18,width:50,visible:O}):"Send Invitation"})]})]})})},91679:function(e,n,r){r.d(n,{p:function(){return F}});var t,a,c,u,s,i,o,l,p,d,m=r(59499),f=r(27812),h=r(71383);r(67294);var v=r(11915),b=r(35611),x=r(71893),w=r(48966),j=r.n(w),g=r(99603),y=r(59417),Z=r(36575),k=r(74150),P=r(85893);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function z(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach(function(n){(0,m.Z)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var C=x.ZP.div(t||(t=(0,h.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 10px;\n  grid-gap: 0 1em;\n"]))),E=(0,x.ZP)(b.default)(a||(a=(0,h.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n    ","\n  }\n"])),function(e){return e.readOnlyRole?"padding-left:6px;":""}),S=x.ZP.div(c||(c=(0,h.Z)(["\n  border-bottom: 1px solid black;\n  grid-column: 1 / 3;\n"]))),A=x.ZP.span(u||(u=(0,h.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),D=x.ZP.section(s||(s=(0,h.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n"]))),M=(0,x.ZP)(C)(i||(i=(0,h.Z)(["\n  grid-template-columns: 2.2fr 0.9fr 1.2fr;\n  align-items: start;\n  margin-bottom: 20px;\n"]))),T=(0,x.ZP)(g.G)(o||(o=(0,h.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]))),N=(0,x.ZP)(g.G)(l||(l=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n"]))),R=(0,x.ZP)(g.G)(p||(p=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n  color: white;\n  background-color: black;\n"]))),G=x.ZP.p(d||(d=(0,h.Z)(["\n  font-style: italic;\n  font-size: 0.95em;\n"]))),F=function(e,n){var r={name:null,members:[]};return e.name||(r.name="Please enter a name"),e.members.forEach(function(t,a){t.idirEmail?j().isEmail(t.idirEmail)?(e.members.filter(function(e){return e.idirEmail===t.idirEmail}).length>1||t.idirEmail===n)&&(r.members[a]="Please use unique email"):r.members[a]="Please enter a valid email":r.members[a]="Please enter an email"}),[r.name||r.members.length>0,r]};n.Z=function(e){var n=e.errors,r=e.members,t=e.setMembers,a=e.allowDelete,c=void 0===a||a,u=e.currentUser,s=void 0===u?null:u,i=function(e,n){var a=z({},r[e]);a.idirEmail=n.target.value;var c=(0,f.Z)(r);c[e]=a,t(c)},o=function(e,n){var a=z({},r[e]);a.role=n.target.value;var c=(0,f.Z)(r);c[e]=a,t(c)},l=function(e){t(r.filter(function(n,r){return r!==e}))};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:["Enter your team memberâ€™s government email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,P.jsx)("strong",{children:"2 business days"}),"."]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"strong",children:"Roles:"}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(R,{icon:y.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Admins"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"managing"})," powers"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(N,{icon:y.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Members"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"viewing"})," powers"]})]}),(0,P.jsx)("br",{}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{className:"underline",children:(0,P.jsx)(k.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/CSS-App-My-Teams",children:"View a detailed breakdown of roles on our wiki page"})})})]}),(0,P.jsxs)(D,{children:[(0,P.jsxs)(C,{children:[(0,P.jsx)("strong",{children:"Member"}),(0,P.jsx)("strong",{children:"Role"}),(0,P.jsx)(S,{})]}),(0,P.jsx)(G,{children:"*Please enter email address tied to and IDIR to allow your user to login"}),s&&(0,P.jsxs)(M,{children:[(0,P.jsx)(v.default,{value:(null==s?void 0:s.email)||"",readOnly:!0}),(0,P.jsx)(E,{label:"Role",disabled:!0,value:"admin",readOnlyRole:!0,children:(0,P.jsx)("option",{value:"admin",children:"Admin"})})]}),r.map(function(e,r){return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(M,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(v.default,{placeholder:"Enter email address",onChange:function(e){return i(r,e)},value:e.idirEmail,"data-testid":"user-email"}),n&&n.members&&n.members[r]&&(0,P.jsx)(Z.Z,{children:n.members[r]})]}),(0,P.jsxs)(E,{label:"Role",onChange:function(e){return o(r,e)},value:e.role,"data-testid":"user-role",children:[(0,P.jsx)("option",{value:"member",children:"Member"}),(0,P.jsx)("option",{value:"admin",children:"Admin"})]}),r>=0&&c&&(0,P.jsx)(T,{icon:y.uMC,onClick:function(){return l(r)},title:"Delete","data-testid":"delete-user-role"})]},e.id)})}),(0,P.jsxs)(A,{onClick:function(){t([].concat((0,f.Z)(r),[{idirEmail:"",role:"member",id:new Date().getTime(),pending:!0}]))},children:[(0,P.jsx)(g.G,{style:{color:"#006fc4"},icon:y.KtF,title:"Add Item","data-testid":"add-user-role"}),(0,P.jsx)("span",{children:"Add another team member"})]})]})]})}},3016:function(e,n,r){r.d(n,{Cm:function(){return P},Dc:function(){return Z},Gc:function(){return G},MH:function(){return S},Sx:function(){return T},YY:function(){return C},ZT:function(){return N},fC:function(){return D},l8:function(){return k},rU:function(){return A},rl:function(){return M},vM:function(){return R},w2:function(){return O},yG:function(){return z},yN:function(){return F},zZ:function(){return E}});var t,a,c,u,s,i,o,l,p,d,m,f,h,v,b,x,w=r(50029),j=r(87794),g=r.n(j),y=r(21963),Z=(t=(0,w.Z)(g().mark(function e(){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams").then(function(e){return e.data});case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)}),k=(a=(0,w.Z)(g().mark(function e(){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("allowed-teams").then(function(e){return e.data});case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return a.apply(this,arguments)}),P=(c=(0,w.Z)(g().mark(function e(n){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams",n).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return c.apply(this,arguments)}),O=(u=(0,w.Z)(g().mark(function e(n){var r,t,a,c;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.name,t=n.id,a={name:r},e.next=5,y.e.put("teams/".concat(t),a).then(function(e){return e.data});case 5:return c=e.sent,e.abrupt("return",[c,null]);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return u.apply(this,arguments)}),z=(s=(0,w.Z)(g().mark(function e(n){var r,t,a;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.id,t=n.members,e.next=4,y.e.post("teams/".concat(r,"/members"),t).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),C=(i=(0,w.Z)(g().mark(function e(n){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/members")).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return i.apply(this,arguments)}),E=(o=(0,w.Z)(g().mark(function e(n,r,t){var a;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.put("teams/".concat(n,"/members/").concat(r),t).then(function(e){return e.data});case 3:return a=e.sent,e.abrupt("return",[a,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,r){return o.apply(this,arguments)}),S=(l=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(r,"/members/").concat(n)).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return l.apply(this,arguments)}),A=(p=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams/".concat(r,"/invite"),n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return p.apply(this,arguments)}),D=(d=(0,w.Z)(g().mark(function e(n){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(n)).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return d.apply(this,arguments)}),M=(m=(0,w.Z)(g().mark(function e(n){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.post("teams/".concat(n,"/service-accounts")).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return m.apply(this,arguments)}),T=(f=(0,w.Z)(g().mark(function e(n){var r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts")).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return f.apply(this,arguments)}),N=(h=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts/").concat(r)).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return h.apply(this,arguments)}),R=(v=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.get("teams/".concat(n,"/service-accounts/").concat(r,"/credentials")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return v.apply(this,arguments)}),G=(b=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.put("teams/".concat(n,"/service-accounts/").concat(r,"/credentials")).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return b.apply(this,arguments)}),F=(x=(0,w.Z)(g().mark(function e(n,r){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.e.delete("teams/".concat(n,"/service-accounts/").concat(r)).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,y.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return x.apply(this,arguments)})}}]);