(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{69696:function(e,n,t){"use strict";n.ZP=void 0;var r={shared:{container:"\n      position: fixed;\n      top: 0;\n      left: 0;\n      font-size: 1rem;\n      width: 100%;\n      height: 100%;\n      background: rgba(220,220,220,0.8);\n    ",modal:"\n      max-width: 800px;\n      margin: 2rem auto;\n    ",header:"\n      display: flex;\n      color: #fff;\n      background: #38598A;\n      padding: 1.2em;\n    ",content:"\n      min-height: 5em;\n      background: #fff;\n      padding: 1.5em 1.2em;\n    ",close:"\n      margin-left: auto;\n      color: #fff;\n      font-weight: 600;\n\n      &:hover {\n        color: #fff;\n      }\n    "}};var i=(0,t(68985).applyTheme)(r,{defaultProps:{},staticProps:[]});var a=i;n.ZP=a},68985:function(e,n,t){"use strict";var r=t(95318),i=t(20862);Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.applyTheme=void 0;var a,o=r(t(22122)),c=r(t(19756)),s=r(t(45761)),u=i(t(67294)),l=r(t(86010)),d=r(t(29163)),f=t(80927),h={styleProps:{},Sheader:null,Scontent:null,Sfooter:null,Sclose:null},p=u.default.createContext(h),v=function(e,n){var t,r=(0,f.processStyle)(e),i=(0,f.createStyleBuilder)(r,n),h=n.as||{},v=i((t=h.container||"div",d.default[t](a||(a=(0,s.default)(["\n    visibility: hidden;\n\n    &:target {\n      visibility: visible;\n    }\n  "])))),"container"),m=i(h.modal||"div","modal"),x=i(h.header||"header","header"),g=i(h.content||"div","content"),b=i(h.footer||"footer","footer"),j=i("a","close"),y=(0,f.createBootstrap)(r,"modal"),w=function(e){var n=y(e),t=n.id,r=(n.name,n.label,n.ariaLabel,n.styleProps),i=n.children,a=n.className,s=n.rest,d=s.style,f=s.modalStyle,h=(s.onToggle,s.defaultToggled,(0,c.default)(s,["style","modalStyle","onToggle","defaultToggled"]));return u.default.createElement(p.Provider,{value:{styleProps:r,Sheader:x,Scontent:g,Sfooter:b,Sclose:j}},u.default.createElement(v,(0,o.default)({},h,{className:(0,l.default)("pg-modal-container",a),id:t,style:d}),u.default.createElement(m,{className:"pg-modal-main",style:f},i)))};return w.Header=function(e){var n=e.children,t=e.className,r=(0,c.default)(e,["children","className"]),i=(0,l.default)("pg-modal-header",t),a=(0,u.useContext)(p),s=a.Sheader,d=a.styleProps;return u.default.createElement(s,(0,o.default)({className:i},d,r),n)},w.Content=function(e){var n=e.children,t=e.className,r=(0,c.default)(e,["children","className"]),i=(0,l.default)("pg-modal-content",t),a=(0,u.useContext)(p),s=a.Scontent,d=a.styleProps;return u.default.createElement(s,(0,o.default)({className:i},d,r),n)},w.Footer=function(e){var n=e.children,t=e.className,r=(0,c.default)(e,["children","className"]),i=(0,l.default)("pg-modal-footer",t),a=(0,u.useContext)(p),s=a.Sfooter,d=a.styleProps;return u.default.createElement(s,(0,o.default)({className:i},d,r),n)},w.Close=function(e){var n=e.children,t=e.className,r=(0,c.default)(e,["children","className"]),i=(0,l.default)("pg-modal-close",t),a=(0,u.useContext)(p),s=a.Sclose,d=a.styleProps;return u.default.createElement(s,(0,o.default)({className:i},d,{href:"#",role:"button","aria-label":"close"},r),n)},w};n.applyTheme=v;var m=v({},{});n.default=m},60873:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(85893),i=t(27261),a=(t(67294),t(94737)),o=t(19611),c=t(29163),s=t(17625),u=t(51436),l=t(30454);function d(){var e=(0,i.Z)(["\n  font-size: "," !important;\n  font-family: "," !important;\n"]);return d=function(){return e},e}var f=(0,c.default)(o.Z)(d(),l.n5,l.rk);function h(e){var n=e.tooltipTitle,t=e.tooltipContent,i=e.hide,o=(0,r.jsxs)(f,{id:"popover-basic",children:[n&&(0,r.jsx)(f.Title,{children:n}),t&&(0,r.jsx)(f.Content,{dangerouslySetInnerHTML:{__html:t}})]});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{trigger:"hover",placement:"right",overlay:o,delay:{show:250,hide:i},children:(0,r.jsx)(s.G,{color:"#777777",icon:u.sqG})})})}},80721:function(e,n,t){"use strict";var r=t(85893),i=t(27261),a=t(29163),o=t(30454);function c(){var e=(0,i.Z)(["\n  margin-top: ",";\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  &&& {\n    margin-left: 20px;\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  & li {\n    margin: 0;\n  }\n"]);return u=function(){return e},e}function l(){var e=(0,i.Z)(["\n  text-transform: uppercase;\n  margin-bottom: 0;\n  font-size: ",";\n"]);return l=function(){return e},e}var d=a.default.h2(l(),o.CA),f=a.default.ul(u()),h=a.default.li(s()),p=a.default.div(c(),o.SI);n.Z=function(){return(0,r.jsxs)(p,{children:[(0,r.jsx)(d,{children:"Requirements"}),(0,r.jsxs)(f,{children:[(0,r.jsx)("li",{children:"Keep your email address active, and if you are not using your realm, clean it up"}),(0,r.jsxs)("li",{children:["If you are not using your realm/client app configuration"," ",(0,r.jsx)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"ask us"})," for help"]})]}),(0,r.jsx)(d,{children:"We're a Community"}),(0,r.jsxs)(f,{children:[(0,r.jsxs)("li",{children:["As part of a community, we can solve things together and quickly. Please join the"," ",(0,r.jsx)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel on Rocket.Chat"})]}),(0,r.jsxs)("li",{children:["Please follow the BC Government digital standards (",(0,r.jsx)("a",{href:"https://digital.gov.bc.ca/resources/digital-principles",target:"_blank",rel:"noreferrer",children:"link"}),")"]}),(0,r.jsx)("li",{children:"Coordinate load testing with the Pathfinder SSO Team, and please only use the Test environment"}),(0,r.jsxs)("li",{children:["The SSO Service is multitenancy; meaning you share with others, so please coordinate"," ",(0,r.jsx)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"with us"}),":",(0,r.jsx)(h,{children:"if you predict moderate or high loads"}),"OR",(0,r.jsx)(h,{children:"if you need to conduct load testing in TEST only"})]})]}),(0,r.jsx)(d,{children:"What's included in the service"}),(0,r.jsx)(f,{children:(0,r.jsx)("li",{children:"The Standard realm is configured to meet the general needs of the community. Currently, custom configurations, such as scopes or flows, are not available"})}),(0,r.jsx)(d,{children:"Understanding the service level"}),(0,r.jsxs)(f,{children:[(0,r.jsx)("li",{children:'We are working towards enterprise service levels and in the interim the SSO Pathfinder service level is "best-effort" during business hours (Monday to Friday, 9am to 5pm), and after-hours resolution time is not guaranteed'}),(0,r.jsx)("strong",{children:'Please take this into account if you have a "critical" application'}),(0,r.jsx)("li",{children:"From time to time, we may contact you to confirm if your configuration is needed"})]})]})}},3083:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var r=t(85893),i=t(27261),a=t(17625),o=t(51436),c=t(29163),s=t(67294),u=t(30454),l=t(60873);function d(){var e=(0,i.Z)(["\n  font-weight: bold;\n  font-size: 1rem;\n  margin: 0;\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  display: inline-block;\n  margin: 0;\n  margin-top: 5px;\n  font-size: 16px;\n  font-weight: lighter;\n  padding-left: 10px;\n  color: #bbbbbb;\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  position: absolute;\n  right: 10px;\n  top: 10px;\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  display: inline-block;\n  &:hover {\n    cursor: pointer;\n  }\n  margin-top: 0;\n"]);return p=function(){return e},e}function v(){var e=(0,i.Z)(["\n  margin: 0;\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  position: relative;\n  width: 100%;\n  max-width: ",";\n"]);return m=function(){return e},e}var x=c.default.div(m(),u.Ik),g=c.default.p(v()),b=c.default.div(p()),j=(0,c.default)(b)(h()),y=c.default.p(f()),w=c.default.legend(d());function k(e){var n=e.title,t=e.schema,i=t.description,c=t.tooltipTitle,u=t.tooltipContent,d=t.hide,f=void 0===d?250:d;return(0,r.jsxs)("div",{children:[n&&(0,r.jsxs)(w,{children:[n," ",(0,r.jsx)(l.Z,{tooltipTitle:c,tooltipContent:u,hide:f})]}),i&&(0,r.jsx)(g,{children:i}),e.items.map((function(e){return(0,r.jsx)(s.Fragment,{children:e.hasRemove&&(0,r.jsxs)(x,{children:[e.children,e.index>0&&(0,r.jsx)(j,{onClick:e.onDropIndexClick(e.index),children:(0,r.jsx)(a.G,{style:{color:"red"},icon:o.uMC,title:"Remove Item"})})]})},e.index)})),e.canAdd&&(0,r.jsxs)(b,{onClick:e.onAddClick,children:[(0,r.jsx)(a.G,{style:{color:"#006fc4"},icon:o.KtF,onClick:e.onAddClick,title:"Add Item"}),(0,r.jsx)(y,{children:"Add another URI"})]})]})}},25463:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(85893),i=t(27261),a=t(4826),o=t(29163),c=t(31607),s=t(30454);function u(){var e=(0,i.Z)(["\n  margin-top: ",";\n"]);return u=function(){return e},e}function l(){var e=(0,i.Z)(["\n  min-width: 150px;\n  background-color: #b2b2b2;\n  color: white;\n  box-shadow: none !important;\n\n  &:hover {\n    box-shadow: 0px 0px 0px 2px #006fc4 inset !important;\n    background-color: #b2b2b2;\n  }\n"]);return l=function(){return e},e}function d(){var e=(0,i.Z)(["\n  margin-left: 10px;\n  min-width: 150px;\n"]);return d=function(){return e},e}var f=(0,o.default)(a.ZP)(d()),h=(0,o.default)(a.ZP)(l()),p=o.default.div(u(),s.oc);function v(e){var n=e.show,t=e.loading,i=e.text,a=e.handleSubmit,o=e.handleBackClick,s=e.formSubmission;return(0,r.jsx)(r.Fragment,{children:n&&(0,r.jsxs)(p,{children:[(0,r.jsx)(h,{variant:"secondary",size:"medium",type:"button",onClick:o,children:i.back}),(0,r.jsx)(f,{variant:"primary",size:"medium",onClick:a,type:s?"submit":"button",children:t?(0,r.jsx)(c.Z,{type:"Grid",color:"#FFF",height:18,width:50,visible:!0}):(0,r.jsx)(r.Fragment,{children:i.continue})})]})})}},59320:function(e,n,t){"use strict";t.d(n,{Z:function(){return xe}});var r=t(85893),i=t(809),a=t.n(i),o=t(39227),c=t(92447),s=t(26265),u=t(27261),l=t(67294),d=t(29163);function f(){var e=(0,u.Z)(["\n  font-weight: lighter;\n  color: #003366;\n"]);return f=function(){return e},e}var h=d.default.h1(f()),p=t(31607),v=t(17625),m=t(51436),x=t(96486);function g(){var e=(0,u.Z)(["\n  width: 30px;\n"]);return g=function(){return e},e}function b(){var e=(0,u.Z)(["\n  display: flex;\n  & p {\n    padding-left: 15px;\n  }\n"]);return b=function(){return e},e}var j=d.default.div(b()),y=d.default.span(g());function w(e){var n=e.formStage,t=e.id,i=e.saveMessage,a=e.saving,o=(0,x.padStart)(String(t),8,"0"),c=["".concat(t?"Req ID: ".concat(o," - "):"","Enter requester information"),"Req ID: ".concat(o," - Choose providers and provide URIs"),"Req ID: ".concat(o," - Terms and Conditions"),"Req ID: ".concat(o," - Review and Submit")];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{children:c[n]}),(a||i)&&(0,r.jsxs)(j,{children:[(0,r.jsx)(y,{children:a?(0,r.jsx)(p.Z,{type:"TailSpin",color:"#000",height:18,width:50,visible:!0,label:"request-saving"}):(0,r.jsx)(v.G,{style:{color:"#006fc4"},icon:null!==i&&void 0!==i&&i.error?m.eHv:m.LEp,title:"request-saved"})}),(0,r.jsx)("p",{children:null===i||void 0===i?void 0:i.content})]})]})}function k(){var e=(0,u.Z)(["\n  width: 100px;\n  margin: 0;\n"]);return k=function(){return e},e}function Z(){var e=(0,u.Z)(["\n  height: 40px;\n  width: 40px;\n  text-align: center;\n  line-height: 40px;\n  border-radius: 40px;\n  background-color: white;\n"]);return Z=function(){return e},e}function S(){var e=(0,u.Z)(["\n  height: 60px;\n  width: 200px;\n  background-color: #ebf7ff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: bold;\n  border-radius: 5px;\n  padding: 20px;\n  cursor: pointer;\n  margin: 3px 0;\n\n  border: 1px solid #006fc4;\n  opacity: ",";\n  color: ",";\n"]);return S=function(){return e},e}var O=d.default.div(S(),(function(e){return e.active?"1":"0.5"}),(function(e){return!e.active&&"#003366"})),P=d.default.div(Z()),C=d.default.p(k());function q(e){var n=e.stageNumber,t=e.title,i=e.active,a=e.handleClick,o=e.hasError;return(0,r.jsxs)(O,{active:i,onClick:a,children:[(0,r.jsx)(P,{children:o?(0,r.jsx)(v.G,{icon:m.eHv,color:"red",title:"Some additional fields require your attention."}):n}),(0,r.jsx)(C,{children:t})]})}var N=t(64735);function T(){var e=(0,u.Z)(["\n  width: 824px;\n  max-width: 100%;\n"]);return T=function(){return e},e}var E=[{title:"Requester Info",number:0},{title:"Providers and URIs",number:1},{title:"Terms and conditions",number:2},{title:"Review & Submit",number:3}],D=d.default.div(T());function R(e){var n=e.currentStage,t=e.setFormStage,i=e.errors,a=e.creatingNewForm;return(0,r.jsx)(D,{children:(0,r.jsx)(N.ZP,{cols:4,children:(0,r.jsx)(N.ZP.Row,{collapse:"992",gutter:[],children:E.map((function(e){return(0,r.jsx)(N.ZP.Col,{children:(0,r.jsx)(q,{title:e.title,stageNumber:e.number+1,active:e.number===n,hasError:!!i[e.number],handleClick:function(){return function(e){a()||t(e)}(e.number)}},e.number)},e.title)}))})})})}var F=t(17849);function I(e){e.id;var n=e.classNames,t=(e.label,e.help),i=(e.required,e.description),a=e.errors,o=e.children;return(0,r.jsxs)("div",{className:n,children:[i,o,a,t]})}var B=t(60873);function U(){var e=(0,u.Z)(["\n  font-weight: bold;\n  font-size: 1rem;\n  margin: 0;\n"]);return U=function(){return e},e}var L=d.default.legend(U());function A(e){e.id;var n=e.classNames,t=e.label,i=e.help,a=(e.required,e.errors),o=e.children,c=e.schema,s=c.tooltipTitle,u=c.tooltipContent,l=c.hide,d=void 0===l?250:l,f=c.description;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsxs)(L,{children:[t,"\xa0",(0,r.jsx)(B.Z,{tooltipTitle:s,tooltipContent:u,hide:d})]}),f,o,a,i]})}var G=function(e){return{identityProviders:{"ui:widget":"checkboxes","ui:disabled":"true","ui:help":"Currently we only support the onestopauth realm and IDPs cant be changed."},environments:{"ui:widget":"checkboxes"},projectLead:{"ui:widget":"radio","ui:readonly":e},newToSso:{"ui:widget":"radio","ui:FieldTemplate":A},preferredEmail:{"ui:FieldTemplate":I},publicAccess:{"ui:widget":"radio","ui:FieldTemplate":A},projectName:{"ui:FieldTemplate":I,"ui:placeholder":"Project Name"},realm:{"ui:widget":"radio","ui:FieldTemplate":A,"ui:enumDisabled":["bceidbasic","bceidbusiness","bceidboth"],"ui:default":"onestopauth"}}},z=t(25463),W=t(69696),_=t(4826),H=t(6645),M=t(3083),V=t(15616),K=t(11163),$=t(30454),J=t(25879);function X(){var e=(0,u.Z)(["\n  list-style: none;\n"]);return X=function(){return e},e}function Y(){var e=(0,u.Z)(["\n  font-weight: 600;\n"]);return Y=function(){return e},e}function Q(){var e=(0,u.Z)(["\n  margin: 20px 0;\n  max-width: 500px;\n  background-color: #e3e3e3;\n  height: 2px !important;\n"]);return Q=function(){return e},e}function ee(){var e=(0,u.Z)(["\n  margin-top: ",";\n  font-size: unset;\n  & tr {\n    display: flex;\n    margin-top: 5px;\n    margin-bottom: 5px;\n    & > td {\n      border: none;\n      padding: 0 5px 0 0;\n    }\n  }\n"]);return ee=function(){return e},e}var ne=d.default.table(ee(),$.SI),te=d.default.hr(Q()),re=d.default.span(Y()),ie=d.default.ul(X()),ae=function(e){return void 0===e?"":e?"Yes":"No"},oe=function(e){return(0,r.jsx)(ie,{children:null===e||void 0===e?void 0:e.map((function(e){return(0,r.jsx)("li",{children:e})}))})};var ce=(0,J.l)((function(e){var n=e.formData,t=e.setErrors,i=(e.errors,e.visited),o=e.alert,s=(0,l.useState)(!1),u=s[0],d=s[1],f=(0,K.useRouter)(),h=function(){var e=(0,c.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=(0,V.G$)(n,i),!(Object.keys(r).length>0)){e.next=5;break}return o.show({variant:"danger",fadeOut:1e4,closable:!0,content:"There were errors with your submission. Please see the navigation tabs above for the form pages with errors."}),e.abrupt("return",t(r));case 5:return d(!0),e.next=8,(0,H.WN)(n,!0);case 8:d(!1),o.show({variant:"success",fadeOut:1e4,closable:!0,content:"Request ID:".concat((0,x.padStart)(String(n.id),8,"0")," is successfully submitted!")}),f.push({pathname:"/my-requests",query:{id:n.id}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ne,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Are you the product owner or project admin/team lead?"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:ae(null===n||void 0===n?void 0:n.projectLead)})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Have you requested an SSO access before?"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:ae(null===n||void 0===n?void 0:n.newToSso)})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Client Type:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:null!==n&&void 0!==n&&n.publicAccess?"Public":"Confidential"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Project Name:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:null===n||void 0===n?void 0:n.projectName})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Preferred email address:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:null===n||void 0===n?void 0:n.preferredEmail})})]})]})}),(0,r.jsx)(te,{}),(0,r.jsx)(ne,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Identity providers required:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:oe((0,V.LF)(null===n||void 0===n?void 0:n.realm))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Dev redirect URIs:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:oe(null===n||void 0===n?void 0:n.devValidRedirectUris)})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Test redirect URIs:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:oe(null===n||void 0===n?void 0:n.testValidRedirectUris)})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Prod redirect URIs:"}),(0,r.jsx)("td",{children:(0,r.jsx)(re,{children:oe(null===n||void 0===n?void 0:n.prodValidRedirectUris)})})]})]})}),(0,r.jsx)(z.Z,{text:{continue:"Submit",back:"Cancel"},show:!0,loading:u,handleSubmit:h,handleBackClick:function(){f.push("/my-requests")}})]})})),se=t(80721),ue=t(6418),le=t(94679);function de(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?de(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function he(){var e=(0,u.Z)(["\n  display: block;\n  margin: 10px;\n  margin-left: auto;\n"]);return he=function(){return e},e}function pe(){var e=(0,u.Z)(["\n  display: flex;\n  align-items: center;\n\n  & .pg-modal-main {\n    max-width: 600px;\n    margin: auto;\n  }\n"]);return pe=function(){return e},e}var ve=(0,d.default)(W.ZP)(pe()),me=(0,d.default)(_.ZP)(he());var xe=(0,J.l)((function(e){var n=e.currentUser,t=void 0===n?{}:n,i=e.request,s=e.alert,u=(0,l.useState)(i||{}),d=u[0],f=u[1],h=(0,l.useState)(i?1:0),p=h[0],x=h[1],g=(0,l.useState)(!1),b=g[0],j=g[1],y=(0,l.useState)(void 0),k=y[0],Z=y[1],S=(0,l.useState)(!1),O=S[0],P=S[1],C=(0,l.useState)({}),q=C[0],N=C[1],T=(0,l.useState)({}),E=T[0],D=T[1],I=(0,K.useRouter)();(0,l.useEffect)((function(){d.preferredEmail||f(fe(fe({},d),{},{preferredEmail:t.email||""}))}),[t]);var B=function(e){E[p]=!0,3===e&&(E[0]=!0,E[1]=!0,E[2]=!0);var n=(0,V.G$)(d,E);N(n),x(e),D(E),s.hide()},U=function(){return I.route.endsWith("/request")},L=G(!U()),A=function(){var e=(0,c.Z)(a().mark((function e(){var n,t,r,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),e.prev=1,!U()){e.next=19;break}return e.next=5,(0,H.hG)(d);case 5:if(n=e.sent,t=(0,o.Z)(n,2),r=t[0],i=t[1],c=(r||{}).id,!i&&c){e.next=14;break}return I.push("/application-error"),j(!1),e.abrupt("return");case 14:return e.next=16,I.push({pathname:"/request/".concat(c)});case 16:f(fe(fe({},d),{},{id:c})),e.next=22;break;case 19:return e.next=21,(0,H.WN)(d);case 21:_();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0);case 27:j(!1);case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==p){e.next=5;break}if(!U()){e.next=5;break}return E[p]=!0,D(E),e.abrupt("return");case 5:B(p+1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,c.Z)(a().mark((function e(n,t){var r,c,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U()){e.next=2;break}return e.abrupt("return");case 2:if(!i){e.next=12;break}return P(!0),e.next=6,(0,H.WN)(fe(fe({},d),{},{id:i.id}));case 6:r=e.sent,c=(0,o.Z)(r,2),c[0],(s=c[1])?(null===(u=s.response)||void 0===u?void 0:u.data,I.push("/application-error")):Z({content:"Last saved at ".concat((new Date).toLocaleString()),error:!1}),P(!1);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{formStage:p,id:d.id,saveMessage:k,saving:O}),(0,r.jsx)(R,{currentStage:p,setFormStage:B,errors:q,creatingNewForm:U}),2===p&&(0,r.jsx)(se.Z,{}),[0,1,2].includes(p)?(0,r.jsx)(F.Z,{schema:ue.Z[p],uiSchema:L,onChange:function(e){f(e.formData),!1===e.formData.projectLead&&(window.location.hash="modal")},onSubmit:A,formData:d,ArrayFieldTemplate:M.Z,onBlur:$,liveValidate:E[p],validate:le.M,children:(0,r.jsx)(z.Z,{formSubmission:0===p,text:{continue:"Next",back:"Cancel"},show:0!==p||d.projectLead,loading:b,handleSubmit:_,handleBackClick:function(){I.push("/my-requests")}})}):(0,r.jsx)(ce,{formData:d,setErrors:N,errors:q,visited:E}),0===p&&(0,r.jsxs)(ve,{id:"modal",children:[(0,r.jsx)(W.ZP.Header,{children:(0,r.jsx)(v.G,{icon:m.sqG,size:"2x",title:"Information"})}),(0,r.jsxs)(W.ZP.Content,{children:["We can only process access requests submittted by"," ",(0,r.jsx)("strong",{children:"product owners, project admin or team leads"}),". If you are not acting in one of these roles, please get in touch with these individuals in your organization to make the request for you.",(0,r.jsx)(me,{onClick:function(){I.push("my-requests")},children:"Okay"})]})]})]})}))},17849:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(26265),i=t(85893),a=t(24184),o=t(11915);t(67294);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e){switch(e){case"checkbox":return"checked";case"file":return"files";default:return"value"}}var l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=u(n);return function(r){var a=r.value,o=r.onChange,c=r.label,u=r.schema,l=r.options,d=r.required,f=r.disabled,h=r.onBlur,p=r.id,v=void 0===p?"":p,m=r.readonly,x=r.placeholder;""===x&&v.includes("ValidRedirectUris")&&(x="e.g. https://example.com");var g=u.pattern,b=u.minLength,j=u.maxLength,y=l.enumOptions,w=void 0===y?[]:y,k={onChange:function(e){var n=e.target[t];""===n&&(n=void 0),"true"===n&&(n=!0),"false"===n&&(n=!1),o(n)},label:c,name:name,maxLength:j,id:v,required:d,disabled:f,minLength:b,type:n,pattern:g,onBlur:h,readOnly:m,value:a||"",placeholder:x,checked:"undefined"!==typeof a&&a};return"file"===n&&delete k.value,"checkbox"===n&&(k.value=!0),"radio"===n?(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:c}),w.map((function(n){return(0,i.jsx)(e,s(s({},k),{},{label:n.label,value:n.value,checked:n.value===a,style:{padding:"2px 0"},size:"small",readOnly:m,onBlur:h}),n.value)}))]}):(0,i.jsx)(e,s(s({},k),{},{onBlur:h&&function(e){return h(v,e.target.value)},children:w&&w.map((function(e){var n=e.value,t=e.label;return(0,i.jsx)("option",{value:n,children:t},n)}))}))}},d=t(15616);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={TextWidget:l(o.ZP,"input"),EmailWidget:l(o.ZP,"email")};function v(e){return(0,i.jsx)(a.ZP,h(h({},e),{},{widgets:p,noHtml5Validate:!0,ErrorList:function(){return null},transformErrors:d.O5}))}},6645:function(e,n,t){"use strict";t.d(n,{hG:function(){return d},A_:function(){return f},XJ:function(){return h},WN:function(){return p}});var r=t(809),i=t.n(r),a=t(92447),o=t(70513),c=t(9186),s=t(96486),u=t(15616),l=function(e){return console.error(e),[null,e]},d=function(){var e=(0,a.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.g)(),e.prev=1,e.next=4,o.e.post("requests",n,t).then((function(e){return e.data}));case 4:return r=e.sent,e.abrupt("return",[(0,u.UB)(r),null]);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",l(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.g)(),e.prev=1,e.next=4,o.e.post("request",{requestId:n},t).then((function(e){return e.data}));case 4:return r=e.sent,e.abrupt("return",[(0,u.UB)(r),null]);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",l(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.g)(),e.prev=1,e.next=4,o.e.get("requests",n).then((function(e){return e.data}));case 4:return t=e.sent,t=(0,s.orderBy)(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(u.UB),null]);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",l(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)(i().mark((function e(n){var t,r,a,s,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>1&&void 0!==d[1]&&d[1],r=(0,c.g)(),e.prev=2,a="requests",t&&(a="".concat(a,"?submit=true"),n.environments=["dev","test","prod"]),e.next=7,o.e.put(a,n,r).then((function(e){return e.data}));case 7:return s=e.sent,e.abrupt("return",[(0,u.UB)(s),null]);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",l(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}()}}]);