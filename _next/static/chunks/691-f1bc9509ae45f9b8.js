"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{76691:function(t,e,n){n.d(e,{Kk:function(){return C},MO:function(){return P},ZP:function(){return U},c4:function(){return O}});var r,u,a,c=n(50029),i=n(59499),o=n(4730),s=n(71383),l=n(87794),p=n.n(l),d=n(11163),f=n(71893),v=n(99603),h=n(59417),b=n(61165),m=n(37226),w=n(63055),x=n(34798),g=n.n(x),y=n(20353),k=n(85893),Z=["disabled","activeColor","isUnread"];function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var O=f.ZP.div(r||(r=(0,s.Z)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"]))),C=(0,f.ZP)(function(t){t.disabled,t.activeColor,t.isUnread;var e=(0,o.Z)(t,Z);return(0,k.jsx)(v.G,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){(0,i.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e))})(u||(u=(0,s.Z)(["\n  cursor: ",";\n  ","\n  ",";\n"])),function(t){return t.disabled?"not-allowed":"pointer"},function(t){return t.disabled?"color: #CACACA;":"color: inherit; &:hover { color: ".concat(t.activeColor||"#000","; }")},function(t){return t.isUnread?"color: ".concat(w.Uo):""}),P=f.ZP.div(a||(a=(0,s.Z)(["\n  height: 40px;\n  border-right: 2px solid #e3e3e3;\n"])));function U(t){var e,n,r=t.request,u=t.onDelete,a=t.defaultActiveColor,i=t.children,o=t.editIconStyle,s=t.delIconStyle,l=(0,d.useRouter)();(r||{}).archived;var f=(0,y.$8)(r),v=(0,y.uP)(r),x="delete-modal-".concat(null==r?void 0:r.id),Z=(e=(0,c.Z)(p().mark(function t(e){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),v){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,l.push("/request/".concat(r.id,"?status=").concat(r.status));case 5:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}),j=(n=(0,c.Z)(p().mark(function t(){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!["pr","planned","submitted"].includes((null==r?void 0:r.status)||"")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,(0,m.Jl)(r.id);case 5:window.location.hash="#",u&&u(r);case 7:case"end":return t.stop()}},t)})),function(){return n.apply(this,arguments)});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(O,{children:[i,(0,k.jsx)(C,{disabled:!v,icon:h.Xcf,role:"button","data-testid":"action-button-edit","aria-label":"edit",onClick:Z,activeColor:a,title:"Edit",size:"lg",style:void 0===o?{}:o}),(0,k.jsx)(C,{icon:h.$aW,role:"button","data-testid":"action-button-delete","aria-label":"delete",onClick:f?function(){r.id&&f&&(window.location.hash=x)}:g(),disabled:!f,activeColor:w.Uo,title:"Delete",size:"lg",style:void 0===s?{}:s})]}),(0,k.jsx)(b.Z,{id:x,"data-testid":"modal-delete-integration",content:"You are about to delete this integration request. This action cannot be undone.",onConfirm:j,title:"Confirm Deletion",confirmText:"Delete"})]})}},20353:function(t,e,n){n.d(e,{$8:function(){return r},VV:function(){return c},Yr:function(){return i},te:function(){return a},uP:function(){return u}});var r=function(t){return!(!t||t.apiServiceAccount||t.archived||["pr","planned","submitted"].includes((null==t?void 0:t.status)||""))&&(!t.usesTeam||"admin"===t.userTeamRole)},u=function(t){return!!t&&!t.apiServiceAccount&&!t.archived&&!!["draft","applied"].includes(t.status||"")},a=function(t){return!(!t||Number(t.integrationCount)>0)&&"admin"===t.role},c=function(t){return!!t&&"admin"===t.role},i=function(t){return!(!t||t.apiServiceAccount||t.archived||["pr","planned","submitted"].includes((null==t?void 0:t.status)||""))&&(!t.usesTeam||"admin"===t.userTeamRole)}},37226:function(t,e,n){n.d(e,{A_:function(){return j},H0:function(){return C},Jl:function(){return z},Uw:function(){return T},WN:function(){return q},XJ:function(){return O},ct:function(){return P},hG:function(){return Z},zD:function(){return U}});var r,u,a,c,i,o,s,l,p,d=n(50029),f=n(87794),v=n.n(f),h=n(21963),b=n(75316),m=n.n(b),w=n(25751),x=n.n(w),g=n(76427),y=n.n(g),k=n(31513),Z=(r=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.post("requests",e).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[(0,k.UB)(n),null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return r.apply(this,arguments)}),j=(u=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.post("request",{requestId:x()(e)?parseInt(e):e}).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[(0,k.UB)(n),null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return u.apply(this,arguments)}),O=(a=(0,d.Z)(v().mark(function t(){var e,n,r=arguments;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={params:{include:r.length>0&&void 0!==r[0]?r[0]:"active"}},t.prev=2,t.next=5,h.e.get("requests",e).then(function(t){return t.data});case 5:return n=t.sent,n=m()(n,["createdAt"],["desc"]),t.abrupt("return",[n.map(k.UB),null]);case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",(0,h.z)(t.t0));case 13:case"end":return t.stop()}},t,null,[[2,10]])})),function(){return a.apply(this,arguments)}),C=(c=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.get("team-integrations/".concat(e)).then(function(t){return t.data});case 3:return n=t.sent,n=m()(n,["createdAt"],["desc"]),t.abrupt("return",[n.map(k.UB),null]);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,8]])})),function(t){return c.apply(this,arguments)}),P=(i=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.get("requests/".concat(e,"/resubmit")).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[(0,k.UB)(n),null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return i.apply(this,arguments)}),U=(o=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.post("requests-all",e).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[{count:n.count,rows:n.rows.map(k.UB)},null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return o.apply(this,arguments)}),q=(s=(0,d.Z)(v().mark(function t(e){var n,r,u,a=arguments;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],t.prev=1,r="requests",n&&(r="".concat(r,"?submit=true")),(e=y()(e,["user","lastChanges"])).devLoginTitle=e.devLoginTitle||"",e.testLoginTitle=e.testLoginTitle||"",e.prodLoginTitle=e.prodLoginTitle||"",t.next=10,h.e.put(r,e).then(function(t){return t.data});case 10:return u=t.sent,t.abrupt("return",[(0,k.UB)(u),null]);case 14:return t.prev=14,t.t0=t.catch(1),t.abrupt("return",(0,h.z)(t.t0));case 17:case"end":return t.stop()}},t,null,[[1,14]])})),function(t){return s.apply(this,arguments)}),z=(l=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.delete("requests",{params:{id:e}}).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[n,null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return l.apply(this,arguments)}),T=(p=(0,d.Z)(v().mark(function t(e){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.e.put("request-metadata",e).then(function(t){return t.data});case 3:return n=t.sent,t.abrupt("return",[(0,k.UB)(n),null]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,h.z)(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(t){return p.apply(this,arguments)})}}]);