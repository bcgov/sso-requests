"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{3528:function(r,e,n){n.d(e,{A_:function(){return U},H0:function(){return S},Jl:function(){return D},OS:function(){return k},Uw:function(){return E},WN:function(){return I},XJ:function(){return O},hG:function(){return A},zD:function(){return C}});var t,i,u,c,a,s,o,l,d,p=n(50029),f=n(64687),v=n.n(f),h=n(6878),b=n(75316),g=n.n(b),m=n(25751),y=n.n(m),x=n(76427),j=n.n(x),w=n(96052),A=(t=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.post("requests",e).then(function(r){return r.data});case 3:return n=r.sent,r.abrupt("return",[(0,w.UB)(n),null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r){return t.apply(this,arguments)}),U=(i=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.post("request",{requestId:y()(e)?parseInt(e):e}).then(function(r){return r.data});case 3:return n=r.sent,r.abrupt("return",[(0,w.UB)(n),null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r){return i.apply(this,arguments)}),O=(u=(0,p.Z)(v().mark(function r(){var e,n,t=arguments;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e={params:{include:t.length>0&&void 0!==t[0]?t[0]:"active"}},r.prev=2,r.next=5,h.e.get("requests",e).then(function(r){return r.data});case 5:return n=r.sent,n=g()(n,["createdAt"],["desc"]),r.abrupt("return",[n.map(w.UB),null]);case 10:return r.prev=10,r.t0=r.catch(2),r.abrupt("return",(0,h.z)(r.t0));case 13:case"end":return r.stop()}},r,null,[[2,10]])})),function(){return u.apply(this,arguments)}),S=(c=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.get("team-integrations/".concat(e)).then(function(r){return r.data});case 3:return n=r.sent,n=g()(n,["createdAt"],["desc"]),r.abrupt("return",[n.map(w.UB),null]);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 11:case"end":return r.stop()}},r,null,[[0,8]])})),function(r){return c.apply(this,arguments)}),k=(a=(0,p.Z)(v().mark(function r(e,n){var t;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.post("requests/".concat(e,"/restore"),{email:n}).then(function(r){return r.data});case 3:return t=r.sent,r.abrupt("return",[(0,w.UB)(t),null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r,e){return a.apply(this,arguments)}),C=(s=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.post("requests-all",e).then(function(r){return r.data});case 3:return n=r.sent,r.abrupt("return",[{count:n.count,rows:n.rows.map(w.UB)},null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r){return s.apply(this,arguments)}),I=(o=(0,p.Z)(v().mark(function r(e){var n,t,i,u,c,a=arguments;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r.prev=1,u="requests",n&&(u="".concat(u,"?submit=true")),(e=j()(e,["user","lastChanges"])).devLoginTitle=e.devLoginTitle||"",e.testLoginTitle=e.testLoginTitle||"",e.prodLoginTitle=e.prodLoginTitle||"",e.additionalRoleAttribute=e.additionalRoleAttribute||"",e.clientId=e.clientId||"",e.primaryEndUsers=null!==(t=e.primaryEndUsers)&&void 0!==t?t:[],e.primaryEndUsersOther=null!==(i=e.primaryEndUsersOther)&&void 0!==i?i:"",r.next=14,h.e.put(u,e).then(function(r){return r.data});case 14:return c=r.sent,r.abrupt("return",[(0,w.UB)(c),null]);case 18:return r.prev=18,r.t0=r.catch(1),r.abrupt("return",(0,h.z)(r.t0));case 21:case"end":return r.stop()}},r,null,[[1,18]])})),function(r){return o.apply(this,arguments)}),D=(l=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.delete("requests",{params:{id:e}}).then(function(r){return r.data});case 3:return n=r.sent,r.abrupt("return",[n,null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r){return l.apply(this,arguments)}),E=(d=(0,p.Z)(v().mark(function r(e){var n;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.e.put("request-metadata",e).then(function(r){return r.data});case 3:return n=r.sent,r.abrupt("return",[(0,w.UB)(n),null]);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",(0,h.z)(r.t0));case 10:case"end":return r.stop()}},r,null,[[0,7]])})),function(r){return d.apply(this,arguments)})},96052:function(r,e,n){n.d(e,{$G:function(){return z},Dy:function(){return f},F3:function(){return O},HK:function(){return D},HW:function(){return U},LS:function(){return k},O5:function(){return h},R5:function(){return w},SO:function(){return E},Sx:function(){return b},T0:function(){return I},UB:function(){return v},UT:function(){return p},Wv:function(){return m},XI:function(){return C},cN:function(){return S},he:function(){return j},kC:function(){return y},kF:function(){return A},rn:function(){return g}});var t=n(16835),i=n(59499);n(64687),n(25751);var u=n(20827),c=n(30254),a=n(24348),s=n(85893);function o(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=Array(e);n<e;n++)t[n]=r[n];return t}function l(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function d(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){(0,i.Z)(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var p=function(r,e){var n={idir:["idir","azureidir"],bceid:["bceidbasic","bceidbusiness","bceidboth"],github:["githubbcgov","githubpublic"],digitalCredential:"digitalcredential",bcservicescard:"bcservicescard",social:"social"},t=[],i=[];r.forEach(function(r){var e,t,u,c,a,s;"github"==r.value?i=(null===(e=i)||void 0===e?void 0:e.concat(n.github))||null:"idir"==r.value?i=(null===(t=i)||void 0===t?void 0:t.concat(n.idir))||null:"bceid"==r.value?i=(null===(u=i)||void 0===u?void 0:u.concat(n.bceid))||null:"digitalcredential"===r.value?i=(null===(c=i)||void 0===c?void 0:c.concat(n.digitalCredential))||null:"bcservicescard"===r.value?i=(null===(a=i)||void 0===a?void 0:a.concat(n.bcservicescard))||null:"social"===r.value&&(i=(null===(s=i)||void 0===s?void 0:s.concat(n.social))||null)}),t=t.length>0?t:null,i=i.length>0?i:null;var u=e.map(function(r){return r.value});return u=u.length>0?u:null,[i,t,u]},f=function(r){var e=r.bceidApproved,n=r.githubApproved,t=r.bcServicesCardApproved,i=r.environments,c=void 0===i?[]:i,s=r.serviceType,o=r.socialApproved,l=(0,a.Jx)(r),p=(0,a.dV)(r),f=(0,a.e$)(r),v=(0,a.dw)(r),h=u.TJ.map(function(e){var n=r.devIdps;return d(d({},e),{},{idps:n||[]})});if("gold"===s){var b=j(r),g=w(r),m=A(r),y=U(r),x=h.filter(function(r){return c.includes(r.name)});return l&&(!e||b)&&(x=x.map(function(r){return"prod"===r.name&&(r.idps=r.idps.filter(a.JK)),r})),p&&(!n||g)&&(x=x.map(function(r){return"prod"===r.name&&(r.idps=r.idps.filter(a.Qf)),r})),f&&(!t||m)&&(x=x.map(function(r){return"prod"===r.name&&(r.idps=r.idps.filter(a._x)),r})),v&&(!o||y)&&(x=x.map(function(r){return"prod"===r.name&&(r.idps=r.idps.filter(a.FY)),r})),x}var O=c.concat()||[];return l&&!e&&(O=O.filter(function(r){return"prod"!==r})),h.filter(function(r){return O.includes(r.name)})},v=function(r){return r.devValidRedirectUris&&0!==r.devValidRedirectUris.length||(r.devValidRedirectUris=[""]),r.testValidRedirectUris&&0!==r.testValidRedirectUris.length||(r.testValidRedirectUris=[""]),r.prodValidRedirectUris&&0!==r.prodValidRedirectUris.length||(r.prodValidRedirectUris=[""]),r.teamId?r.teamId=String(r.teamId):"draft"!==r.status&&(r.usesTeam=!1),Object.entries(r).forEach(function(e){var n=(0,t.Z)(e,2),i=n[0];null===n[1]&&delete r[i]}),r},h=function(r){return r.map(function(r){var e=Object.keys(u.Qj).map(function(r){return"".concat(r)}),n=r.property.startsWith(".")?r.property.split(".")[1]:r.property;return e.includes(n)?r.message=u.Qj[n]||r.message:(r.property.includes("ValidRedirectUris")||r.property.includes("SamlLogoutPostBindingUri")||r.property.includes("bcscAttributes"))&&("should be string"===r.message?r.message="":"should NOT have fewer than 1 items"===r.message?r.message="":r.message=u.Qj.redirectUris),r})},b=function(r){if(!r||0===r.length)return(0,s.jsx)("div",{children:"No changes"});var e=r.map(function(r){var e=r.kind,n=r.lhs,t=r.rhs,i=r.path,u=r.item,c=i[0];switch(e){case"E":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("strong",{children:["Edited ",c,": "]}),"Changed ",(0,s.jsx)("code",{children:String(n)})," to ",(0,s.jsx)("code",{children:String(t)})]});case"A":if((null==u?void 0:u.kind)==="D")return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("strong",{children:["Changed Array ",c,": "]}),"Deleted ",(0,s.jsxs)("code",{children:[" ",null==u?void 0:u.lhs]})]});if((null==u?void 0:u.kind)==="N")return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("strong",{children:["Changed Array ",c,": "]}),"Added ",(0,s.jsx)("code",{children:null==u?void 0:u.rhs})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("strong",{children:["Changed Array ",c,": "]}),"Edited"," ",(0,s.jsxs)("code",{children:[null==u?void 0:u.lhs," to ",null==u?void 0:u.rhs]})]});case"N":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("strong",{children:["Added ",c,": "]}),(0,s.jsx)("code",{children:u})]});case"D":return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("strong",{children:["Deleted ",c," "]})});default:return(0,s.jsx)("code",{children:JSON.stringify(r,null,2)})}});return(0,s.jsx)("ul",{children:e.map(function(r,e){return(0,s.jsx)("li",{children:r},e)})})},g=function(r){return r.some(function(r){return["submitted","pr","prFailed","planned","planFailed","approved","applyFailed"].includes(r.status||"")})};function m(r,e){if(1===r.length)return!1;var n=r.find(function(r){return r.id===e});return 1!==r.filter(function(r){return"admin"===r.role}).length||(null==n?void 0:n.role)!=="admin"}var y=function(r){return r.charAt(0).toUpperCase()+r.slice(1)},x=function(r,e){return"Submitted"===(0,c.n)(r.status||"draft")&&!!r.lastChanges&&0!==r.lastChanges.length&&r.lastChanges.some(function(r){return r.path[0]===e&&!1===r.lhs&&!0===r.rhs})},j=function(r){return x(r,"bceidApproved")},w=function(r){return x(r,"githubApproved")},A=function(r){return x(r,"bcServicesCardApproved")},U=function(r){return x(r,"social")},O=function(r){var e=new Date;return e.setDate(e.getDate()-r),e},S=function(r){var e;return null===(e=r.client_roles)||void 0===e?void 0:e.includes("bceid-approver")},k=function(r){var e;return null===(e=r.client_roles)||void 0===e?void 0:e.includes("github-approver")},C=function(r){var e;return null===(e=r.client_roles)||void 0===e?void 0:e.includes("social-approver")},I=function(r){var e;return null===(e=r.client_roles)||void 0===e?void 0:e.includes("bc-services-card-approver")},D=function(r){return!!(S(r)||k(r)||I(r)||C(r))},E=function(){return["idir"]},R=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!r.includes("bceidboth")&&!!(r.includes("bceidbasic")||r.includes("bceidbusiness"))},T=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.includes("githubpublic")&&r.includes("githubbcgov")},F=function(r,e){var n=r.every(function(r){return e.includes(r)}),t=e.every(function(e){return r.includes(e)});return n&&t},z=function(r){var e=r.currentIdps,n=r.updatedIdps,t=(r.applied,r.bceidApproved),i=void 0!==t&&t,u=r.protocol,c=r.isAdmin,s=void 0!==c&&c,l=r.githubApproved,d=r.bcServicesCardApproved,p=void 0!==d&&d;if(F(e,n))return!0;if("saml"===(void 0===u?"oidc":u)&&(n.length>1||i&&e[0]!==n[0]))return!1;var f=R(n),v=T(n);if(f||v||!s&&n.includes("githubpublic")||(n.includes("githubbcgov")&&!e.includes("githubbcgov")||n.includes("githubpublic")&&!e.includes("githubpublic"))&&void 0!==l&&l)return!1;if(i){var h=n.filter(a.rp),b=e.filter(a.rp);if(h.some(function(r){return!b.includes(r)}))return!1}var g=E();if(!s){var m,y=function(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return o(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(r,void 0)}}(r))){n&&(r=n);var t=0,i=function(){};return{s:i,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(r){throw r},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,a=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return c=r.done,r},e:function(r){a=!0,u=r},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw u}}}}(g);try{for(y.s();!(m=y.n()).done;){var x=m.value;if(!e.includes(x)&&n.includes(x))return!1}}catch(r){y.e(r)}finally{y.f()}}return!(p&&!n.includes("bcservicescard")&&e.includes("bcservicescard")||p&&!e.includes("bcservicescard")&&n.includes("bcservicescard"))}},30254:function(r,e,n){n.d(e,{n:function(){return t}});var t=function(r){switch(r){case"draft":return"In Draft";case"applied":return"Completed";default:return"Submitted"}}}}]);