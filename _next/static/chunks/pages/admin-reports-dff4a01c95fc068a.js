(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{39247:function(e,t,n){"use strict";n.d(t,{Kk:function(){return _},MO:function(){return k},ZP:function(){return O},c4:function(){return P}});var r=n(16835),o=n(50029),a=n(59499),i=n(4730),s=n(64687),c=n.n(s),u=n(67294),l=n(11163),d=n(71893),p=n(99603),f=n(59417),h=n(3528),m=n(52008),b=n(34798),v=n.n(b),g=n(86552),x=n(94934),j=n(85893),w=["disabled","activeColor","isUnread"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=d.ZP.div.withConfig({displayName:"ActionButtons__ActionButtonContainer",componentId:"sc-mq7fbq-0"})(["height:100%;display:flex;justify-content:end;align-items:center;padding-right:15px;& > *{margin-left:15px;}"]),_=(0,d.ZP)(function(e){var t=e.disabled,n=(e.activeColor,e.isUnread,(0,i.Z)(e,w));return(0,j.jsx)(p.G,C(C({},n),{},{"aria-disabled":t}))}).withConfig({displayName:"ActionButtons__ActionButton",componentId:"sc-mq7fbq-1"})(["cursor:",";"," ",";"],function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"color: #CACACA;":"color: inherit; &:hover { color: ".concat(e.activeColor||"#000","; }")},function(e){return e.isUnread?"color: ".concat(m.Uo):""}),k=d.ZP.div.withConfig({displayName:"ActionButtons__VerticalLine",componentId:"sc-mq7fbq-2"})(["height:40px;border-right:2px solid #e3e3e3;"]);function O(e){var t,n,a=e.request,i=e.onDelete,s=e.defaultActiveColor,d=e.children,p=e.editIconStyle,b=e.delIconStyle,w=(0,l.useRouter)(),y=(0,g.$8)(a),C=(0,g.uP)(a),k=(0,u.useState)(!1),O=k[0],q=k[1],Z=(t=(0,o.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),C){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w.push("/request/".concat(a.id,"?status=").concat(a.status));case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),N=(n=(0,o.Z)(c().mark(function e(){var t,n,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!["pr","planned","submitted"].includes((null==a?void 0:a.status)||"")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,h.Jl)(a.id);case 5:t=e.sent,(n=(0,r.Z)(t,2))[0],o=n[1],window.location.hash="#",i&&i(a,o);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(P,{children:[d,(0,j.jsx)(_,{disabled:!C,icon:f.Xcf,role:"button","data-testid":"action-button-edit","aria-label":"edit",onClick:Z,activeColor:s,title:"Edit",size:"lg",style:void 0===p?{}:p}),(0,j.jsx)(_,{icon:f.$aW,role:"button","data-testid":"action-button-delete","aria-label":"delete",onClick:y?function(){a.id&&y&&q(!0)}:v(),disabled:!y,activeColor:m.Uo,title:"Delete",size:"lg",style:void 0===b?{}:b})]}),(0,j.jsx)(x.Z,{id:"delete-modal-".concat(null==a?void 0:a.id),projectName:a.projectName,onConfirm:N,title:"Confirm Deletion",content:"You are about to delete this integration request. This action cannot be undone.",openModal:O,handleCloseModal:function(){q(!1)}})]})}},94934:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(50029),o=n(64687),a=n.n(o),i=n(48349),s=n(67294),c=n(11915),u=n(70100),l=n.n(u),d=n(85893);function p(e){var t,n=e.id,o=e.onConfirm,u=e.title,p=e.content,f=e.projectName,h=e.openModal,m=e.handleCloseModal,b=(0,s.useState)(""),v=b[0],g=b[1],x=f?"Please enter ".concat(f," below to confirm deletion."):"Please enter the project name below to confirm deletion.",j=l()(f)===l()(v),w=(t=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=3;break}return e.next=3,o();case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,d.jsx)("div",{children:(0,d.jsx)(i.Z,{"data-testid":"modal-delete-integration",content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:p}),(0,d.jsx)(c.default,{"data-testid":"delete-confirmation-input",label:x,value:v,onChange:function(e){return g(e.target.value)}})]}),onConfirm:w,title:u,confirmText:"Delete",buttonStyle:"danger",disableConfirm:!j,openModal:h,handleClose:m,id:n})})}},86552:function(e,t,n){"use strict";n.d(t,{$8:function(){return r},VV:function(){return i},Yr:function(){return s},te:function(){return a},uP:function(){return o}});var r=function(e){return!(!e||e.apiServiceAccount||e.archived||["planFailed","planned","applyFailed","submitted"].includes((null==e?void 0:e.status)||""))&&(!e.usesTeam||!e.teamId||"admin"===e.userTeamRole)},o=function(e){return!!e&&!e.apiServiceAccount&&!e.archived&&!!["draft","applied"].includes(e.status||"")},a=function(e){return!(!e||Number(e.integrationCount)>0)&&"admin"===e.role},i=function(e){return!!e&&"admin"===e.role},s=function(e){return!(!e||e.apiServiceAccount||e.archived||["pr","planned","submitted"].includes((null==e?void 0:e.status)||""))&&(!e.usesTeam||"admin"===e.userTeamRole)}},70928:function(e,t,n){"use strict";n.d(t,{Vs:function(){return l},fW:function(){return d},q1:function(){return u}});var r=n(71893),o=n(99603),a=n(59417),i=n(85893),s=r.ZP.div.withConfig({displayName:"Messages__NotAvailable",componentId:"sc-7bwqpq-0"})(["color:#a12622;height:60px;padding-left:20px;padding-top:16px;padding-bottom:22px;weight:700;background-color:#f2dede;"]),c=r.ZP.div.withConfig({displayName:"Messages__NoProjects",componentId:"sc-7bwqpq-1"})(["color:#006fc4;height:60px;padding-left:20px;padding-top:16px;padding-bottom:22px;weight:700;background-color:#f8f8f8;"]),u=function(){return(0,i.jsxs)(s,{children:[(0,i.jsx)(o.G,{icon:a.RLE,title:"Unavailable"}),"\xa0 The system is unavailable at this moment. please refresh the page."]})},l=function(e){var t=e.message;return(0,i.jsxs)(c,{children:[(0,i.jsx)(o.G,{icon:a.sqG,title:"Information"}),"\xa0 ",t]})},d=function(e){var t=e.message;return(0,i.jsxs)(s,{children:[(0,i.jsx)(o.G,{icon:a.RLE,title:"Error"}),"\xa0 ",t]})}},88653:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r,o,a,i,s=n(16835),c=n(50029),u=n(59499),l=n(64687),d=n.n(l),p=n(67294),f=n(99603),h=n(59417),m=n(82587),b=n(42894),v=n(6878),g=n(84105),x=n(90559),j=new Date,w="".concat(j.getFullYear()).concat(j.getMonth()+1).concat(j.getDate()).concat(j.getHours()).concat(j.getMinutes()),y=(r=(0,c.Z)(d().mark(function e(){var t,n,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("reports/all-standard-integrations").then(function(e){return e.data});case 3:return t=e.sent,n=g.P6.json_to_sheet(t),r=g.P6.book_new(),g.P6.book_append_sheet(r,n,"All standard integrations"),g.NC(r,"all-standard-integrations-".concat(w,".xlsx")),e.abrupt("return",[!0,null]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",(0,v.z)(e.t0));case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return r.apply(this,arguments)}),C=(o=(0,c.Z)(d().mark(function e(t,n){var r,o,a;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("reports/database-tables",{params:{type:t,orderBy:n}}).then(function(e){return e.data});case 3:return r=e.sent,o=g.P6.json_to_sheet(r),a=g.P6.book_new(),g.P6.book_append_sheet(a,o,"All ".concat(t)),g.NC(a,"all-".concat(t.toLowerCase(),"-").concat(w,".xlsx")),e.abrupt("return",[!0,null]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",(0,v.z)(e.t0));case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(e,t){return o.apply(this,arguments)}),P=(a=(0,c.Z)(d().mark(function e(){var t,n,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("reports/all-bceid-approved-requests-and-events").then(function(e){return e.data});case 3:return t=e.sent,n=g.P6.json_to_sheet(t),r=g.P6.book_new(),g.P6.book_append_sheet(r,n,"All BCeID Approved Reqs&Events"),g.NC(r,"all-bceid-approved-requests-and-events-".concat(w,".xlsx")),e.abrupt("return",[!0,null]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",(0,v.z)(e.t0));case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return a.apply(this,arguments)}),_=(i=(0,c.Z)(d().mark(function e(){var t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.e.get("reports/data-integrity").then(function(e){return e.data});case 3:return t=e.sent,(0,x.Di)((0,x.ON)(t),"sso-css-data-integrity-".concat(new Date().getTime(),".json")),e.abrupt("return",[!0,null]);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",(0,v.z)(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return i.apply(this,arguments)}),k=n(71893),O=n(23157),q=n(39247),Z=n(70928),N=n(96052),A=n(11163),D=n(85893);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=k.ZP.div.withConfig({displayName:"admin-reports__BorderLine",componentId:"sc-hhq6es-0"})(["border-bottom:1px solid #707070;margin-bottom:20px;padding-bottom:10px;"]),R=k.ZP.div.withConfig({displayName:"admin-reports__DatabaseReportContainer",componentId:"sc-hhq6es-1"})(["display:flex;"]),T=k.ZP.div.withConfig({displayName:"admin-reports__DownloadIconStyle",componentId:"sc-hhq6es-2"})(["padding-top:5px;margin-left:20px;"]),U=[{maxWidth:900,marginTop:0,marginLeft:10,marginRight:10,marginUnit:"px",horizontalAlign:"none"},{width:480,marginTop:0,marginLeft:2.5,marginRight:2.5,marginUnit:"rem",horizontalAlign:"none"}],F=[{value:"all-requests",label:"Integrations"},{value:"all-users",label:"Users"},{value:"all-teams",label:"Teams"},{value:"all-events",label:"Events"}],M={"all-requests":"Requests","all-users":"Users","all-teams":"Teams","all-events":"Events"},B={Requests:"id",Users:"id",Teams:"id",Events:"request_id"};function z(e){return""==e.type?(0,D.jsx)(D.Fragment,{}):(0,D.jsx)(q.Kk,{icon:h.q7m,role:"button",onClick:e.handleClick,title:"Download",size:"lg"})}function L(e){var t,n,r,o,a,i=e.session,u=(0,A.useRouter)(),l=(0,p.useState)(!1),v=l[0],g=l[1],x=(0,p.useState)(""),j=x[0],w=x[1],k=(0,p.useState)(!1),q=k[0],E=k[1];(0,p.useEffect)(function(){null!=i&&i.isAdmin||(0,N.HK)(i)||u.push("/my-dashboard")},[]);var L=(t=(0,c.Z)(d().mark(function e(t){var n,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),E(!1),e.next=4,t();case 4:n=e.sent,(r=(0,s.Z)(n,2))[0],r[1]&&E(!0),g(!1);case 10:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),G=(n=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L(y));case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),V=(r=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L(P));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),W=(o=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L(_));case 1:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),H=(a=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L(function(){return C(M[j],B[M[j]])}));case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});return(0,D.jsxs)(m.Z,{rules:U,children:[(0,D.jsx)("h2",{children:"Reports"}),(0,D.jsx)(I,{children:v?(0,D.jsx)(b.rj,{color:"#000",height:25,width:25,wrapperClass:"d-block",visible:v}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("button",{className:"primary",type:"button",onClick:G,children:[(0,D.jsx)("span",{children:"All Standard Integrations\xa0"}),(0,D.jsx)(f.G,{icon:h.q7m})]}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsxs)("button",{className:"primary",type:"button",onClick:V,children:[(0,D.jsx)("span",{children:"All BCeID Approved Requests And Events\xa0"}),(0,D.jsx)(f.G,{icon:h.q7m})]}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsxs)("button",{className:"primary",type:"button",onClick:W,children:[(0,D.jsx)("span",{children:"Data Integrity\xa0"}),(0,D.jsx)(f.G,{icon:h.q7m})]})]})}),(0,D.jsx)("h2",{children:"Database"}),v?(0,D.jsx)(b.rj,{color:"#000",height:25,width:25,wrapperClass:"d-block",visible:v}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(R,{children:[(0,D.jsx)(function(){return(0,D.jsx)(O.ZP,{value:F.filter(function(e){return e.value===j}),options:F,onChange:function(e){return w(e.value)},maxMenuHeight:300,placeholder:"Select table...",styles:{control:function(e){return S(S({},e),{},{width:"250px"})},menu:function(e){return S(S({},e),{},{width:"250px"})}}})},{}),(0,D.jsx)(T,{children:(0,D.jsx)(z,{type:j,handleClick:H})})]}),"all-events"===j&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)("p",{children:(0,D.jsx)("em",{children:"Event downloads limited to 5000 most recent events. Please use dashboard for long-term event analysis."})})]})]}),q&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)(Z.fW,{message:"Failed to download report. Please try again."})]})]})}},90559:function(e,t,n){"use strict";n.d(t,{Di:function(){return a},ON:function(){return r},TE:function(){return o}});var r=function(e){return JSON.stringify(e,void 0,2)},o=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy"),document.body.removeChild(t),!0}catch(e){return document.body.removeChild(t),!1}},a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:n})),o=document.createElement("a");o.href=r,o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}},36484:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-reports",function(){return n(88653)}])},20067:function(){},72061:function(){}},function(e){e.O(0,[251,302,528,888,774,179],function(){return e(e.s=36484)}),_N_E=e.O()}]);