(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{35611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(96282),a=n(69829),i={shared:{label:"\n      display: block;\n      margin-bottom: 0.2777em;\n    ",wrapper:"\n      position: relative;\n      display: flex;\n      background: #fff;\n      overflow: hidden;\n      border: 2px solid #606060;\n      border-radius: 0;\n      padding: 0.3em 0;\n\n      &:after {\n        content: ' ';\n        background-image: "+(0,a.toSvgUrl)(a.ChevronDown)+";\n        background-size: contain;\n        background-repeat: no-repeat;\n        position: absolute;\n        right: 0.2em;\n        width: 1.2em;\n        height: 100%;\n        text-align: center;\n        cursor: pointer;\n        pointer-events: none;\n        -webkit-transition: .25s all ease;\n        -o-transition: .25s all ease;\n        transition: .25s all ease;\n      }\n\n      &:focus-within  {\n        outline: 4px solid #3B99FC;\n        outline-offset: 1px;\n      }\n\n      &:hover::after {}\n  ",input:"\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      -ms-appearance: none;\n      appearance: none;\n      outline: 0;\n      box-shadow: none;\n      border: 0 !important;\n      background: #fff;\n      background-image: none;\n      display: inline-block;\n      flex: 1;\n      padding: 0 .5em;\n      color: #000;\n      cursor: pointer;\n\n      &::-ms-expand {\n        display: none;\n      }\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},rounded:{wrapper:"\n      border-radius: 0.25em;\n    "}};t.styles=i;var l=(0,r.applyTheme)(i,{defaultProps:{size:"medium",rounded:!0,required:!1},staticProps:["fullWidth"],includeWrapper:!0});t.default=l},64735:function(e,t,n){"use strict";t.ZP=void 0;var r=(0,n(70623).applyTheme)({},{defaultProps:{},staticProps:[],cols:20,gutter:[5,2]});t.ZP=r},74150:function(e,t,n){"use strict";var r,a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.content,n=e.external,r=e.children,a=(0,l.default)(e,["content","external","children"]);return o.default.createElement(p,(0,i.default)({target:n?"_blank":"_self"},a),t||r,n&&o.default.createElement(o.default.Fragment,null,"\xa0",o.default.createElement(u.FaSVG,null,o.default.createElement("path",{fill:"currentColor",d:u.ExternalLinkAlt}))))},t.sizes=void 0;var i=a(n(87462)),l=a(n(63366)),s=a(n(81880)),o=a(n(67294)),c=a(n(8557)),u=n(69829),d={small:"0.8rem",medium:"1rem",large:"1.2rem"};t.sizes=d;var p=c.default.a(r||(r=(0,s.default)(["\n  font-size: ",";\n  color: #1a5a96;\n\n  &:hover {\n    text-decoration: none;\n    color: blue;\n  }\n\n  &:focus {\n    outline: 4px solid #3b99fc;\n    outline-offset: 1px;\n  }\n"])),function(e){return d[e.size||"medium"]})},74857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(63236),a={shared:{label:"\n      display: block;\n      position: relative;\n      cursor: pointer;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      height: 1em;\n      line-height: 1em;\n      padding-left: 1.5em;\n\n      &:focus-within {\n        outline: 4px solid #3B99FC;\n        outline-offset: 1px;\n      }\n    ",input:"\n      position: absolute;\n      opacity: 0;\n      cursor: pointer;\n      height: 0;\n      width: 0;\n\n      &:checked ~ .dot {\n        background-color: #ffffff;\n      }\n\n      &:checked ~ .dot:after {\n        display: block;\n      }\n    ",dot:'\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 1em;\n      height: 1em;\n      border-radius: 50%;\n      box-shadow: 0px 0px 0px 2px #606060 inset;\n\n      &:after {\n        content: "";\n        position: absolute;\n        display: none;\n        top: 50%;\n        left: 50%;\n        width: 0.5em;\n        height: 0.5em;\n        border-radius: 50%;\n        background: #606060;\n        transform: translate(-50%, -50%);\n      }\n    '},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}}};t.styles=a;var i=(0,r.applyTheme)(a,{defaultProps:{size:"medium"},staticProps:[]});t.default=i},70623:function(e,t,n){"use strict";var r,a,i=n(64836),l=n(75263);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.applyTheme=void 0;var s=i(n(63366)),o=i(n(87462)),c=i(n(81880)),u=l(n(67294)),d=i(n(86010)),p=i(n(78096)),f=n(80927),v="pg-grid-col",h={start:"flex-start",center:"center",end:"flex-end","space-between":"space-between","space-around":"space-around"},m={top:"flex-start",center:"center",bottom:"flex-end"},b=u.default.createContext({styleProps:{},Srow:null,Scol:null,cols:16,gutter:0,gutterUnit:"px",justify:"start",align:"start"}),x=function(e,t){var n,i,l=(0,f.processStyle)(e),x=(0,f.createStyleBuilder)(l,t),g=t.as||{},j=x(g.container||"div","container"),y=x((n=g.row||"div",p.default[n](r||(r=(0,c.default)(["\n    position: relative;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    -ms-flex-wrap: wrap;\n    flex-wrap: wrap;\n    -webkit-box-pack: inherit;\n    -ms-flex-pack: inherit;\n    justify-content: inherit;\n    -webkit-box-align: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\n    ","\n  "])),function(e){return"\n      margin-left: -"+e.gutterHorizontal+e.gutterUnit+";\n      margin-right: -"+e.gutterHorizontal+e.gutterUnit+";\n      row-gap: "+e.gutterVertical+e.gutterUnit+";\n      & > ."+v+" {\n        padding: "+e.gutterVertical+e.gutterUnit+" "+e.gutterHorizontal+e.gutterUnit+";\n      }\n      justify-content: "+h[e.justify]+";\n      align-items: "+m[e.align]+";\n      "+(e.collapse?"@media (max-width: "+e.collapse+"px) {\n              -webkit-box-orient: vertical;\n              -ms-flex-direction: column;\n              flex-direction: column;\n              & > ."+v+" {\n                width: 100% !important;\n              }\n            }\n            ":"")+"\n    "})),"row"),w=x((i=g.col||"div",p.default[i](a||(a=(0,c.default)(["\n    width: ","%;\n  "])),function(e){return e.width})),"col"),S=t.cols,E=void 0===S?16:S,P=t.gutter,C=t.gutterUnit,k=t.justify,A=t.align,U=(0,f.createBootstrap)(l,"grid"),O=function(e){var t=U(e),n=(t.id,t.name,t.label,t.ariaLabel,t.styleProps),r=t.children,a=t.className,i=t.rest,l=i.cols;return u.default.createElement(b.Provider,{value:{styleProps:n,Srow:y,Scol:w,cols:l||E,gutter:P,gutterUnit:C,justify:k,align:A}},u.default.createElement(j,(0,o.default)({},i,{className:(0,d.default)("pg-grid-container",a)}),r))};return O.Row=function(e){var t=(0,u.useContext)(b),n=t.Srow,r=t.styleProps,a=t.gutter,i=t.gutterUnit,l=t.justify,c=t.align,p=e.children,f=e.className,v=e.gutter,h=void 0===v?a:v,m=e.gutterUnit,x=e.justify,g=e.align,j=e.collapse,y=(0,s.default)(e,["children","className","gutter","gutterUnit","justify","align","collapse"]),w=(0,d.default)("pg-grid-row",f),S=0,E=0;if(Array.isArray(h))S=h[0]||0,E=h[1]||0;else{var P=h||0;S=P,E=P}return u.default.createElement(n,(0,o.default)({className:w},r,y,{collapse:j||"",gutterHorizontal:S,gutterVertical:E,gutterUnit:(void 0===m?i:m)||"px",justify:(void 0===x?l:x)||"start",align:(void 0===g?c:g)||"start"}),p)},O.Col=function(e){var t=e.children,n=e.className,r=e.span,a=(0,s.default)(e,["children","className","span"]),i=(0,d.default)(v,n),l=(0,u.useContext)(b),c=l.Scol,p=l.cols,f=l.styleProps;return u.default.createElement(c,(0,o.default)({className:i},f,a,{width:(void 0===r?1:r)/p*100}),t)},O};t.applyTheme=x;var g=x({},{});t.default=g},63236:function(e,t,n){"use strict";var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.applyTheme=void 0;var a=r(n(87462)),i=r(n(63366)),l=r(n(67294)),s=r(n(86010)),o=n(80927),c=function(e,t){var n=(0,o.processStyle)(e),r=(0,o.createStyleBuilder)(n,t),c=r((t.as||{}).container||"div","container"),u=r("label","label"),d=r("input","input"),p=r("span","dot"),f=(0,o.createBootstrap)(n,"radio");return function(e){var t=f(e),n=t.id,r=t.name,o=t.label,v=t.ariaLabel,h=t.styleProps,m=t.className,b=t.rest,x=b.style,g=b.labelStyle,j=b.inputStyle,y=b.dotStyle,w=(0,i.default)(b,["style","labelStyle","inputStyle","dotStyle"]);return l.default.createElement(c,(0,a.default)({},h,{style:x,className:(0,s.default)("pg-radio",m)}),l.default.createElement(u,(0,a.default)({},h,{htmlFor:n,style:g,className:"pg-radio-label"}),l.default.createElement(d,(0,a.default)({"aria-label":v},w,{type:"radio",id:n,name:r,style:j,className:"pg-radio-input"})),l.default.createElement(p,(0,a.default)({},h,{style:y,className:"dot"})),o))}};t.applyTheme=c;var u=c({},{});t.default=u},96282:function(e,t,n){"use strict";var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.applyTheme=void 0;var a=r(n(87462)),i=r(n(63366)),l=r(n(67294)),s=r(n(86010)),o=n(80927),c=function(e,t){var n=(0,o.processStyle)(e),r=(0,o.createStyleBuilder)(n,t),c=t.as||{},u=r(c.container||"div","container"),d=r("label","label"),p=t.includeWrapper?r(c.wrapper||"div","wrapper"):null,f=r("select","input"),v=(0,o.createBootstrap)(n,"select");return function(e){var t=v(e),n=t.id,r=t.name,o=t.label,c=t.ariaLabel,h=t.styleProps,m=t.children,b=t.className,x=t.rest,g=x.style,j=x.labelStyle,y=x.inputStyle,w=x.wrapperStyle,S=(0,i.default)(x,["style","labelStyle","inputStyle","wrapperStyle"]),E=l.default.createElement(f,(0,a.default)({"aria-label":c},S,{id:n,name:r,style:y,className:"pg-select-input"}),m);return l.default.createElement(u,(0,a.default)({},h,{style:g,className:(0,s.default)("pg-select",b)}),o&&l.default.createElement(d,(0,a.default)({htmlFor:n},h,{style:j,className:"pg-select-label"}),o),p?l.default.createElement(p,(0,a.default)({},h,{style:w,className:"pg-select-wrapper"}),E):E)}};t.applyTheme=c;var u=c({},{staticProps:["fullWidth"]});t.default=u},83333:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r,a=n(71383);n(67294);var i=n(71893),l=n(31513),s=n(85893),o=i.ZP.div(r||(r=(0,a.Z)(["\n  margin-top: 20px;\n  max-height: calc(100vh - 250px);\n  overflow: auto;\n"])));function c(e){var t=e.events;return(0,s.jsx)(o,{children:t&&0!==t.length?t.map(function(e){var t;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Event Code: "}),e.eventCode]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created Time: "}),(t=e.createdAt,new Date(t).toLocaleString())]}),e.idirUserDisplayName&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Created By: "}),e.idirUserDisplayName]})}),e.details&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:"Details"})}),"request-update-success"===e.eventCode?(0,s.jsxs)(s.Fragment,{children:[(0,l.Sx)(e.details.changes),(0,s.jsx)("strong",{children:"Comment: "}),(0,s.jsx)("p",{children:e.details.comment})]}):(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:JSON.stringify(e.details||{},void 0,2)})})]}),(0,s.jsx)("hr",{})]},e.id)}):(0,s.jsx)("div",{children:"No events found"})})}},19344:function(e,t,n){"use strict";var r,a,i,l=n(71383),s=n(71893),o=n(77740),c=n(63005),u=n(85893),d=s.ZP.table(r||(r=(0,l.Z)(["\n  font-size: unset;\n  & tr {\n    display: flex;\n    margin-bottom: 5px;\n    & > td {\n      border: none;\n      padding: 0 5px 0 0;\n    }\n  }\n"]))),p=s.ZP.span(a||(a=(0,l.Z)(["\n  font-weight: 600;\n"]))),f=s.ZP.ul(i||(i=(0,l.Z)(["\n  list-style: none;\n  margin: 0;\n  & li {\n    margin: 0;\n  }\n"]))),v=function(e){var t=e.list,n=e.title,r=e.inline,a=void 0!==r&&r,i=e.testid;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:n}),((null==t?void 0:t.length)===1||a)&&(0,u.jsx)(p,{"data-testid":i,children:null==t?void 0:t.map(function(e,n){return(0,u.jsxs)("span",{children:[e,n!==t.length-1&&", "," "]},e)})})]}),!a&&((null==t?void 0:t.length)||0)>1&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{children:(0,u.jsx)(p,{children:(0,u.jsx)(f,{children:null==t?void 0:t.map(function(e){return(0,u.jsx)("li",{children:e},e)})})})})})]})};t.Z=function(e){var t,n,r,a,i,l,s,f,h=e.children,m=e.request,b=e.teams;if(!m)return null;var x=null!==(a=m.devIdps)&&void 0!==a?a:[],g="saml"!==m.protocol,j=x.map(function(e){return c.S[e]}),y="";m.usesTeam&&(y=(null===(f=(void 0===b?[]:b).find(function(e){return String(e.id)===String(m.teamId)}))||void 0===f?void 0:f.name)||m.team&&m.team.name);var w=(t=m.primaryEndUsers,n=m.primaryEndUsersOther,null==t?void 0:t.map(function(e){switch(e){case"livingInBC":return"People living in BC";case"businessInBC":return"People doing business/travel in BC";case"bcGovEmployees":return"BC Gov Employees";case"other":return"Other: ".concat(null!=n?n:"");default:return""}}));return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(d,{children:(0,u.jsxs)("tbody",{children:[y?(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Associated Team:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"associated-team",children:y})})]}):(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Are you accountable for this project?"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"you-accountable",children:void 0===(r=m.projectLead)?"":r?"Yes":"No"})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Client Protocol:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"client-protocol",children:g?"OpenID Connect":"SAML"})})]}),g&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Client Type:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"client-type-team",children:m.publicAccess?"Public":"Confidential"})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Usecase:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"use-case",children:o.F[m.authType||"browser-login"]})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Project Name:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"project-name",children:m.projectName})})]}),w&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Primary End Users:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"project-name",children:w.join(", ")})})]}),m.additionalRoleAttribute&&(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Additional Role Attribute:"}),(0,u.jsx)("td",{children:(0,u.jsx)(p,{"data-testid":"add-role-attrib",children:m.additionalRoleAttribute})})]}),(0,u.jsx)(v,{list:j,title:"Identity Providers Required:",inline:!0,testid:"idp-required"}),(null===(i=m.environments)||void 0===i?void 0:i.includes("dev"))&&(0,u.jsx)(v,{list:m.devValidRedirectUris,title:"Dev Redirect URIs:",testid:"dev-uri"}),(null===(l=m.environments)||void 0===l?void 0:l.includes("test"))&&(0,u.jsx)(v,{list:m.testValidRedirectUris,title:"Test Redirect URIs:",testid:"test-uri"}),(null===(s=m.environments)||void 0===s?void 0:s.includes("prod"))&&(0,u.jsx)(v,{list:m.prodValidRedirectUris,title:"Prod Redirect URIs:",testid:"prod-uri"}),h]})})})}},63005:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var r={idir:"IDIR",azureidir:"IDIR - MFA",bceidbasic:"Basic BCeID",bceidbusiness:"Business BCeID",bceidboth:"Basic or Business BCeID",githubbcgov:"GitHub BC Gov",githubpublic:"GitHub",digitalcredential:"Digital Credential"}},77740:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var r={"browser-login":"Browser Login","service-account":"Service Account",both:"Browser Login & Service Account"}},80877:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ef}});var r,a,i,l,s,o=n(16835),c=n(50029),u=n(87794),d=n.n(u),p=n(67294),f=n(11163),v=n(20070),h=n.n(v),m=n(59417),b=n(53442),x=n(37226),g=n(76691),j=n(61165),y=n(63055),w=n(31513),S=n(71383),E=n(71893),P=n(85330),C=n(99154),k=n(19344),A=n(4826),U=n(23157),O=[{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"planned",label:"Planned"},{value:"planFailed",label:"Plan Failed"},{value:"applied",label:"Applied"},{value:"applyFailed",label:"Apply Failed"}],Z=n(85893),R=function(e){var t,n=e.request,r=e.onUpdate,a=(0,p.useState)(n.status),i=a[0],l=a[1],s="edit-metadata",o=(t=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Uw)({id:n.id,status:i});case 2:if(!r){e.next=5;break}return e.next=5,r();case 5:window.location.hash="#";case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,p.useEffect)(function(){l(n.status)},[n.id]);var u=(0,Z.jsxs)("div",{"data-testid":"integration-status",children:[(0,Z.jsx)("p",{style:{fontWeight:"bold"},children:"Integration Status"}),(0,Z.jsx)(U.ZP,{className:"react-select-container",classNamePrefix:"select",options:O.filter(function(e){return["draft","submitted"].includes(e.value)}),onChange:function(e){return l(e.value)},isSearchable:!0})]});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(A.default,{variant:"bcPrimary",size:"small",onClick:function(){return window.location.hash=s},children:"Edit Metadata"}),(0,Z.jsx)(j.Z,{id:s,content:u,onConfirm:o,icon:m.UJf,title:"Edit Metadata",closable:!0})]})},_=E.ZP.div(r||(r=(0,S.Z)(["\n  max-height: calc(100vh - 250px);\n  overflow: auto;\n"])));function T(e){var t=e.currentUser,n=e.request,r=e.onUpdate;return n?(0,Z.jsxs)(_,{children:[(0,Z.jsx)("br",{}),(0,Z.jsxs)(k.Z,{request:n,children:[(0,Z.jsx)("br",{}),t.isAdmin&&(0,Z.jsx)(R,{request:n,onUpdate:r})]})]}):null}var N=n(59499),D=n(42894),F=n(70300),I=n(76944),B=n(83333);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=E.ZP.div(a||(a=(0,S.Z)(["\n  text-align: center;\n"]))),K=[{value:"all",label:"All Events"},{value:"request-pr-success",label:"REQUEST_PR_SUCCESS"},{value:"request-pr-failure",label:"REQUEST_PR_FAILURE"},{value:"request-plan-success",label:"REQUEST_PLAN_SUCCESS"},{value:"request-plan-failure",label:"REQUEST_PLAN_FAILURE"},{value:"request-apply-success",label:"REQUEST_APPLY_SUCCESS"},{value:"request-apply-failure",label:"REQUEST_APPLY_FAILURE"},{value:"request-create-success",label:"REQUEST_CREATE_SUCCESS"},{value:"request-create-failure",label:"REQUEST_CREATE_FAILURE"},{value:"request-update-success",label:"REQUEST_UPDATE_SUCCESS"},{value:"request-update-failure",label:"REQUEST_UPDATE_FAILURE"},{value:"request-delete-success",label:"REQUEST_DELETE_SUCCESS"},{value:"request-delete-failure",label:"REQUEST_DELETE_FAILURE"},{value:"email-submission-failure",label:"EMAIL_SUBMISSION_FAILURE"}];function M(e){var t,n=e.requestId,r=(0,p.useState)("all"),a=r[0],i=r[1],l=(0,p.useState)([]),s=l[0],u=l[1],f=(0,p.useState)(!1),v=f[0],h=f[1],m=(0,p.useState)(!1),b=m[0],x=m[1],g=(t=(0,c.Z)(d().mark(function e(){var t,r,i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,(0,I.v)({requestId:n,eventCode:a});case 5:t=e.sent,i=(r=(0,o.Z)(t,2))[0],r[1]?x(!0):i&&u(i.rows),h(!1);case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,p.useEffect)(function(){g()},[n,a]);var j=function(e){i(e)};return b?null:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(F.Z,{"data-testid":"events-dropdown",children:[(0,Z.jsx)("br",{}),(0,Z.jsx)(U.ZP,{options:K,onChange:function(e){return j(e.value)},maxMenuHeight:300,styles:{control:function(e){return z(z({},e),{},{width:"250px"})},menu:function(e){return z(z({},e),{},{width:"250px"})}}})]}),v?(0,Z.jsx)(L,{children:(0,Z.jsx)(D.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:v})}):(0,Z.jsx)(B.Z,{events:s})]})}var H=n(44e3),Q=n(9206);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=E.ZP.div(i||(i=(0,S.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n"]))),Y=function(e){var t,n,r=e.integration,a=e.type,i=e.canApproveProd,l=e.awaitingTFComplete,s=e.onApproved;if(!r)return null;var u=h()(a),p="".concat(a,"-approval-modal"),f=!1;switch(a){case"bceid":f=(0,w.he)(r);break;case"github":f=(0,w.R5)(r);break;case"digitalCredential":f=(0,w.jt)(r)}n=i?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("p",{children:"To begin the ".concat(u," integration in production, Click Below.")}),(0,Z.jsx)(A.default,{onClick:function(){return window.location.hash=p},disabled:l,children:"Approve Prod"})]}):l&&f?(0,Z.jsx)("div",{style:{display:"inline-flex",background:"#FFCCCB",borderRadius:"5px"},children:(0,Z.jsx)("div",{style:{padding:5},children:(0,Z.jsxs)(H.B,{children:["Your request for ",a," approval could not be completed. Please"," ",(0,Z.jsx)(Q.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})}):(0,Z.jsx)("p",{children:"This integration has already been approved."});var v=(t=(0,c.Z)(d().mark(function e(){var t,n;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.WN)(V(V({},r),{},(0,N.Z)({},"".concat(a,"Approved"),!0)),!0);case 2:t=e.sent,n=(0,o.Z)(t,2)[1],s&&!n&&s();case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(W,{children:[(0,Z.jsx)("br",{}),n]}),(0,Z.jsx)(j.Z,{id:p,content:"Are you sure you want to approve this integration for ".concat(u," production?"),onConfirm:v,icon:m.eHv,title:"".concat(u," Approve")})]})},J=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,a=t.bceidApproved;return(0,Z.jsx)(Y,{type:"bceid",integration:t,canApproveProd:!a,awaitingTFComplete:"applied"!==r,onApproved:n})},X=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,a=t.githubApproved;return(0,Z.jsx)(Y,{type:"github",integration:t,canApproveProd:!a,awaitingTFComplete:"applied"!==r,onApproved:n})},$=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,a=t.digitalCredentialApproved;return(0,Z.jsx)(Y,{type:"digitalCredential",integration:t,canApproveProd:!a,awaitingTFComplete:"applied"!==r,onApproved:n})},ee=E.ZP.div(l||(l=(0,S.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n"]))),et=function(e){var t=e.currentUser,n=e.integration,r=e.defaultTabKey,a=e.setActiveKey,i=e.setRows,l=e.activeKey;if(!n)return null;var s=n.environments,o=(void 0===s?[]:s).includes("prod"),c=(0,C.Jx)(n),u=(0,C.dV)(n),d=(0,C.S3)(n);return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(P.mQ,{activeKey:void 0===l?r:l,onChange:function(e){return a(e)},tabBarGutter:30,children:[(0,Z.jsx)(P.OK,{tab:"Details",children:(0,Z.jsx)(ee,{children:(0,Z.jsx)(T,{currentUser:t,request:n,onUpdate:i})})},"details"),c&&o&&(0,Z.jsx)(P.OK,{tab:"BCeID Prod",children:(0,Z.jsx)(J,{integration:n,onApproved:function(){return i()}})},"bceid-prod"),u&&o&&(0,Z.jsx)(P.OK,{tab:"GitHub Prod",children:(0,Z.jsx)(X,{integration:n,onApproved:function(){return i()}})},"github-prod"),d&&o&&(0,Z.jsx)(P.OK,{tab:"Digital Credential Prod",children:(0,Z.jsx)($,{integration:n,onApproved:function(){return i()}})},"vc-prod"),(0,Z.jsx)(P.OK,{tab:"Events",children:(0,Z.jsx)(ee,{children:(0,Z.jsx)(M,{requestId:n.id})})},"events")]})})},en=n(46312),er=n(59912),ea=n(49910),ei=E.ZP.div(s||(s=(0,S.Z)(["\n  height: 100%;\n  overflow: auto;\n"]))),el=function(e){var t=e.leftPanel,n=e.rightPanel,r=e.showResizable;return e.children,(0,Z.jsxs)(er.Z,{rules:ea.F,children:[void 0===r||r?(0,Z.jsx)(en.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.45*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,Z.jsx)(ei,{children:t&&t()})}):t&&t(),(0,Z.jsx)("br",{}),n&&n()]})},es=n(3016),eo=[{value:"idir",label:"IDIR"},{value:"bceid",label:"BCeID"},{value:"github",label:"GitHub"},{value:"digitalcredential",label:"Digital Credential"}],ec=[{value:"active",label:"Active"},{value:"archived",label:"Deleted"}],eu=[{value:"dev",label:"Dev"},{value:"test",label:"Test"},{value:"prod",label:"Prod"}],ed=[5,10,15,30,50,100];function ep(){return(0,Z.jsx)("span",{style:{marginLeft:"40%"},children:"Actions"})}function ef(e){var t,n,r,a,i,l,s,u,v,S=e.session,E=(0,f.useRouter)(),P=(0,p.useState)(!1),C=P[0],k=P[1],A=(0,p.useState)(!1),U=A[0],R=A[1],_=(0,p.useState)([]),T=_[0],N=_[1],D=(0,p.useState)(String((null===(u=E.query)||void 0===u?void 0:u.id)||"")),F=D[0],I=D[1],B=(0,p.useState)(0),q=B[0],z=B[1],L=(0,p.useState)(5),K=L[0],M=L[1],H=(0,p.useState)(1),Q=H[0],G=H[1],V=(0,p.useState)(Number(null===(v=E.query)||void 0===v?void 0:v.id)||void 0),W=V[0],Y=V[1],J=(0,p.useState)([]),X=J[0],$=J[1],ee=(0,p.useState)([]),en=ee[0],er=ee[1],ea=(0,p.useState)([]),ei=ea[0],ef=ea[1],ev=(0,p.useState)([]),eh=ev[0],em=ev[1],eb=(0,p.useState)("details"),ex=eb[0],eg=eb[1],ej=T.find(function(e){return e.id===W}),ey=(t=(0,c.Z)(d().mark(function e(){var t,n,r,a,i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,w.UT)(en,X),r=(n=(0,o.Z)(t,3))[0],a=n[1],i=n[2],e.abrupt("return",(0,x.zD)({searchField:["id","projectName"],searchKey:F,order:[["updatedAt","desc"],["status","desc"]],limit:K,page:Q,status:ei.map(function(e){return e.value}),archiveStatus:eh.map(function(e){return e.value}),realms:a,environments:i,types:["gold"],devIdps:r}));case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),ew=(n=(0,c.Z)(d().mark(function e(){var t,n,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,ey();case 3:t=e.sent,r=(n=(0,o.Z)(t,2))[0],n[1]?R(!0):r&&(N(r.rows),z(r.count)),k(!1);case 9:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});if((0,p.useEffect)(function(){Y(void 0),ew()},[F,K,Q,ei,eh,en,X]),(0,p.useEffect)(function(){var e;return(0,w.rn)(T)&&(e=setTimeout((0,c.Z)(d().mark(function t(){var n,r,a;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ey();case 2:n=t.sent,a=(r=(0,o.Z)(n,2))[0],r[1]?clearInterval(e):a&&(N(a.rows),z(a.count));case 7:case"end":return t.stop()}},t)})),5e3)),function(){e&&clearInterval(e)}},[T]),U)return null;var eS=function(e){return!e.archived&&["applied"].includes((null==e?void 0:e.status)||"")&&!e.apiServiceAccount},eE=function(e){return!0!==e.archived&&!["pr","planned","submitted"].includes((null==e?void 0:e.status)||"")},eP=function(e){return!1!==e.archived&&!!["applied"].includes((null==e?void 0:e.status)||"")},eC=(r=(0,c.Z)(d().mark(function e(t){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eS(t))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,E.push("/request/".concat(t.id,"?status=").concat(t.status));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),ek=(a=(0,c.Z)(d().mark(function e(t){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eE(t))){e.next=2;break}return e.abrupt("return");case 2:Y(t.id),window.location.hash="delete-modal";case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),eA=(i=(0,c.Z)(d().mark(function e(t){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eP(t))){e.next=2;break}return e.abrupt("return");case 2:Y(t.id),window.location.hash="restore-modal";case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eU=(l=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eE){e.next=2;break}return e.abrupt("return");case 2:if(!(null!=ej&&ej.apiServiceAccount)){e.next=7;break}return e.next=5,(0,es.yN)(null==ej?void 0:ej.teamId,W);case 5:e.next=9;break;case 7:return e.next=9,(0,x.Jl)(W);case 9:return e.next=11,ey();case 11:window.location.hash="#";case 12:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)}),eO=(s=(0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eP){e.next=2;break}return e.abrupt("return");case 2:if(!(null!=ej&&ej.apiServiceAccount)){e.next=7;break}return e.next=5,(0,es.NU)(null==ej?void 0:ej.teamId,W);case 5:e.next=9;break;case 7:return e.next=9,(0,x.OS)(W);case 9:return e.next=11,ey();case 11:window.location.hash="#";case 12:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)}),eZ=function(e){Y(e.cells[0].value),eg("details")};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(el,{leftPanel:function(){return(0,Z.jsx)(b.Z,{searchPlaceholder:"Project ID or Name",headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Request Status"},{accessor:"archived",Header:"File Status"},{accessor:"actions",Header:(0,Z.jsx)(ep,{}),disableSortBy:!0}],data:T.map(function(e){return{id:e.id,projectName:e.projectName,status:h()(e.status),archived:e.archived?"Deleted":"Active",environments:e.environments,actions:(0,Z.jsxs)(g.c4,{children:[(0,Z.jsx)(g.Kk,{icon:m.Mdf,role:"button","aria-label":"events",onClick:function(t){t.stopPropagation(),Y(e.id),eg("events")},title:"Events"}),(0,Z.jsx)(g.MO,{}),(0,Z.jsx)(g.Kk,{disabled:!eS(e),icon:m.Xcf,role:"button","aria-label":"edit",onClick:function(){return eC(e)},title:"Edit"}),(0,Z.jsx)(g.MO,{}),(0,Z.jsx)(g.Kk,{icon:m.$aW,role:"button","aria-label":"delete",onClick:function(){return ek(e)},disabled:!eE(e),activeColor:y.Uo,title:"Delete from Keycloak"}),(0,Z.jsx)(g.MO,{}),(0,Z.jsx)(g.Kk,{icon:m.pdr,role:"button","aria-label":"restore",onClick:function(){return eA(e)},disabled:!eP(e),activeColor:y.Uo,title:"Restore at Keycloak"})]})}}),activateRow:eZ,colfilters:[{value:X,multiselect:!0,onChange:$,options:eu,label:"Environments"},{value:en,multiselect:!0,onChange:er,options:eo,label:"IDPs"},{value:ei,multiselect:!0,onChange:ef,options:O,label:"Workflow Status"},{value:eh,multiselect:!0,onChange:em,options:ec,label:"Archive Status"}],showFilters:!0,loading:C,totalColSpan:15,searchColSpan:5,headerAlign:"bottom",headerGutter:[5,0],onPage:G,rowCount:q,searchKey:F,onSearch:function(e){I(e)},onEnter:function(e){I(e)},pageLimits:ed,limit:K,onLimit:function(e){G(1),M(e)},noDataFoundElement:(0,Z.jsx)("div",{style:{textAlign:"center"},children:"No clients found."}),pagination:!0})},rightPanel:function(){return ej&&(0,Z.jsx)(et,{currentUser:S,integration:ej,defaultTabKey:"details",setActiveKey:eg,activeKey:ex,setRows:ew})}}),(0,Z.jsx)(j.Z,{id:"delete-modal","data-testid":"modal-delete-integration",content:"You are about to delete this integration request. This action cannot be undone.",onConfirm:eU,confirmText:"Delete",title:"Confirm Deletion"}),(0,Z.jsx)(j.Z,{id:"restore-modal","data-testid":"modal-restore-integration",content:"You are about to restore this integration.",onConfirm:eO,confirmText:"Restore",title:"Confirm Restoration"})]})}},76944:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r,a=n(50029),i=n(87794),l=n.n(i),s=n(21963),o=(r=(0,a.Z)(l().mark(function e(t){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.e.post("events",t).then(function(e){return e.data});case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)})},25809:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-dashboard",function(){return n(80877)}])}},function(e){e.O(0,[650,908,584,54,774,888,179],function(){return e(e.s=25809)}),_N_E=e.O()}]);