(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{91296:function(e,t,n){var r=0/0,i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),p=Object.prototype.toString,v=Math.max,f=Math.min,h=function(){return d.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==p.call(t))return r;if(b(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=b(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var c=o.test(e);return c||s.test(e)?l(e.slice(2),c?2:8):a.test(e)?r:+e}e.exports=function(e,t,n){var r,i,a,o,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function j(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||d&&r>=a}function g(){var e,n,r,i=h();if(j(i))return y(i);s=setTimeout(g,(e=i-l,n=i-c,r=t-e,d?f(r,a-n):r))}function y(e){return(s=void 0,p&&r)?x(e):(r=i=void 0,o)}function S(){var e,n=h(),a=j(n);if(r=arguments,i=this,l=n,a){if(void 0===s)return c=e=l,s=setTimeout(g,t),u?x(e):o;if(d)return s=setTimeout(g,t),x(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=m(t)||0,b(n)&&(u=!!n.leading,a=(d="maxWait"in n)?v(m(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},S.flush=function(){return void 0===s?o:y(h())},S}},3255:function(e,t,n){"use strict";var r=n(71893),i=n(59349),a=n(25820),o=n(24348),s=n(85893),l=r.ZP.table.withConfig({displayName:"RequestPreview__Table",componentId:"sc-1rqjz6v-0"})(["font-size:unset;& tr{display:flex;margin-bottom:5px;& > td{border:none;padding:0 5px 0 0;}}"]),c=r.ZP.span.withConfig({displayName:"RequestPreview__SemiBold",componentId:"sc-1rqjz6v-1"})(["font-weight:600;"]),u=r.ZP.ul.withConfig({displayName:"RequestPreview__StyledUl",componentId:"sc-1rqjz6v-2"})(["list-style:none;margin:0;& li{margin:0;}"]),d=function(e){var t=e.list,n=e.title,r=e.inline,i=void 0!==r&&r,a=e.testid;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:n}),((null==t?void 0:t.length)===1||i)&&(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":a,children:null==t?void 0:t.map(function(e,n){return(0,s.jsxs)("span",{children:[e,n!==t.length-1&&", "," "]},e)})})})]}),!i&&((null==t?void 0:t.length)||0)>1&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:(0,s.jsx)(c,{children:(0,s.jsx)(u,{children:null==t?void 0:t.map(function(e){return(0,s.jsx)("li",{children:e},e)})})})})})]})};t.Z=function(e){var t,n,r,u,p,v,f,h,b=e.children,m=e.request,x=e.teams;if(!m)return null;var j=null!==(u=m.devIdps)&&void 0!==u?u:[],g="saml"!==m.protocol,y=j.map(function(e){return a.S[e]}),S=(0,o.e$)(m),C="";m.usesTeam&&(C=(null===(h=(void 0===x?[]:x).find(function(e){return String(e.id)===String(m.teamId)}))||void 0===h?void 0:h.name)||m.team&&m.team.name);var w=(t=m.primaryEndUsers,n=m.primaryEndUsersOther,null==t?void 0:t.map(function(e){switch(e){case"livingInBC":return"People living in BC";case"businessInBC":return"People doing business/travel in BC";case"bcGovEmployees":return"BC Gov Employees";case"other":return"Other: ".concat(null!=n?n:"");default:return""}}));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l,{children:(0,s.jsxs)("tbody",{children:[C?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Associated Team:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"associated-team",children:C})})]}):(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Are you accountable for this project?"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"you-accountable",children:void 0===(r=m.projectLead)?"":r?"Yes":"No"})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Client Protocol:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"client-protocol",children:g?"OpenID Connect":"SAML"})})]}),g&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Client Type:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"client-type-team",children:m.publicAccess?"Public":"Confidential"})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Usecase:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"use-case",children:i.F[m.authType||"browser-login"]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Project Name:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"project-name",children:m.projectName})})]}),w&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Primary End Users:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"project-name",children:w.join(", ")})})]}),m.additionalRoleAttribute&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Additional Role Attribute:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{"data-testid":"add-role-attrib",children:m.additionalRoleAttribute})})]}),(0,s.jsx)(d,{list:y,title:"Identity Providers Required:",inline:!0,testid:"idp-required"}),S&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Privacy Zone:"}),(0,s.jsx)("td",{children:(0,s.jsx)(c,{children:m.bcscPrivacyZone})})]}),(null===(p=m.environments)||void 0===p?void 0:p.includes("dev"))&&(0,s.jsx)(d,{list:m.devValidRedirectUris,title:"Dev Redirect URIs:",testid:"dev-uri"}),(null===(v=m.environments)||void 0===v?void 0:v.includes("test"))&&(0,s.jsx)(d,{list:m.testValidRedirectUris,title:"Test Redirect URIs:",testid:"test-uri"}),(null===(f=m.environments)||void 0===f?void 0:f.includes("prod"))&&(0,s.jsx)(d,{list:m.prodValidRedirectUris,title:"Prod Redirect URIs:",testid:"prod-uri"}),b]})})})}},32960:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eg}});var r=n(27812),i=n(16835),a=n(50029),o=n(64687),s=n.n(o),l=n(67294),c=n(11163),u=n(20070),d=n.n(u),p=n(59417),v=n(84403),f=n(3528),h=n(39247),b=n(48349),m=n(52008),x=n(96052),j=n(71893),g=n(85330),y=n(24348),S=n(3255),C=n(23157),w=[{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"planned",label:"Planned"},{value:"planFailed",label:"Plan Failed"},{value:"applied",label:"Applied"},{value:"applyFailed",label:"Apply Failed"}],A=n(85893),E=function(e){var t,n=e.request,r=e.onUpdate,i=(0,l.useState)(!1),o=i[0],c=i[1],u=(0,l.useState)(n.status),d=u[0],v=u[1],h=(t=(0,a.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.Uw)({id:n.id,status:d});case 2:if(!r){e.next=5;break}return e.next=5,r();case 5:window.location.hash="#";case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,l.useEffect)(function(){v(n.status)},[n.id]);var m=(0,A.jsxs)("div",{"data-testid":"integration-status",children:[(0,A.jsx)("p",{style:{fontWeight:"bold"},children:"Integration Status"}),(0,A.jsx)(C.ZP,{className:"react-select-container",classNamePrefix:"select",options:w.filter(function(e){return["draft","submitted"].includes(e.value)}),onChange:function(e){return v(e.value)},isSearchable:!0})]});return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("button",{className:"primary",onClick:function(){c(!0)},"data-testid":"edit-metadata-button",children:"Edit Metadata"}),(0,A.jsx)(b.Z,{id:"edit-metadata",openModal:o,handleClose:function(){return c(!1)},content:m,onConfirm:h,icon:p.UJf,title:"Edit Metadata",closable:!0})]})},P=j.ZP.div.withConfig({displayName:"AdminRequestPanel__EventContent",componentId:"sc-g1wu9d-0"})(["max-height:calc(100vh - 250px);overflow:auto;"]);function O(e){var t=e.currentUser,n=e.request,r=e.onUpdate;return n?(0,A.jsxs)(P,{children:[(0,A.jsx)("br",{}),(0,A.jsx)(S.Z,{request:n}),t.isAdmin&&(0,A.jsx)(E,{request:n,onUpdate:r})]}):null}var Z=n(59499),k=n(42894),I=n(7932),R=n(56186),U=n(34393);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,Z.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=j.ZP.div.withConfig({displayName:"AdminEventPanel__AlignCenter",componentId:"sc-1xolfg9-0"})(["text-align:center;"]),q=[{value:"all",label:"All Events"},{value:"request-pr-success",label:"REQUEST_PR_SUCCESS"},{value:"request-pr-failure",label:"REQUEST_PR_FAILURE"},{value:"request-plan-success",label:"REQUEST_PLAN_SUCCESS"},{value:"request-plan-failure",label:"REQUEST_PLAN_FAILURE"},{value:"request-apply-success",label:"REQUEST_APPLY_SUCCESS"},{value:"request-apply-failure",label:"REQUEST_APPLY_FAILURE"},{value:"request-create-success",label:"REQUEST_CREATE_SUCCESS"},{value:"request-create-failure",label:"REQUEST_CREATE_FAILURE"},{value:"request-update-success",label:"REQUEST_UPDATE_SUCCESS"},{value:"request-update-failure",label:"REQUEST_UPDATE_FAILURE"},{value:"request-delete-success",label:"REQUEST_DELETE_SUCCESS"},{value:"request-delete-failure",label:"REQUEST_DELETE_FAILURE"},{value:"email-submission-failure",label:"EMAIL_SUBMISSION_FAILURE"}];function D(e){var t,n=e.requestId,r=(0,l.useState)("all"),o=r[0],c=r[1],u=(0,l.useState)([]),d=u[0],p=u[1],v=(0,l.useState)(!1),f=v[0],h=v[1],b=(0,l.useState)(!1),m=b[0],x=b[1],j=(t=(0,a.Z)(s().mark(function e(){var t,r,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return h(!0),e.next=5,(0,R.v)({requestId:n,eventCode:o});case 5:t=e.sent,a=(r=(0,i.Z)(t,2))[0],r[1]?x(!0):a&&p(a.rows),h(!1);case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,l.useEffect)(function(){j()},[n,o]);var g=function(e){c(e)};return m?null:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(I.Z,{"data-testid":"events-dropdown",children:[(0,A.jsx)("br",{}),(0,A.jsx)(C.ZP,{options:q,onChange:function(e){return g(e.value)},maxMenuHeight:300,styles:{control:function(e){return T(T({},e),{},{width:"250px"})},menu:function(e){return T(T({},e),{},{width:"250px"})}}})]}),f?(0,A.jsx)(N,{children:(0,A.jsx)(k.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:f})}):(0,A.jsx)(U.Z,{events:d})]})}var F=n(21885),L=n(9206);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){(0,Z.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=j.ZP.div.withConfig({displayName:"TabContent__TabWrapper",componentId:"sc-bpu543-0"})(["padding-left:1rem;padding-right:1rem;"]),H={bceid:"bceidApproved",github:"githubApproved",BCServicesCard:"bcServicesCardApproved",social:"socialApproved"},Q=function(e){var t,n,r,o=e.integration,c=e.type,u=e.canApproveProd,v=e.notApplied,h=e.onApproved,m=(0,l.useState)(!1),j=m[0],g=m[1],y=(0,l.useState)([]),S=y[0],C=y[1],w=(t=(0,a.Z)(s().mark(function e(){var t,n,r,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,R.v)({requestId:Number(o.id),eventCode:"all"});case 4:n=e.sent,(r=(0,i.Z)(n,1)[0])&&(null==r||null===(t=r.rows)||void 0===t?void 0:t.length)>0&&(a=[],r.rows.forEach(function(e){var t;null!=e&&null!==(t=e.details)&&void 0!==t&&null!==(t=t.changes)&&void 0!==t&&t.find(function(e){return(null==e?void 0:e.path.includes(H[c]))&&!0===e.rhs})&&a.push(e)}),a.length>0&&C(a));case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});if((0,l.useEffect)(function(){w()},[null==o?void 0:o.id,null==o?void 0:o.bceidApproved,null==o?void 0:o.githubApproved,null==o?void 0:o.bcServicesCardApproved]),!o)return null;var E=d()(c),P=H[c],O=!1;switch(c){case"bceid":O=(0,x.he)(o);break;case"github":O=(0,x.R5)(o);break;case"BCServicesCard":O=(0,x.kF)(o);break;case"social":O=(0,x.HW)(o)}r=null!=o&&o.archived?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("p",{children:"Cannot approve deleted/archived integrations."})}):u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("p",{children:"To begin the ".concat(E," integration in production, Click Below.")}),(0,A.jsx)("button",{className:"primary",onClick:function(){g(!0)},disabled:v,children:"Approve Prod"})]}):v&&O?(0,A.jsx)("div",{style:{display:"inline-flex",background:"#FFCCCB",borderRadius:"5px"},children:(0,A.jsx)("div",{style:{padding:5},children:(0,A.jsxs)(F.B,{children:["Your request for ",c," approval could not be completed. Please"," ",(0,A.jsx)(L.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})}):(0,A.jsx)(A.Fragment,{children:S.length>0?S.map(function(e){return(0,A.jsxs)("p",{style:{marginBottom:"5px"},"data-testid":"idp-approved-note",children:["Approved by ",(0,A.jsx)("b",{children:null==e?void 0:e.idirUserDisplayName})," on"," ",(0,A.jsx)("b",{children:new Date(null==e?void 0:e.createdAt).toLocaleString()})]},e.id)}):(0,A.jsx)("p",{children:"This integration has already been approved."})});var k=(n=(0,a.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.WN)(M(M({},o),{},(0,Z.Z)({},P,!0)),!0);case 2:t=e.sent,n=(0,i.Z)(t,2)[1],h&&!n&&h();case 6:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(B,{children:[(0,A.jsx)("br",{}),r]}),(0,A.jsx)(b.Z,{id:"".concat(c,"-approval-modal"),openModal:j,handleClose:function(){return g(!1)},content:"Are you sure you want to approve this integration for ".concat(E," production?"),onConfirm:k,icon:p.eHv,title:"".concat(E," Approve")})]})},z=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.bceidApproved;return(0,A.jsx)(Q,{type:"bceid",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},W=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.githubApproved;return(0,A.jsx)(Q,{type:"github",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},G=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.bcServicesCardApproved;return(0,A.jsx)(Q,{type:"BCServicesCard",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},V=function(e){var t=e.integration,n=e.onApproved;if(!t)return null;var r=t.status,i=t.socialApproved;return(0,A.jsx)(Q,{type:"social",integration:t,canApproveProd:!i,notApplied:"applied"!==r,onApproved:n})},$=n(83585),Y=j.ZP.div.withConfig({displayName:"AdminTabs__TabWrapper",componentId:"sc-1j8rp5j-0"})(["padding-left:1rem;padding-right:1rem;margin-top:1rem;"]),X=function(e){var t=e.currentUser,n=e.integration,r=e.defaultTabKey,i=e.setActiveKey,a=e.setRows,o=e.activeKey,s=(0,l.useState)("dev"),c=s[0],u=s[1],p=!(null!=n&&n.archived)&&!(null!=n&&n.apiServiceAccount)&&(null==t?void 0:t.isAdmin),v=null==t?void 0:t.isAdmin;if(!n)return null;var f=n.environments,h=void 0===f?[]:f,b=h.includes("prod"),m=(0,y.Jx)(n)&&b&&((null==t?void 0:t.isAdmin)||(0,x.cN)(t)),j=(0,y.dV)(n)&&b&&((null==t?void 0:t.isAdmin)||(0,x.LS)(t)),S=(0,y.e$)(n)&&b&&((null==t?void 0:t.isAdmin)||(0,x.T0)(t)),C=(0,y.dw)(n)&&b&&((null==t?void 0:t.isAdmin)||(0,x.XI)(t));return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.mQ,{activeKey:void 0===o?r:o,onChange:function(e){return i(e)},tabBarGutter:30,children:[(0,A.jsx)(g.OK,{tab:"Details",children:(0,A.jsx)(Y,{children:(0,A.jsx)(O,{currentUser:t,request:n,onUpdate:a})})},"details"),m&&(0,A.jsx)(g.OK,{tab:"BCeID Prod",children:(0,A.jsx)(z,{integration:n,onApproved:function(){return a()}})},"bceid-prod"),j&&(0,A.jsx)(g.OK,{tab:"GitHub Prod",children:(0,A.jsx)(W,{integration:n,onApproved:function(){return a()}})},"github-prod"),S&&(0,A.jsx)(g.OK,{tab:"BC Services Card Prod",children:(0,A.jsx)(G,{integration:n,onApproved:function(){return a()}})},"bcsc-prod"),C&&(0,A.jsx)(g.OK,{tab:"Social Prod",children:(0,A.jsx)(V,{integration:n,onApproved:function(){return a()}})},"social-prod"),v&&(0,A.jsx)(g.OK,{tab:"Events",children:(0,A.jsx)(Y,{children:(0,A.jsx)(D,{requestId:n.id})})},"events"),p&&(0,A.jsx)(g.OK,{tab:"Roles",children:(0,A.jsx)(Y,{children:(0,A.jsx)(g.mQ,{onChange:u,activeKey:c,tabBarGutter:30,destroyInactiveTabPane:!0,children:h.map(function(e){return(0,A.jsxs)(g.OK,{tab:d()(e),children:[(0,A.jsx)("br",{}),(0,A.jsx)($.Z,{environment:e,integration:n,viewOnly:!0})]},e)})})})},"roles")]})})},J=n(46312),ee=n(82587),et=n(89666),en=j.ZP.div.withConfig({displayName:"VerticalLayout__InnerResizable",componentId:"sc-l6vjzd-0"})(["height:100%;overflow:auto;"]),er=function(e){var t=e.leftPanel,n=e.rightPanel,r=e.showResizable;return e.children,(0,A.jsxs)(ee.Z,{rules:et.F,children:[void 0===r||r?(0,A.jsx)(J.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.45*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,A.jsx)(en,{children:t&&t()})}):t&&t(),(0,A.jsx)("br",{}),n&&n()]})},ei=n(40291),ea=n(35685),eo=n(70928),es=n(4680),el=n(86022),ec=n(94934),eu=n(34798),ed=n.n(eu),ep=n(34155),ev=[{value:"idir",label:"IDIR"},{value:"bceid",label:"BCeID"},{value:"github",label:"GitHub"},{value:"digitalcredential",label:"Digital Credential"},{value:"bcservicescard",label:"BC Services Card"},{value:"social",label:"Social"}],ef=[{value:"active",label:"Active"},{value:"archived",label:"Deleted"}],eh=[{value:"dev",label:"Dev"},{value:"test",label:"Test"},{value:"prod",label:"Prod"}],eb=[5,10,15,30,50,100];function em(){return(0,A.jsx)("span",{style:{marginLeft:"40%"},children:"Actions"})}var ex=j.ZP.div.withConfig({displayName:"admin-dashboard__RequestRestorationContainer",componentId:"sc-1n3t9e5-0"})([".restoration-email-select{*{visibility:inherit;}}label{margin-bottom:0.5em;}.error-text{margin-top:0.5em;color:red;}"]),ej=function(e){var t,n,r=e.selectedIntegration,o=e.loadData,c=e.alert,u=e.showModal,d=e.handleCloseModal,p=(0,l.useState)(!1),v=p[0],h=p[1],m=(0,l.useState)(!1),x=m[0],j=m[1],g=(0,l.useState)(""),y=g[0],S=g[1],C=(0,l.useState)(""),w=C[0],E=C[1],P=(t=(0,a.Z)(s().mark(function e(){var t,n,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,(0,ei.Um)(String(r.teamId));case 3:t=e.sent,a=(n=(0,i.Z)(t,2))[0],n[1],h(!!a),j(!1);case 9:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,l.useEffect)(function(){E(""),S(""),null!=r&&r.usesTeam&&P()},[null==r?void 0:r.id]),(0,l.useEffect)(function(){E("")},[y]);var O=(n=(0,a.Z)(s().mark(function e(){var t,n,a,l,u,d;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(null!=r&&r.usesTeam&&v),n=!1,!(t&&!y)){e.next=5;break}return E("Please select an email address to restore the integration to."),e.abrupt("return");case 5:if(!(null!=r&&r.apiServiceAccount)){e.next=15;break}return e.next=8,(0,ei.NU)(Number(null==r?void 0:r.teamId),null==r?void 0:r.id);case 8:a=e.sent,(l=(0,i.Z)(a,2))[0],n=!!l[1],e.next=22;break;case 15:return e.next=17,(0,f.OS)(null==r?void 0:r.id,y);case 17:u=e.sent,(d=(0,i.Z)(u,2))[0],n=!!d[1];case 22:return n&&c.show({variant:"danger",content:"Failed to restore integration, please try again."}),e.next=25,o();case 25:Z();case 26:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),Z=function(){S(""),E("")};if(!r)return null;var k="";return k=x?"Checking if the team exists...":r.usesTeam&&v?"You are about to restore this integration.":r.apiServiceAccount&&!v?"Cannot restore this team account, team does not exist.":(0,A.jsxs)(ex,{children:[(0,A.jsx)("label",{htmlFor:"restoration-email-select",children:"Please validate the requestor who is asking to restore (get one more government employee confirming their role). Please enter new requestor email address. Note this requestor can then assign to a new team as needed."}),(0,A.jsx)(ea.Z,{loadOptions:el.c,value:{value:y,label:y},onChange:function(e){return S((null==e?void 0:e.label)||"")},noOptionsMessage:function(){return"Start typing email..."},maxMenuHeight:120,placeholder:"Enter email address",id:"restoration-email-select",className:"restoration-email-select"}),w&&(0,A.jsx)("p",{className:"error-text",children:"Select an email address"})]}),(0,A.jsx)(b.Z,{id:"restore-modal","data-testid":"modal-restore-integration",content:k,onConfirm:O,confirmText:"Restore",title:"Confirm Restoration",showConfirm:!(r.apiServiceAccount&&!v),openModal:u,handleClose:d})},eg=(0,es.hU)(function(e){var t,n,o,u,b,j,g,y,S=e.session,C=e.alert,E=(0,c.useRouter)(),P=(0,l.useState)(!1),O=P[0],Z=P[1],k=(0,l.useState)(!1),I=k[0],R=k[1],U=(0,l.useState)([]),_=U[0],T=U[1],N=(0,l.useState)(String((null===(g=E.query)||void 0===g?void 0:g.id)||"")),q=N[0],D=N[1],F=(0,l.useState)(0),L=F[0],K=F[1],M=(0,l.useState)(5),B=M[0],H=M[1],Q=(0,l.useState)(1),z=Q[0],W=Q[1],G=(0,l.useState)(Number(null===(y=E.query)||void 0===y?void 0:y.id)||void 0),V=G[0],$=G[1],Y=(0,l.useState)([]),J=Y[0],ee=Y[1],et=(0,l.useState)([]),en=et[0],ea=et[1],es=(0,l.useState)([]),el=es[0],eu=es[1],ex=(0,l.useState)([{value:"active",label:"Active"}]),eg=ex[0],ey=ex[1],eS=(0,l.useState)("details"),eC=eS[0],ew=eS[1],eA=(0,l.useState)(!1),eE=eA[0],eP=eA[1],eO=(0,l.useState)(!1),eZ=eO[0],ek=eO[1],eI=_.find(function(e){return e.id===V}),eR=(0,l.useState)([{value:J,multiselect:!0,onChange:ee,options:eh,label:"Environments",key:"environments"},{value:el,multiselect:!0,onChange:eu,options:w,label:"Workflow Status",key:"workflowStatus"},{value:eg,multiselect:!0,onChange:ey,options:ef,defaultValue:eg,label:"Archive Status",key:"archiveStatus"}]),eU=eR[0],e_=eR[1],eT=(t=(0,a.Z)(s().mark(function e(){var t,n,r,a,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,x.UT)(en,J),r=(n=(0,i.Z)(t,3))[0],a=n[1],o=n[2],e.abrupt("return",(0,f.zD)({searchField:["id","projectName","clientId"],searchKey:q,order:[["updatedAt","desc"],["status","desc"]],limit:B,page:z,status:el.map(function(e){return e.value}),archiveStatus:eg.map(function(e){return e.value}),realms:a,environments:o,types:["gold"],devIdps:r}));case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),eN=(n=(0,a.Z)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,eT();case 3:t=e.sent,r=(n=(0,i.Z)(t,2))[0],n[1]?R(!0):r&&(T(r.rows),K(r.count)),Z(!1);case 9:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});if((0,l.useEffect)(function(){null!=S&&S.isAdmin||(0,x.HK)(S)?(null!=S&&S.isAdmin&&!eU.find(function(e){return"IDPs"===e.label})&&e_([].concat((0,r.Z)(eU),[{value:en,multiselect:!0,onChange:ea,options:ev,label:"IDPs",key:"idps"}])),$(void 0),eN()):E.push("/my-dashboard")},[q,B,z,el,eg,en,J]),I)return(0,A.jsx)(eo.q1,{});var eq=function(e){return!e.archived&&["applied"].includes((null==e?void 0:e.status)||"")&&!e.apiServiceAccount},eD=function(e){return!0!==e.archived&&!["pr","planned","submitted"].includes((null==e?void 0:e.status)||"")},eF=function(e){return!1!==e.archived&&!!["applied"].includes((null==e?void 0:e.status)||"")},eL=(o=(0,a.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eq(t))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,E.push("/request/".concat(t.id,"?status=").concat(t.status));case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),eK=(u=(0,a.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eD(t))){e.next=2;break}return e.abrupt("return");case 2:$(t.id),ek(!0);case 4:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),eM=(b=(0,a.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.id||!eF(t))){e.next=2;break}return e.abrupt("return");case 2:$(t.id),eP(!1),ep.nextTick(function(){eP(!0)});case 5:case"end":return e.stop()}},e)})),function(e){return b.apply(this,arguments)}),eB=(j=(0,a.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eD){e.next=2;break}return e.abrupt("return");case 2:if(!(null!=eI&&eI.apiServiceAccount)){e.next=8;break}return e.next=5,(0,ei.yN)(null==eI?void 0:eI.teamId,V);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,f.Jl)(V);case 10:e.t0=e.sent;case 11:return t=e.t0,(n=(0,i.Z)(t,2))[0],n[1]&&C.show({variant:"danger",content:"Failed to delete the integration, please try again."}),e.next=18,eN();case 18:case"end":return e.stop()}},e)})),function(){return j.apply(this,arguments)}),eH=function(e){$(e.cells[0].value),ew("details")};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(er,{leftPanel:function(){return(0,A.jsx)(v.Z,{searchPlaceholder:"Project ID, Project Name or Client ID",headers:[{accessor:"id",Header:"Request ID"},{accessor:"clientId",Header:"Client ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Request Status"},{accessor:"archived",Header:"File Status"},{accessor:"actions",Header:(0,A.jsx)(em,{}),disableSortBy:!0}],data:_.map(function(e){return{id:e.id,projectName:e.projectName,status:d()(e.status),archived:e.archived?"Deleted":"Active",environments:e.environments,clientId:e.clientId,actions:null!=S&&S.isAdmin?(0,A.jsxs)(h.c4,{children:[(0,A.jsx)(h.Kk,{icon:p.Mdf,role:"button","aria-label":"events",onClick:function(t){t.stopPropagation(),$(e.id),ew("events")},title:"Events"}),(0,A.jsx)(h.MO,{}),(0,A.jsx)(h.Kk,{disabled:!eq(e),icon:p.Xcf,role:"button","aria-label":"edit",onClick:function(){return eL(e)},title:"Edit"}),(0,A.jsx)(h.MO,{}),(0,A.jsx)(h.Kk,{icon:p.$aW,role:"button","aria-label":"delete",onClick:function(){return eK(e)},disabled:!eD(e),activeColor:m.Uo,title:"Delete from Keycloak"}),(0,A.jsx)(h.MO,{}),(0,A.jsx)(h.Kk,{icon:p.pdr,role:"button","aria-label":"restore",onClick:function(){return eM(e)},disabled:!eF(e),activeColor:m.Uo,title:"Restore at Keycloak"})]}):ed()}}),activateRow:eH,colfilters:eU,showFilters:!0,loading:O,totalColSpan:15,searchColSpan:5,headerAlign:"bottom",headerGutter:[5,0],onPage:W,rowCount:L,searchKey:q,onSearch:function(e){D(e)},onEnter:function(e){D(e)},pageLimits:eb,limit:B,onLimit:function(e){W(1),H(e)},noDataFoundElement:(0,A.jsx)("div",{style:{textAlign:"center"},children:"No clients found."}),pagination:!0})},rightPanel:function(){return eI&&(0,A.jsx)(X,{currentUser:S,integration:eI,defaultTabKey:"details",setActiveKey:ew,activeKey:eC,setRows:eN})}}),(0,A.jsx)(ec.Z,{id:"delete-modal",projectName:null==eI?void 0:eI.projectName,onConfirm:eB,title:"Confirm Deletion",content:"You are about to delete this integration request. This action cannot be undone.",openModal:eZ,handleCloseModal:function(){return ek(!1)}}),(0,A.jsx)(ej,{selectedIntegration:eI,loadData:eN,alert:C,showModal:eE,handleCloseModal:function(){return eP(!1)}})]})})},25809:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-dashboard",function(){return n(32960)}])},35685:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(2717),i=n(67294),a=n(28648),o=n(65342),s=n(28549),l=n(33417),c=n(70292),u=n(30138),d=n(17609),p=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];n(73935),n(73469);var v=(0,i.forwardRef)(function(e,t){var n,v,f,h,b,m,x,j,g,y,S,C,w,A,E,P,O,Z,k,I,R,U,_,T,N,q,D,F,L,K,M,B,H,Q,z,W,G,V,$,Y,X,J,ee,et,en,er,ei,ea,eo,es,el,ec=(v=void 0!==(n=e.defaultOptions)&&n,h=void 0!==(f=e.cacheOptions)&&f,b=e.loadOptions,e.options,m=e.isLoading,x=e.onInputChange,j=e.filterOption,y=(g=(0,u.Z)(e,p)).inputValue,S=(0,i.useRef)(void 0),C=(0,i.useRef)(!1),w=(0,i.useState)(Array.isArray(v)?v:void 0),E=(A=(0,c.Z)(w,2))[0],P=A[1],O=(0,i.useState)(void 0!==y?y:""),k=(Z=(0,c.Z)(O,2))[0],I=Z[1],R=(0,i.useState)(!0===v),_=(U=(0,c.Z)(R,2))[0],T=U[1],N=(0,i.useState)(void 0),D=(q=(0,c.Z)(N,2))[0],F=q[1],L=(0,i.useState)([]),M=(K=(0,c.Z)(L,2))[0],B=K[1],H=(0,i.useState)(!1),z=(Q=(0,c.Z)(H,2))[0],W=Q[1],G=(0,i.useState)({}),$=(V=(0,c.Z)(G,2))[0],Y=V[1],X=(0,i.useState)(void 0),ee=(J=(0,c.Z)(X,2))[0],et=J[1],en=(0,i.useState)(void 0),ei=(er=(0,c.Z)(en,2))[0],ea=er[1],h!==ei&&(Y({}),ea(h)),v!==ee&&(P(Array.isArray(v)?v:void 0),et(v)),(0,i.useEffect)(function(){return C.current=!0,function(){C.current=!1}},[]),eo=(0,i.useCallback)(function(e,t){if(!b)return t();var n=b(e,t);n&&"function"==typeof n.then&&n.then(t,function(){return t()})},[b]),(0,i.useEffect)(function(){!0===v&&eo(k,function(e){C.current&&(P(e||[]),T(!!S.current))})},[]),es=(0,i.useCallback)(function(e,t){var n=(0,d.L)(e,t,x);if(!n){S.current=void 0,I(""),F(""),B([]),T(!1),W(!1);return}if(h&&$[n])I(n),F(n),B($[n]),T(!1),W(!1);else{var r=S.current={};I(n),T(!0),W(!D),eo(n,function(e){C&&r===S.current&&(S.current=void 0,T(!1),F(n),B(e||[]),W(!1),Y(e?(0,l.Z)((0,l.Z)({},$),{},(0,s.Z)({},n,e)):$))})}},[h,eo,D,$,x]),el=z?[]:k&&D?M:E||[],(0,l.Z)((0,l.Z)({},g),{},{options:el,isLoading:_||void 0!==m&&m,onInputChange:es,filterOption:void 0===j?null:j})),eu=(0,o.u)(ec);return i.createElement(a.S,(0,r.Z)({ref:t},eu))})}},function(e){e.O(0,[662,302,130,930,479,528,601,680,734,888,774,179],function(){return e(e.s=25809)}),_N_E=e.O()}]);