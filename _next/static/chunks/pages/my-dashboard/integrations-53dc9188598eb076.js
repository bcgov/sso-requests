(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{29201:function(e,n,t){"use strict";t(67294);var r=t(11163),a=t(46312),i=t(71893),o=t(85330),s=t(82587),c=t(89666),l=t(85893),u=i.ZP.div.withConfig({displayName:"VerticalLayout__InnerResizable",componentId:"sc-4gcsr8-0"})(["height:100%;overflow:auto;"]);n.Z=function(e){var n=e.tab,t=e.leftPanel,i=e.rightPanel,d=e.showResizable;e.children;var h=(0,r.useRouter)(),p=(0,l.jsxs)(o.mQ,{onChange:function(e){h.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,l.jsx)(o.OK,{tab:"My Projects"},"integrations"),(0,l.jsx)(o.OK,{tab:"My Teams"},"teams")]});return(0,l.jsxs)(s.Z,{rules:c.F,children:[p,void 0===d||d?(0,l.jsx)(a.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,l.jsx)(u,{children:t&&t()})}):t&&t(),(0,l.jsx)("br",{}),i&&i()]})}},1214:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return tu}});var r,a,i,o,s=t(50029),c=t(64687),l=t.n(c),u=t(67294),d=t(71893),h=t(59499),p=t(16530),f=t(69829),m=t(85893);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){(0,h.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var v=(0,p.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),b=function(e){switch(e){case"success":return f.CheckCircle;case"info":return f.InfoCircle;case"warning":return f.ExclamationTriangle;default:return f.ExclamationCircle}};function j(e){return(0,m.jsxs)(v,g(g({},e),{},{children:[(0,m.jsx)(v.Group,{style:{marginTop:"1px"},children:(0,m.jsx)(f.FaSVG,{children:(0,m.jsx)("path",{fill:"currentColor",d:b(e.variant)})})}),(0,m.jsx)(v.Content,{children:e.content?e.content:e.children}),e.closable&&(0,m.jsx)(v.Group,{align:"right",children:(0,m.jsx)(v.Close,{children:"x"})})]}))}var y=t(16835),w=t(99603),C=t(59417),S=t(64735),P=t(42894),I=t(49453),k=t(90559),Z=t(96052),N=t(52008),O=t(4680),_=t(21885),D=t(25820),R=t(74150),T=t(20827),F=d.ZP.div.withConfig({displayName:"InstallationPanel__AlignCenter",componentId:"sc-1cix6b8-0"})(["text-align:center;"]),E=d.ZP.div.withConfig({displayName:"InstallationPanel__EnvTitle",componentId:"sc-1cix6b8-1"})(["color:#000;font-size:",";font-weight:bold;"],N.n5),M=d.ZP.span.withConfig({displayName:"InstallationPanel__StatusLabel",componentId:"sc-1cix6b8-2"})(["color:#3e3e3e;font-size:14px;font-weight:700;"]),A=d.ZP.div.withConfig({displayName:"InstallationPanel__TopMargin",componentId:"sc-1cix6b8-3"})(["height:var(--field-top-spacing);"]),L=d.ZP.div.withConfig({displayName:"InstallationPanel__TopTitle",componentId:"sc-1cix6b8-4"})(["font-size:18px;font-weight:bold;color:#000;border-bottom:1px solid gray;"]),q=(0,O.hU)(function(e){var n,t,r,a=e.integration,i=e.alert,o=(0,u.useState)(!1),c=o[0],d=o[1],h=(n=(0,s.Z)(l().mark(function e(n){var t,r,o,s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,I.OV)(a.id,n);case 3:if(t=e.sent,o=(r=(0,y.Z)(t,2))[0],s=r[1],d(!1),!s){e.next=11;break}return i.show({variant:"danger",content:"Failed to download installation"}),e.abrupt("return",null);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),p=(t=(0,s.Z)(l().mark(function e(n){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:(t=e.sent)&&(0,k.TE)((0,k.ON)(t));case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),f=(r=(0,s.Z)(l().mark(function e(n){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n);case 2:(t=e.sent)&&(0,k.Di)((0,k.ON)(t),"".concat(a.projectName,"-installation-").concat(n,".json"));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return c?(0,m.jsxs)(F,{children:[(0,m.jsx)(A,{}),(0,m.jsx)(P.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(A,{}),(0,m.jsx)(L,{children:"Installation JSONs"}),(0,m.jsx)("br",{}),(0,m.jsx)(S.ZP,{cols:3,children:(0,Z.Dy)(a).map(function(e){if("service-account"!==a.authType&&0===e.idps.length)return null;var n=e.idps.length>0?"(".concat(e.idps.map(function(e){return D.S[e]}).join(", "),")"):"";return(0,m.jsxs)(u.Fragment,{children:[(0,m.jsx)(S.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,m.jsx)(S.ZP.Col,{span:1,style:{width:"100%"},children:(0,m.jsxs)(E,{children:[e.display," ",n]})})}),(0,m.jsx)(S.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,m.jsxs)(S.ZP.Col,{span:3,children:[(0,m.jsx)("button",{className:"primary",onClick:function(){return p(e.name)},children:"Copy"}),"\xa0",(0,m.jsx)("button",{className:"primary",onClick:function(){return f(e.name)},children:"Download"}),"\xa0\xa0",(0,m.jsx)(w.G,{color:"green",icon:C.f8k,title:"Ready"}),"\xa0",(0,m.jsx)(M,{children:"Ready"})]})}),(0,m.jsx)("br",{})]},e.name)})}),(0,m.jsxs)(_.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client,"," ",(0,m.jsx)(R.default,{href:"".concat(T.UN,"/integrating-your-application/installation-json"),external:!0,children:"click to learn more on our wiki page"}),"."]})]})}),G=t(48349),B=d.ZP.div.withConfig({displayName:"SecretsPanel__TopMargin",componentId:"sc-1aqtot9-0"})(["height:var(--field-top-spacing);"]),U=d.ZP.span.withConfig({displayName:"SecretsPanel__LeftTitle",componentId:"sc-1aqtot9-1"})(["color:#000;font-size:1.1rem;font-weight:bold;"]);(0,d.ZP)(w.G).withConfig({displayName:"SecretsPanel__PaddedIcon",componentId:"sc-1aqtot9-2"})(["margin-right:20px;"]);var K=d.ZP.div.withConfig({displayName:"SecretsPanel__StyledP",componentId:"sc-1aqtot9-3"})(["margin-bottom:5px;display:flex;align-items:center;"]);d.ZP.hr.withConfig({displayName:"SecretsPanel__StyledHr",componentId:"sc-1aqtot9-4"})(["background-color:black;"]);var z=(0,O.hU)(function(e){var n,t=e.selectedRequest,r=e.alert,a=(0,u.useState)(null),i=a[0],o=a[1],c=(0,Z.Dy)(t),d=(0,u.useState)(!1),h=d[0],p=d[1],f=function(e){o(e),p(!0)},x=(n=(0,s.Z)(l().mark(function e(){var n,a,o,s,c,u;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.hU)(t.id,(null==i?void 0:i.name)||null);case 2:n=e.sent,o=(a=(0,y.Z)(n,2))[0],c=(s=a[1])?"danger":"success",u=s?"Failed to regenerate secret":"Client Secret Successfully Updated",r.show({variant:c,fadeOut:1e4,closable:!0,content:u}),window.location.hash="#",console.error(o,s);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),g=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(K,{children:[(0,m.jsxs)("strong",{children:["You are about to change your client secret for your ",null==i?void 0:i.display," environment."]})," "]}),(0,m.jsx)("br",{}),(0,m.jsx)("p",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,m.jsx)("p",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(B,{}),c.map(function(e){return(0,m.jsxs)(u.Fragment,{children:[(0,m.jsxs)(U,{children:[e.display,": "]}),!t.publicAccess&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)("button",{className:"primary",type:"button",onClick:function(){return f(e)},children:"Change your client secret"})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{})]},e.name)})]}),(0,m.jsx)(G.Z,{id:"confirm-new-secret",content:g,onConfirm:x,icon:C.eHv,buttonStyle:"primary",title:"You are about to change your client secret",openModal:h,handleClose:function(){return p(!1)},closable:!0})]})}),H=t(20070),V=t.n(H),W=t(43782),Y=t(85330),$=t(23157),J=t(11915),Q=t(43590),X=t.n(Q);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function en(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach(function(n){(0,h.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var et=d.ZP.table.withConfig({displayName:"CreateRoleContent__Table",componentId:"sc-1c8xhha-0"})([".env{width:300px;}"]),er=d.ZP.span.withConfig({displayName:"CreateRoleContent__AddNewButton",componentId:"sc-1c8xhha-1"})(["margin:10px 0;cursor:pointer;& span{margin-left:5px;}"]),ea=d.ZP.div.withConfig({displayName:"CreateRoleContent__FlexBox",componentId:"sc-1c8xhha-2"})(["display:flex;& > *{padding-right:0.5rem;}"]),ei=d.ZP.div.withConfig({displayName:"CreateRoleContent__FlexItem",componentId:"sc-1c8xhha-3"})(["padding-top:10px;padding-bottom:10px;"]),eo=d.ZP.div.withConfig({displayName:"CreateRoleContent__ErrorMessage",componentId:"sc-1c8xhha-4"})(["color:#ff0000;"]),es={name:"",envs:["dev"]},ec=(0,u.forwardRef)(function(e,n){var t,r=e.integrationId,a=e.environments,i=void 0===a?["dev"]:a,o=(0,u.useState)(!1),c=o[0],d=o[1],h=(0,u.useState)({}),p=h[0],f=h[1],x=(0,u.useState)({}),g=x[0],v=x[1],b=(0,u.useState)([es]),j=b[0],S=b[1];(0,u.useImperativeHandle)(n,function(){var e;return{submit:(e=(0,s.Z)(l().mark(function e(){var n,t,a,i,o,s,u,h;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=j,c&&(n=[],X()(p,function(e,t){n.push({name:t,envs:e})})),e.next=4,(0,I.tK)({integrationId:r,roles:n});case 4:if(t=e.sent,i=(a=(0,y.Z)(t,2))[0],!a[1]){e.next=10;break}return e.abrupt("return",[!0,!1]);case 10:return o={},s={},u=!1,h=!1,X()(i,function(e){e.failure.length>0&&X()(e.failure,function(n){o[n]||(o[n]=[]),o[n].push(e.env),u=!0}),e.duplicate.length>0&&X()(e.duplicate,function(n){s[n]||(s[n]=[]),s[n].push(e.env),h=!0})}),f(o),v(s),d(!0),e.abrupt("return",[u,h]);case 19:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),reset:function(){S([es]),f({}),v({}),d(!1)}}});var P=function(e){S(j.filter(function(n,t){return t!==e}))},k=function(e,n){S(j.map(function(t,r){return r===e?{name:n,envs:t.envs}:t}))},Z=(t=(0,s.Z)(l().mark(function e(n,t,r){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S(j.map(function(e,r){return r===n?{name:e.name,envs:t.map(function(e){return e.value})}:e}));case 2:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),N=null;if(c){var O=null,_=null;Object.keys(g).length>0&&(O=(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:3,children:(0,m.jsxs)(ea,{children:[(0,m.jsx)(ei,{children:(0,m.jsx)(w.G,{icon:C.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,m.jsx)(ei,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(p).length>0&&(_=(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:3,children:(0,m.jsxs)(ea,{children:[(0,m.jsx)(ei,{children:(0,m.jsx)(w.G,{icon:C.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,m.jsxs)(ei,{children:["We were unable to save some of your changes.",(0,m.jsx)("br",{}),(0,m.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),N=(0,m.jsxs)(m.Fragment,{children:[O,_]})}else N=(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:3,children:j.length<20?(0,m.jsxs)(er,{onClick:function(){S(j.concat(es))},children:[(0,m.jsx)(w.G,{style:{color:"#006fc4"},icon:C.KtF,title:"Add Role"}),(0,m.jsx)("span",{children:"Add another role"})]}):(0,m.jsx)(eo,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,m.jsx)("div",{children:(0,m.jsxs)(et,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"role",children:"Role Name"}),(0,m.jsx)("th",{className:"env",children:"Environments"}),(0,m.jsx)("th",{})]})}),(0,m.jsxs)("tbody",{children:[j.length>0?j.map(function(e,n){var t=function(n,t){return p[e.name]&&p[e.name].includes(t.children)?en(en({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):g[e.name]&&g[e.name].includes(t.children)?en(en({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"role",children:(0,m.jsx)(J.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:c,onChange:function(e){return k(n,e.target.value)}})}),(0,m.jsx)("td",{className:"env",children:(0,m.jsx)($.ZP,{value:e.envs.map(function(e){return{value:e,label:e}}),options:i.map(function(e){return{value:e,label:e}}),isMulti:!0,isDisabled:c,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return Z(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,m.jsx)("td",{children:!c&&j.length>1&&(0,m.jsx)(er,{onClick:function(){return P(n)},children:(0,m.jsx)(w.G,{style:{color:"#FF0303"},icon:C.uMC,title:"Remove Role"})})})]},n)}):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:3,children:"No roles added."})}),N]})]})})}),el=t(86552),eu=t(83585),ed=t(10662),eh=d.ZP.div.withConfig({displayName:"RoleManagement__TopMargin",componentId:"sc-2atoof-0"})(["height:var(--field-top-spacing);"]),ep=function(e){var n,t=e.integration,r=(0,u.useRef)(W.V),a=(0,u.useState)("dev"),i=a[0],o=a[1],c=(0,u.useState)(!1),d=c[0],h=c[1],p=(0,u.useState)(0),f=p[0],x=p[1],g=(0,u.useContext)(ed.SurveyContext);(0,u.useEffect)(function(){o("dev"),h((0,el.Yr)(t))},[t.id]);var v=(null==t?void 0:t.environments)||[];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eh,{}),(0,m.jsx)("button",{disabled:!d,className:"primary",onClick:function(){r.current.open()},"data-testid":"create-role-button",children:"+ Create a New Role"}),(0,m.jsx)(eh,{}),(0,m.jsx)(Y.mQ,{onChange:function(e){o(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:v.map(function(e){return(0,m.jsxs)(Y.OK,{tab:V()(e),children:[(0,m.jsx)("br",{}),(0,m.jsx)(eu.Z,{environment:e,integration:t},f)]},e)})}),(0,m.jsx)(W.Z,{ref:r,title:"Create New Role",icon:null,onConfirm:(n=(0,s.Z)(l().mark(function e(n){var t,a,i,o;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(t=e.sent,i=(a=(0,y.Z)(t,2))[0],o=a[1],!i){e.next=11;break}return r.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!o){e.next=17;break}return r.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),x(function(e){return e+1}),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:x(function(e){return e+1}),null==g||g.setShowSurvey(!0,"createRole");case 21:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,m.jsx)(ec,{integrationId:t.id,environments:v})})]})},ef=t(27812),em=t(29208),ex=t.n(em),eg=t(93096),ev=t.n(eg),eb=t(34766),ej=t.n(eb),ey=t(84403),ew=t(39247),eC=t(895),eS=t(6878),eP=(r=(0,s.Z)(l().mark(function e(n){var t,r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,eS.e.post("bceid-webservice/idir/search",{field:t,search:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return r.apply(this,arguments)}),eI=(a=(0,s.Z)(l().mark(function e(n){var t,r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,eS.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return a.apply(this,arguments)}),ek=[{value:"idir",label:"IDIR"}],eZ=[{value:"givenName",label:"First Name",allowed:["idir"]},{value:"surname",label:"Last Name",allowed:["idir"]},{value:"mail",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"mailNickname",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}],eN=(0,u.forwardRef)(function(e,n){e.key;var t,r,a=e.idp,i=e.property,o=e.search,c=e.infoModalRef,d=e.parentModalRef,h=(0,u.useState)(!1),p=(h[0],h[1]),f=(0,u.useState)(!1),x=f[0],g=f[1],v=(0,u.useState)([]),b=v[0],j=v[1],w=(0,u.useState)(""),S=w[0],P=w[1],I=(0,u.useState)(i),k=I[0],Z=I[1],N=(0,u.useState)(o),O=N[0],_=N[1],D=(0,u.useState)(!1),R=D[0],T=D[1];(0,u.useEffect)(function(){P(a)},[a]),(0,u.useEffect)(function(){if(S){var e=eZ.find(function(e){return e.value===k});if(null==e?void 0:e.allowed.includes(S))F(O,k);else{var n=eZ.find(function(e){return e.allowed.includes(S)});Z((null==n?void 0:n.value)||""),_("")}}},[S]);var F=(t=(0,s.Z)(l().mark(function e(n){var t,r,a,i,o=arguments;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:k,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return g(!0),j([]),p(!0),e.next=8,eP({field:t,search:n});case 8:r=e.sent,i=(a=(0,y.Z)(r,2))[0],a[1],i&&j(i),g(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),E=(r=(0,s.Z)(l().mark(function e(n){var t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),e.next=3,eI({guid:n.guid,userId:n.userId});case 3:t=e.sent,(r=(0,y.Z)(t,2))[0],r[1]?T(!0):d.current.close({idp:S,guid:n.guid});case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ey.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",headers:[{accessor:"firstName",Header:"First name"},{accessor:"lastName",Header:"Last Name"},{accessor:"email",Header:"Email"},{accessor:"idirUsername",Header:"IDIR username"},{accessor:"actions",Header:"",disableSortBy:!0}],rowSelectorKey:"guid",data:b.map(function(e){return{guid:e.guid,firstName:e.firstName,lastName:e.lastName,email:e.email,idirUsername:e.userId,actions:(0,m.jsxs)(ew.c4,{children:[(0,m.jsx)(ew.Kk,{icon:C.Mdf,role:"button","aria-label":"view",onClick:function(){c.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,email:e.email,telephone:e.phone,company:e.company,department:e.department,title:e.jobTitle},_hash:d.current.getId()})},title:"View",size:"lg"}),(0,m.jsx)(ew.Kk,{icon:C.q7m,role:"button","aria-label":"import",onClick:function(){return E(e)},title:"Import",size:"lg"})]})}}),colfilters:[{value:S,multiselect:!1,onChange:P,options:ek},{value:k,multiselect:!1,onChange:Z,options:eZ.filter(function(e){return e.allowed.includes(S)})}],showFilters:!0,loading:x,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:O,searchLocation:"right",onSearch:F,onEnter:F,noDataFoundElement:(0,m.jsx)("p",{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}),R&&(0,m.jsx)("p",{className:"text-danger",children:"Failed to import the user. Please try again."})]})}),eO=t(52583);function e_(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eD(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e_(Object(t),!0).forEach(function(n){(0,h.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eR=d.ZP.label.withConfig({displayName:"UserRoles__Label",componentId:"sc-i09p9h-0"})(["font-weight:bold;margin-bottom:2px;"]),eT=d.ZP.div.withConfig({displayName:"UserRoles__AlignCenter",componentId:"sc-i09p9h-1"})(["text-align:center;"]),eF=d.ZP.div.withConfig({displayName:"UserRoles__TopMargin",componentId:"sc-i09p9h-2"})(["height:var(--field-top-spacing);"]),eE=d.ZP.div.withConfig({displayName:"UserRoles__FlexBox",componentId:"sc-i09p9h-3"})(["display:flex;& > *{padding-right:0.5rem;}"]),eM=d.ZP.div.withConfig({displayName:"UserRoles__FlexItem",componentId:"sc-i09p9h-4"})(["padding-top:10px;padding-bottom:10px;"]),eA=d.ZP.div.withConfig({displayName:"UserRoles__CenterAlign",componentId:"sc-i09p9h-5"})(["text-align:center;"]),eL=function(){return(0,m.jsxs)(eT,{children:[(0,m.jsx)(eF,{}),(0,m.jsx)(P.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},eq=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],eG=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],eB=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],eU={idir:eq,azureidir:eq,bceidbasic:eG,bceidbusiness:eG,bceidboth:eG,githubpublic:eB,githubbcgov:eB},eK=(0,O.hU)(function(e){var n,t,r,a,i,o=e.selectedRequest,c=e.alert,d=(0,u.useRef)(W.V),h=(0,u.useRef)(W.V),p=(0,u.useState)(!1),f=p[0],x=p[1],g=(0,u.useState)(1),v=g[0],b=g[1],j=(0,u.useState)(0),P=j[0],k=j[1],Z=(0,u.useState)(15),N=Z[0],O=Z[1],_=(0,u.useState)(!1),R=_[0],T=_[1],F=(0,u.useState)(!1),E=F[0],M=F[1],A=(0,u.useState)(!1),L=A[0],q=A[1],G=(0,u.useState)(""),B=G[0],U=G[1],K=(0,u.useState)([]),z=K[0],H=K[1],J=(0,u.useState)([]),Q=J[0],X=J[1],ee=(0,u.useState)([]),en=ee[0],et=ee[1],er=(0,u.useState)([]),ea=er[0],ei=er[1],eo=(0,u.useState)("dev"),es=eo[0],ec=eo[1],el=(0,u.useState)(o.devIdps[0]),eu=el[0],eh=el[1],ep=(0,u.useState)(""),em=ep[0],eg=ep[1],eb=(0,u.useState)(""),eS=eb[0],eP=eb[1],eI=(0,u.useState)(void 0),ek=eI[0],eZ=eI[1],e_=(0,u.useState)(!1),eT=e_[0],eq=e_[1],eG=(0,u.useContext)(ed.SurveyContext),eB=(0,u.useCallback)(ev()((n=(0,s.Z)(l().mark(function e(n){var t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(!0);case 2:return U("Assigning role..."),eq(!1),e.next=6,(0,I.$C)({environment:es,integrationId:o.id,username:ek,roleNames:n});case 6:if(t=e.sent,r=(0,y.Z)(t,2)[1],q(!1),r){e.next=16;break}return U("Last saved at ".concat(new Date().toLocaleString())),null==eG||eG.setShowSurvey(!0,"addUserToRole"),e.abrupt("return",!0);case 16:return eq(!0),U("Failed to update roles."),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==o?void 0:o.id,es,ek,eG]),eK=(t=(0,s.Z)(l().mark(function e(){var n,t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T(!0);case 4:return e.next=6,(0,I.gE)({environment:es,integrationId:o.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,y.Z)(n,2))[0],t[1]&&c.show({variant:"danger",content:"Failed to fetch roles."}),X(null===r?[]:r.map(function(e){return e.name})),ei(null===r?[]:r.map(function(e){return e.composite})),T(!1);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),ez=function(){H([]),et([]),b(1),k(0),eZ(void 0),x(!1)},eH=function(){if(eP(""),ec("dev"),o.devIdps){var e=o.devIdps.length>0?o.devIdps[0]:"";eh(e);var n=eU[e]||[];n.length>0&&eg(n[0].value)}},eV=(r=(0,s.Z)(l().mark(function e(n){var t,r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(!0);case 2:return e.next=4,(0,I.nu)({environment:es,integrationId:o.id,username:n});case 4:if(t=e.sent,a=(r=(0,y.Z)(t,2))[0],!r[1]){e.next=12;break}return c.show({variant:"danger",content:"Failed to fetch user roles."}),M(!1),e.abrupt("return");case 12:return e.next=14,et(a||[]);case 14:M(!1);case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});(0,u.useEffect)(function(){ez(),eH(),X([])},[o.id]),(0,u.useEffect)(function(){eW(eS,void 0,v)},[v]),(0,u.useEffect)(function(){eW(eS,void 0,1)},[N]),(0,u.useEffect)(function(){ez(),eK()},[es]),(0,u.useEffect)(function(){ez();var e=eU[eu]||[];!e.find(function(e){return e.search&&e.value===em})&&e.length>0&&eg(e[0].value)},[eu]),(0,u.useEffect)(function(){U(""),ek&&eV(ek)},[ek]);var eW=(a=(0,s.Z)(l().mark(function e(n){var t,r,a,i,s,u=arguments;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:em,r=u.length>2&&void 0!==u[2]?u[2]:v,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return T(!0),eP(n),b(r),eg(t),H([]),et([]),eZ(void 0),e.next=13,(0,I.sp)({environment:es,idp:eu,property:t,searchKey:n,integrationId:o.id||-1});case 13:if(a=e.sent,s=(i=(0,y.Z)(a,2))[0],i[1]&&c.show({variant:"danger",content:"Failed to fetch users."}),s){var l;x(!0),H((l=r,s.rows.slice((l-1)*15,15*l))),k(s.count)}T(!1);case 20:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),eY=function(e){return eW(e,void 0,1)},e$=(i=(0,s.Z)(l().mark(function e(n,t){var r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?en.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,ef.Z)(en.slice(0,-1)):[].concat((0,ef.Z)(en),[null===(a=t.option)||void 0===a?void 0:a.value])),!(r.length!==en.length)){e.next=7;break}return e.next=5,eB(r);case 5:e.sent&&et(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return i.apply(this,arguments)}),eJ=null;E?eJ=(0,m.jsx)(eL,{}):ek&&(eJ=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eR,{children:"2. Assign User to a Role"}),(0,m.jsx)($.ZP,{value:en.map(function(e){return{value:e,label:e}}),options:Q.map(function(e,n){return{value:e,label:!0==ea[n]?"".concat(e," (Composite role)"):e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:e$,"data-testid":"user-role-select"}),(0,m.jsx)(Y.Ad,{saving:L,content:B,variant:eT?"error":"success"})]}));var eQ="idir"===eu,eX=eU[eu]||[],e0=eX.length>0?eX.filter(function(e){return e.result}):[],e1=null;f&&eQ&&(e1=(0,m.jsxs)(m.Fragment,{children:[z.length>0&&(0,m.jsx)(Y.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,m.jsx)("button",{type:"button",className:"primary",style:{marginTop:"0.5rem"},"data-testid":"idim-search-button",onClick:function(){return h.current.open({key:new Date().getTime().toString(),idp:"idir",property:em,search:eS})},children:"Search in IDIM Web Service Lookup"})]}));var e2=(null==o?void 0:o.environments)||[],e3=(null==o?void 0:o.devIdps)||[],e5="guid"===em||null!=eu&&eu.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed",e4=function(e){var n=eX.find(function(n){return n.value===e});return null==n?void 0:n.label.toString()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eF,{}),(0,m.jsx)(S.ZP,{cols:10,children:(0,m.jsxs)(S.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,m.jsxs)(S.ZP.Col,{span:6,children:[(0,m.jsxs)(Y.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,m.jsx)(eO.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,m.jsx)("div",{"data-testid":"role-search-table",children:(0,m.jsx)(ey.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",rowSelectorKey:"username",headers:[{accessor:"firstName",Header:e4("firstName")||""},{accessor:"lastName",Header:e4("lastName")||""},{accessor:"email",Header:"Email"},{accessor:"actions",Header:"",disableSortBy:!0}],data:z.map(function(e){return{username:ex()(e,"username"),firstName:ex()(e,"firstName"),lastName:ex()(e,"lastName"),email:ex()(e,"email"),actions:(0,m.jsx)(ew.c4,{children:(0,m.jsx)(ew.Kk,{icon:C.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),d.current.open({guid:e.username.split("@")[0],attributes:eD(eD({},ej()(e0,function(n,t){return n[t.label]=ex()(e,t.value),n},{})),e.attributes)})},title:"View",size:"lg"})})}}),colfilters:[{key:"user-role-filter-env",value:es,multiselect:!1,onChange:ec,options:e2.map(function(e){return{value:e,label:V()(e)}})},{key:"user-role-filter-idp",value:eu,multiselect:!1,onChange:eh,options:e3.filter(function(e){return!["digitalcredential","bcservicescard","social"].includes(e)}).map(function(e){return{value:e,label:D.S[e]}})},{key:"user-role-filter-prop",value:em,multiselect:!1,onChange:eg,options:eX.filter(function(e){return e.search})}],showFilters:!0,loading:R,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:eS,searchLocation:"right",onSearch:eY,onEnter:eY,noDataFoundElement:f?(0,m.jsxs)(eE,{children:[(0,m.jsx)(eM,{children:(0,m.jsx)(w.G,{icon:C.RLE,color:"#D44331",title:"Edit",size:"lg"})}),eQ?(0,m.jsx)(eM,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,m.jsx)(eM,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]}):(0,m.jsx)(eA,{children:"You have not searched for any users yet."}),pagination:!0,pageLimits:[15],onPage:b,rowCount:P,limit:N,onLimit:function(e){O(e)},activateRow:function(e){eZ(e.original.username)},searchTooltip:e5})}),e1]}),(0,m.jsx)(S.ZP.Col,{span:4,children:eJ})]})}),(0,m.jsx)(eC.Z,{modalRef:d}),(0,m.jsx)(W.Z,{ref:h,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){eW(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,m.jsx)(eN,{idp:e.idp,property:e.property,search:e.search,infoModalRef:d,parentModalRef:h},e.key):(0,m.jsx)(m.Fragment,{})}})]})}),ez=t(30254),eH=t(56186),eV=t(77212),eW=t(34393);function eY(e){var n,t=e.requestId,r=(0,u.useState)(!1),a=r[0],i=r[1],o=(0,u.useState)(!1),c=o[0],d=o[1],h=(0,u.useState)([]),p=h[0],f=h[1],x=(n=(0,s.Z)(l().mark(function e(){var n,r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,(0,eH.v)({requestId:t,eventCode:"request-update-success",clearNotifications:!0});case 5:n=e.sent,a=(r=(0,y.Z)(n,2))[0],r[1]?d(!0):a&&f(a.rows),i(!1);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return((0,u.useEffect)(function(){x()},[t]),c)?(0,m.jsx)(j,{variant:"warning",content:"Failed to load details."}):a?(0,m.jsx)(eV.Z,{}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(eW.Z,{events:p})})}var e$=t(24348),eJ=t(71431),eQ=t.n(eJ),eX=d.ZP.ul.withConfig({displayName:"StatusList",componentId:"sc-2lisfs-0"})(["list-style-type:none;margin:0;position:relative;& li{border-bottom:1px solid #d4d4d4;& svg.svg-inline--fa{position:absolute;right:0;}& div.icon{position:absolute;right:0;bottom:5px;}}"]),e0=d.ZP.div.withConfig({displayName:"shared__SubTitle",componentId:"sc-1och6ra-0"})(["font-size:18px;font-weight:bold;color:#000;border-bottom:1px solid gray;"]),e1=d.ZP.div.withConfig({displayName:"shared__FlexStartBox",componentId:"sc-1och6ra-1"})(["display:flex;justify-content:flex-start;& > *:nth-child(1){margin-right:5px;}"]),e2="15px",e3=d.ZP.div.withConfig({displayName:"shared__Circle",componentId:"sc-1och6ra-2"})(["height:",";width:",";border-radius:",";margin:",";margin-left:0;border:2px solid #b3b3b3;"],e2,e2,e2,"0"),e5=d.ZP.li.withConfig({displayName:"shared__StyledLi",componentId:"sc-1och6ra-3"})(["display:flex;align-items:center;justify-content:space-between;margin:0;& p{max-width:90%;margin:5px 0;}"]),e4=function(){return(0,m.jsxs)(e1,{children:[(0,m.jsx)("div",{children:(0,m.jsx)(w.G,{icon:C.f8k,color:"#2E8540"})}),(0,m.jsx)("div",{children:(0,m.jsx)("span",{children:"Your integration is approved and available."})})]})};function e9(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eX,{children:[(0,m.jsxs)(e5,{children:["Requirements email sent to IDIM",(0,m.jsx)(w.G,{icon:C.f8k,color:"#00C45B"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,m.jsx)(R.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,m.jsx)(w.G,{icon:C.FU$,color:"#b3b3b3"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsx)("p",{children:"Access to prod"}),(0,m.jsx)(e3,{})]})]})})}var e8=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasBceid,a=n.awaitingBceidProd,i=n.bceidApproved;if(!t||!r)return null;var o=null;return i?o=(0,m.jsx)(e4,{}):a&&(o=(0,m.jsx)(e9,{})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)(e0,{children:"Access to BCeID Prod"}),(0,m.jsx)("br",{}),o]})};function e6(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eX,{children:[(0,m.jsxs)(e5,{children:["Requirements email sent to GCIO",(0,m.jsx)(w.G,{icon:C.f8k,color:"#00C45B"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsx)("p",{children:"Access to prod"}),(0,m.jsx)(e3,{})]})]})})}var e7=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasGithub,a=n.awaitingGithubProd,i=n.githubApproved;if(!t||!r)return null;var o=null;return i?o=(0,m.jsx)(e4,{}):a&&(o=(0,m.jsx)(e6,{})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)(e0,{children:"Access to GitHub Prod"}),(0,m.jsx)("br",{}),o]})},ne=t(55673),nn=t(51426),nt=t(34798),nr=t.n(nt),na=d.ZP.label.withConfig({displayName:"ServiceAccountRoles__Label",componentId:"sc-otp9ki-0"})(["font-weight:bold;margin-bottom:2px;"]);d.ZP.div.withConfig({displayName:"ServiceAccountRoles__Readonly",componentId:"sc-otp9ki-1"})(["background-color:#f1f1f1;margin:2px 0 2px 0;padding:4px 6px;",""],function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"});var ni=d.ZP.div.withConfig({displayName:"ServiceAccountRoles__AlignCenter",componentId:"sc-otp9ki-2"})(["text-align:center;"]),no=d.ZP.div.withConfig({displayName:"ServiceAccountRoles__TopMargin",componentId:"sc-otp9ki-3"})(["height:var(--field-top-spacing);"]),ns=function(){return(0,m.jsxs)(ni,{children:[(0,m.jsx)(no,{}),(0,m.jsx)(P.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},nc=(0,O.hU)(function(e){var n,t,r,a,i=e.selectedRequest,o=e.alert,c=(0,u.useState)(!1),d=(c[0],c[1]),h=(0,u.useState)(!1),p=h[0],f=h[1],x=(0,u.useState)(!1),g=x[0],v=x[1],b=(0,u.useState)(""),j=b[0],w=b[1],C=(0,u.useState)([]),P=C[0],k=C[1],Z=(0,u.useState)([]),N=Z[0],O=Z[1],_=(0,u.useState)(void 0),D=_[0];_[1];var F=(0,u.useState)("dev"),E=F[0],M=F[1],A=(0,u.useState)(!1),L=A[0],q=A[1],G=(null==i?void 0:i.environments)||[],B=(0,u.useCallback)(ev()((n=(0,s.Z)(l().mark(function e(n){var t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),w("Assigning role..."),q(!1),e.next=5,(0,I.$C)({environment:E,integrationId:i.id,username:(0,nn.Sf)(i.clientId),roleNames:n});case 5:if(t=e.sent,r=(0,y.Z)(t,2)[1],v(!1),!r){e.next=15;break}return q(!0),w("Failed to update roles."),e.abrupt("return",!1);case 15:return w("Last saved at ".concat(new Date().toLocaleString())),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==i?void 0:i.id,E,D]),U=(t=(0,s.Z)(l().mark(function e(n,t){var r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?N.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,ef.Z)(N.slice(0,-1)):[].concat((0,ef.Z)(N),[null===(a=t.option)||void 0===a?void 0:a.value])),!(N.length!==r.length)){e.next=7;break}return e.next=5,B(r);case 5:e.sent&&O(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),K=(r=(0,s.Z)(l().mark(function e(){var n,t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d(!0);case 4:return e.next=6,(0,I.gE)({environment:E,integrationId:i.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,y.Z)(n,2))[0],t[1]&&o.show({variant:"danger",content:"Failed to fetch roles."}),k(null===r?[]:r.map(function(e){return e.name})),d(!1);case 14:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),z=(a=(0,s.Z)(l().mark(function e(n){var t,r,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(!0);case 2:return e.next=4,(0,I.nu)({environment:E,integrationId:i.id,username:n});case 4:if(t=e.sent,a=(r=(0,y.Z)(t,2))[0],!r[1]){e.next=12;break}return o.show({variant:"danger",content:"Failed to fetch roles."}),f(!1),e.abrupt("return");case 12:return e.next=14,O(a||[]);case 14:f(!1);case 15:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});return(0,u.useEffect)(function(){K(),w(""),z((0,nn.Sf)(i.clientId))},[E]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ne.Z,{children:(0,m.jsx)(Y.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,m.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,m.jsx)(R.default,{external:!0,href:(0,T.eO)("Creating-a-Role#service-account-role-management"),children:"click to visit our wiki page"})]})})}),(0,m.jsx)(Y.mQ,{onChange:function(e){M(e)},activeKey:E,tabBarGutter:30,destroyInactiveTabPane:!0,children:G.map(function(e){return(0,m.jsxs)(Y.OK,{tab:V()(e),children:[(0,m.jsx)("br",{}),(0,m.jsx)(S.ZP,{cols:10,children:(0,m.jsxs)(S.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,m.jsx)(S.ZP.Col,{span:5,children:(0,m.jsx)(ey.Z,{headers:[{accessor:"projectName",Header:"Service Account"}],data:[{projectName:i.projectName}],colfilters:[],activateRow:nr(),rowSelectorKey:"projectName"})}),(0,m.jsx)(S.ZP.Col,{span:5,children:p?(0,m.jsx)(ns,{}):(0,m.jsxs)("div",{children:[(0,m.jsx)(na,{children:"Assign Service Account to a Role"}),(0,m.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,m.jsx)($.ZP,{value:N.map(function(e){return{value:e,label:e}}),options:P.map(function(e){return{value:e,label:e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:U})}),(0,m.jsx)(Y.Ad,{saving:g,content:j,variant:L?"error":"success"})]})})]})})]},e)})})]})});function nl(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eX,{children:[(0,m.jsxs)(e5,{children:["Requirements email sent to IDIM",(0,m.jsx)(w.G,{icon:C.f8k,color:"#00C45B"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,m.jsx)(R.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,m.jsx)(w.G,{icon:C.FU$,color:"#b3b3b3"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsx)("p",{children:"Access to prod"}),(0,m.jsx)(e3,{})]})]})})}var nu=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasBcServicesCard,a=n.awaitingBcServicesCardProd,i=n.bcServicesCardApproved;if(!t||!r)return null;var o=null;return i?o=(0,m.jsx)(e4,{}):a&&(o=(0,m.jsx)(nl,{})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)(e0,{children:"Access to BC Services Card Prod"}),(0,m.jsx)("br",{}),o]})};function nd(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eX,{children:[(0,m.jsxs)(e5,{children:["Requirements email sent to GCIO",(0,m.jsx)(w.G,{icon:C.f8k,color:"#00C45B"})]}),(0,m.jsxs)(e5,{children:[(0,m.jsx)("p",{children:"Access to prod"}),(0,m.jsx)(e3,{})]})]})})}var nh=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasSocial,a=n.socialApproved;if(!t||!r)return null;var i=null;return a?i=(0,m.jsx)(e4,{}):a||(i=(0,m.jsx)(nd,{})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)(e0,{children:"Access to Social Prod"}),(0,m.jsx)("br",{}),i]})},np=t(45931),nf=t(92451),nm=t(49666),nx=t(33199),ng=t(7016),nv=t(49699),nb=t(83976),nj=t(5740),ny=(i=(0,s.Z)(l().mark(function e(n,t,r,a){var i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eS.e.get("requests/".concat(n,"/metrics?env=").concat(t,"&fromDate=").concat(r,"&toDate=").concat(a)).then(function(e){return null==e?void 0:e.data});case 3:return i=e.sent,e.abrupt("return",[i,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r){return i.apply(this,arguments)}),nw=(o=(0,s.Z)(l().mark(function e(n,t,r,a,i,o){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,eS.e)({url:"requests/".concat(n,"/logs?env=").concat(t,"&start=").concat(r,"&end=").concat(a),responseType:"blob",onDownloadProgress:i,signal:null==o?void 0:o.signal}).then(function(e){return{data:null==e?void 0:e.data,message:null==e?void 0:e.headers["x-message"]}});case 3:return s=e.sent,e.abrupt("return",[s,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[null,e.t0]);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r,a,i){return o.apply(this,arguments)}),nC=t(9198),nS=t.n(nC);t(5843);var nP=t(14153);function nI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nk(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(nS(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nI(Object(t),!0).forEach(function(n){(0,h.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({dateFormat:"yyyy-MM-dd",customInput:(0,m.jsx)(nZ,{label:e.label}),enableTabLoop:!1,popperPlacement:"bottom-start",maxDate:new Date},e))})}var nZ=u.forwardRef(function(e,n){var t=e.value,r=e.onClick,a=e.label;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nP.Z,{style:{fontWeight:"bold"},children:a}),(0,m.jsxs)("div",{className:"input-group",children:[(0,m.jsx)("input",{type:"text",className:"form-control",value:t,onClick:r,readOnly:!0}),(0,m.jsx)("div",{className:"input-group-append",children:(0,m.jsx)("span",{className:"input-group-text",style:{height:"100%"},children:(0,m.jsx)(w.G,{icon:C.fT7})})})]})]})}),nN=t(9206),nO=d.ZP.div.withConfig({displayName:"MetricsPanel__DatePickerContainer",componentId:"sc-fanjss-0"})(["height:100%;display:flex;align-items:center;padding-right:15px;& > *{margin-left:15px;}"]);d.ZP.label.withConfig({displayName:"MetricsPanel__Label",componentId:"sc-fanjss-1"})(["margin-bottom:2px;"]);var n_=d.ZP.div.withConfig({displayName:"MetricsPanel__TopMargin",componentId:"sc-fanjss-2"})(["height:var(--field-top-spacing);"]);d.ZP.span.withConfig({displayName:"MetricsPanel__LeftTitle",componentId:"sc-fanjss-3"})(["color:#000;font-size:1.1rem;font-weight:bold;"]),(0,d.ZP)(w.G).withConfig({displayName:"MetricsPanel__PaddedIcon",componentId:"sc-fanjss-4"})(["margin-right:20px;"]),d.ZP.div.withConfig({displayName:"MetricsPanel__StyledP",componentId:"sc-fanjss-5"})(["margin-bottom:5px;display:flex;align-items:center;"]),d.ZP.hr.withConfig({displayName:"MetricsPanel__StyledHr",componentId:"sc-fanjss-6"})(["background-color:black;"]);var nD=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},nR="December 01, 2023",nT=(0,O.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,u.useState)("dev"),i=a[0],o=a[1],c=(null==t?void 0:t.environments)||[],d=(0,u.useState)([]),h=d[0],p=d[1],f=(0,u.useState)(!1);f[0],f[1];var x=(0,u.useState)((0,Z.F3)(14)),g=x[0],v=x[1],b=(0,u.useState)(new Date),j=b[0],w=b[1],C=(0,u.useContext)(ed.SurveyContext),S=function(e){e&&v(e)},P=function(e){e&&w(e)},I=(0,u.useCallback)(ev()((n=(0,s.Z)(l().mark(function e(n,a,i){var o,s,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ny(null==t?void 0:t.id,i,n,a);case 2:o=e.sent,c=(s=(0,y.Z)(o,2))[0],s[1]?r.show({variant:"danger",content:"Failed to fetch metrics"}):(p(c),c.length>0&&(null==C||C.setShowSurvey(!0,"viewMetrics")));case 7:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})),[null==t?void 0:t.clientId,i,g,j]);return(0,u.useEffect)(function(){I(nD(g),nD(j),i)},[null==t?void 0:t.clientId,i,g,j]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n_,{}),(0,m.jsx)("div",{children:(0,m.jsxs)(nO,{children:[(0,m.jsx)(nk,{placeholderText:"Start Date",selected:new Date(g),onChange:function(e){return S(e)},minDate:new Date(nR),maxDate:j,label:"Start Date"}),(0,m.jsx)(nk,{placeholderText:"End Date",selected:new Date(j),onChange:function(e){return P(e)},minDate:g,label:"End Date"})]})}),(0,m.jsx)(Y.mQ,{onChange:function(e){o(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:c.map(function(e){return(0,m.jsx)(Y.OK,{tab:V()(e),children:(0,m.jsx)("div",{style:{width:"100%",height:300},children:(null==h?void 0:h.length)>0?(0,m.jsx)(np.h,{children:(0,m.jsxs)(nf.v,{data:h,margin:{top:20,right:20,bottom:30,left:20},children:[(0,m.jsx)(nm.q,{strokeDasharray:"3 3"}),(0,m.jsx)(nx.K,{dataKey:"event",tick:{fontSize:10},label:{value:"Events",position:"insideBottomRight"}}),(0,m.jsx)(ng.B,{dataKey:"count",label:{value:"Count",angle:-90,position:"insideLeft"}}),(0,m.jsx)(nv.u,{}),(0,m.jsx)(nb.D,{}),(0,m.jsx)(nj.$,{dataKey:"count",fill:"#0d6efd",barSize:30,label:{fill:"#0d6efd",fontSize:20,position:"top"},background:{fill:"#eee"}})]})}):(0,m.jsxs)("div",{style:{textAlign:"center"},children:[(0,m.jsx)("br",{}),(0,m.jsx)("p",{children:"No data available yet!"})]})})},e)})}),(0,m.jsxs)(_.$,{children:["This tab was released ",nR,". Please refer to"," ",(0,m.jsx)(nN.rU,{href:"https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_administration_guide/auditing_and_events#event_types",external:!0,children:"Redhat's definition"})," ","for event type details."]})]})}),nF=d.ZP.div.withConfig({displayName:"LogsPanel__ModalContent",componentId:"sc-17cruym-0"})(["display:flex;flex-direction:row;column-gap:1.5em;justify-content:center;min-width:20em;margin:0;padding:0;"]),nE=d.ZP.form.withConfig({displayName:"LogsPanel__Form",componentId:"sc-17cruym-1"})(["display:flex;flex-direction:column;row-gap:1.5em;.header{margin-top:1em;display:flex;align-items:center;p{font-weight:bold;padding-right:0.4em;margin:0;font-size:18px;}}.bold{font-weight:bold;}.env-controls{margin:0;legend{font-size:unset;font-weight:bold;}input{margin-right:0.2em;}label{margin-right:1em;}}.date-picker-container{height:100%;display:flex;align-items:center;column-gap:1em;}select{margin-left:0.5em;width:200px;}.button-container{display:flex;flex-diretion:row;align-items:center;p{margin:0;margin-left:1em;}}.error-text{font-size:14px;color:red;margin:0;height:1em;}"]),nM=function(e,n){var t=document.createElement("a");t.download=e,t.href=window.URL.createObjectURL(n),t.dataset.downloadurl=["text/json",t.download,t.href].join(":");var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(r),t.remove()},nA={dev:"Development",test:"Test",prod:"Production"},nL=new Date("February 13, 2024"),nq=(0,O.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,u.useState)("dev"),i=a[0],o=a[1],c=(null==t?void 0:t.environments)||[],d=(0,u.useState)(!1),h=d[0],p=d[1],f=(0,u.useState)((0,Z.F3)(1)),x=f[0],g=f[1],v=(0,u.useState)(new Date),b=v[0],j=v[1],w=(0,u.useState)(""),C=w[0],S=w[1],I=(0,u.useState)(0),k=I[0],N=I[1],O=(0,u.useState)(new Date),_=O[0],D=O[1],R=(0,u.useState)(),T=R[0],F=R[1],E=(0,u.useContext)(ed.SurveyContext),M=(0,u.useState)(!1),A=M[0],L=M[1];(0,u.useEffect)(function(){x&&(Date.now()-x.getTime()>1728e5?D(new Date(x.getTime()+1728e5)):D(new Date),b&&(b.getTime()<x.getTime()||b.getTime()-x.getTime()>1728e5)&&j(null))},[x]),(0,u.useEffect)(function(){b&&x&&b.getTime()<x.getTime()&&S("Please ensure your end date is later than your start date.")},[b]);var q=function(e){S(""),g(e)},B=function(e){S(""),j(e)},U=function(e){if(void 0!==e.total&&void 0!==e.loaded){var n=Math.floor(e.loaded/Number(e.total)*100);n!==k&&N(n)}},K=function(){o("dev"),g((0,Z.F3)(1)),j(new Date)};(0,u.useEffect)(function(){K()},[t.clientId]);var z=(n=(0,s.Z)(l().mark(function e(n){var a,o,s,c,u,d,h;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null==T||T.abort(),F(a=new AbortController),L(!0),e.prev=5,!(!x||!b)){e.next=9;break}return S("Please select a date range."),e.abrupt("return");case 9:return p(!0),e.next=12,nw(t.id,i,x,b,U,a);case 12:if(o=e.sent,c=(s=(0,y.Z)(o,2))[0],!(u=s[1])){e.next=24;break}if("ERR_CANCELED"!==u.code){e.next=19;break}return e.abrupt("return");case 19:d="Error fetching logs.",(null==u?void 0:u.status)===429&&(d="Too many requests"),r.show({variant:"danger",fadeOut:1e4,closable:!0,content:d}),e.next=27;break;case 24:r.show({variant:"success",fadeOut:1e4,closable:!0,content:null!==(h=null==c?void 0:c.message)&&void 0!==h?h:"Downloaded logs."}),nM("".concat(t.clientId,"-").concat(x.toLocaleString(),"-").concat(b.toLocaleString(),".json"),c.data),null==E||E.setShowSurvey(!0,"downloadLogs");case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(5),console.error("Exception parsing file");case 32:return e.prev=32,p(!1),N(0),L(!1),e.finish(32);case 37:case"end":return e.stop()}},e,null,[[5,29,32,37]])})),function(e){return n.apply(this,arguments)}),H=function(e){o(e.target.value)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(nE,{onSubmit:z,children:[(0,m.jsxs)("div",{className:"header",children:[(0,m.jsx)("p",{children:"Download Logs"}),(0,m.jsx)(eO.Z,{content:"You can download upto 25,000 logs at a time. Result will indicate if all logs in the selected time interval were retrieved or a smaller time interval is required."})]}),(0,m.jsxs)("fieldset",{className:"env-controls",disabled:h,children:[(0,m.jsx)("legend",{children:"Select an Environment"}),c.map(function(e){return(0,m.jsxs)("span",{children:[(0,m.jsx)("input",{id:"radio-".concat(e),type:"radio",name:"environmentSelection",value:e,checked:i===e,onChange:H}),(0,m.jsx)("label",{htmlFor:"radio-".concat(e),children:nA[e]})]},e)})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"date-picker-container",children:[(0,m.jsx)(nk,{placeholderText:"Start Date",selected:x,onChange:function(e){return q(e)},minDate:nL,shouldCloseOnSelect:!1,label:"Start Date",showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:h}),(0,m.jsx)(nk,{placeholderText:"End Date",selected:b,onChange:function(e){return B(e)},minDate:x,maxDate:_,label:"End Date",shouldCloseOnSelect:!1,showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:h})]}),(0,m.jsx)("p",{className:"error-text",children:C})]}),(0,m.jsx)("div",{className:"button-container",children:(0,m.jsx)("button",{className:"primary",type:"submit",disabled:!!C||!!h,children:"Download"})})]}),(0,m.jsx)(G.Z,{id:"logs-modal",showConfirm:!1,title:"Downloading Logs",handleClose:function(){null==T||T.abort(),p(!1),N(0)},content:(0,m.jsxs)(nF,{children:[(0,m.jsx)(P.rj,{color:"black",visible:h,height:25,width:25,wrapperStyle:{justifyContent:"center"}}),h&&0===k&&(0,m.jsx)("p",{children:"Querying logs..."}),h&&0!==k?(0,m.jsxs)("p",{children:[k,"% downloaded."]}):null]}),openModal:A})]})}),nG=d.ZP.div.withConfig({displayName:"IntegrationInfoTabs__TabWrapper",componentId:"sc-gnonhi-0"})(["padding-left:1rem;padding-right:1rem;",""],function(e){return e.short?"max-width: 800px;":""}),nB=d.ZP.div.withConfig({displayName:"IntegrationInfoTabs__AlignCenter",componentId:"sc-gnonhi-1"})(["text-align:center;"]),nU=d.ZP.div.withConfig({displayName:"IntegrationInfoTabs__TopMargin",componentId:"sc-gnonhi-2"})(["height:var(--field-top-spacing);"]),nK=d.ZP.div.withConfig({displayName:"IntegrationInfoTabs__BottomMargin",componentId:"sc-gnonhi-3"})(["margin-bottom:60px;"]),nz="tech-details",nH="role-management",nV="user-role-management",nW="service-account-role-management",nY="secret",n$="history",nJ="metrics",nQ="Logs",nX=function(e){var n=e.integration,t=e.children;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h2",{children:["Integration Details - ",eQ()(String(n.id),8,"0")]}),(0,m.jsx)(Y.OC,{children:t})]})},n0=function(e){var n=e.integration,t=e.approvalContext;return(0,m.jsx)(Y.OK,{tab:"Technical Details",children:(0,m.jsx)(nG,{short:!1,children:(0,m.jsx)(S.ZP,{cols:15,children:(0,m.jsxs)(S.ZP.Row,{gutter:[],children:[(0,m.jsx)(S.ZP.Col,{span:7,children:(0,m.jsx)(q,{integration:n})}),(0,m.jsx)(S.ZP.Col,{span:1}),(0,m.jsxs)(S.ZP.Col,{span:7,children:[(0,m.jsx)(e8,{approvalContext:t}),(0,m.jsx)(e7,{approvalContext:t}),(0,m.jsx)(nu,{approvalContext:t}),(0,m.jsx)(nh,{approvalContext:t})]})]})})})},nz)},n1=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Role Management",children:(0,m.jsxs)(nG,{children:[(0,m.jsx)("br",{}),(0,m.jsxs)("div",{children:["Please visit our"," ",(0,m.jsx)(R.default,{external:!0,href:(0,T.eO)("Creating-a-Role"),children:"wiki page"})," ","for more information on roles."]}),(0,m.jsx)(ep,{integration:n})]})},nH)},n2=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Assign Users to Roles",children:(0,m.jsx)(nG,{children:(0,m.jsx)(eK,{selectedRequest:n})})},nV)},n3=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Assign Service Account to Roles",children:(0,m.jsx)(nG,{children:(0,m.jsx)(nc,{selectedRequest:n})})},nW)},n5=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Secrets",children:(0,m.jsx)(nG,{short:!0,children:(0,m.jsx)(z,{selectedRequest:n})})},nY)},n4=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Metrics",children:(0,m.jsx)(nG,{short:!1,children:(0,m.jsx)(nT,{integration:n})})},nJ)},n9=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Logs",children:(0,m.jsx)(nG,{short:!1,children:(0,m.jsx)(nq,{integration:n})})},nQ)},n8=function(e){var n=e.integration;return(0,m.jsx)(Y.OK,{tab:"Change History",children:(0,m.jsx)(nG,{short:!0,children:(0,m.jsx)(eY,{requestId:n.id})})},n$)},n6=function(e){var n,t,r=e.integration,a=(0,u.useState)(nz),i=a[0],o=a[1];if(!r)return null;var s=r.status,c=r.environments,l=r.bceidApproved,d=void 0!==l&&l,h=r.githubApproved,p=void 0!==h&&h,f=(r.digitalCredentialApproved,r.bcServicesCardApproved),x=void 0!==f&&f,g=r.socialApproved,v=void 0!==g&&g,b=(0,ez.n)(s||"draft"),y=(void 0===c?[]:c).includes("prod"),w=(0,e$.Jx)(r),C=(0,e$.dV)(r),I=(0,e$.S3)(r),k=(0,e$.e$)(r),N=(0,e$.dw)(r),O=(0,Z.he)(r),D=(0,Z.R5)(r),T=(0,Z.kF)(r),F="gold"===r.serviceType,E="service-account"!==r.authType,M="both"===r.authType;if("In Draft"===b)return(0,m.jsx)(nX,{integration:r,children:(0,m.jsxs)(j,{variant:"info",children:[(0,m.jsx)("div",{children:(0,m.jsx)("strong",{children:"Your request has not been submitted."})}),(0,m.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var A=[],L=[],q=(null===(n=r.devIdps)||void 0===n?void 0:n.length)&&(null===(t=r.devIdps)||void 0===t?void 0:t.every(function(e){return["digitalcredential","bcservicescard","social"].includes(e)}));"Submitted"===b?(["planFailed","applyFailed"].includes(r.status)?A.push((0,m.jsx)(Y.OK,{tab:"Technical Details",children:(0,m.jsx)(nG,{short:!1,children:(0,m.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,m.jsx)("div",{style:{padding:5},children:(0,m.jsxs)(_.B,{children:["Your request for an integration could not be completed. Please"," ",(0,m.jsx)(R.default,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})},nz)):A.push((0,m.jsx)(Y.OK,{tab:"Technical Details",children:(0,m.jsx)(nG,{short:!1,children:(0,m.jsxs)(S.ZP,{cols:15,children:[(0,m.jsx)("br",{}),(0,m.jsxs)(nB,{children:[(0,m.jsx)(nU,{}),(0,m.jsx)(P.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}),(0,m.jsx)(nK,{})]})]})})},nz)),L.push(nz)):"Completed"===b&&(A.push(n0({integration:r,approvalContext:{hasProd:y,hasBceid:w,hasGithub:C,hasSocial:N,hasDigitalCredential:I,hasBcServicesCard:k,bceidApproved:d,githubApproved:p,socialApproved:v,bcServicesCardApproved:x,awaitingBceidProd:w&&y&&!d,awaitingGithubProd:C&&y&&!p,awaitingBcServicesCardProd:k&&y&&!x,awaitingSocialProd:N&&y&&!v,bceidProdApplying:O,githubProdApplying:D,bcServicesCardProdApplying:T}})),L.push(nz),q||(A.push(n1({integration:r})),L.push(nH)),F&&E&&!q&&(A.push(n2({integration:r})),L.push(nV)),F&&(!E||M)&&(A.push(n3({integration:r})),L.push(nW)),r.publicAccess||(A.push(n5({integration:r})),L.push(nY)),A.push(n8({integration:r})),L.push(n$),A.push(n4({integration:r})),L.push(nJ),A.push(n9({integration:r})),L.push(nQ));var G=i;return L.includes(i)||(G=L[0]),(0,m.jsx)(nX,{integration:r,children:(0,m.jsx)(Y.mQ,{activeKey:G,onChange:function(e){o(e)},tabBarGutter:30,destroyInactiveTabPane:!0,"data-testid":"integration-details-tabs",children:A})})},n7=t(11163),te=t(3528),tn=t(59349),tt=t(70928);d.ZP.tr.withConfig({displayName:"IntegrationList__RightFloatButtons",componentId:"sc-fnjyjh-0"})(["float:right;padding-right:0.5em;"]);var tr=d.ZP.p.withConfig({displayName:"IntegrationList__PNoMargin",componentId:"sc-fnjyjh-1"})(["margin:0;"]);function ta(){return(0,m.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var ti=function(e){return eQ()(String(e),8,"0")},to=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&(null==t?void 0:t.length)!=0?(0,m.jsx)("button",{"data-testid":"request-integration",onClick:n,className:"callout",children:"+ Request SSO Integration"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:(0,m.jsx)("b",{children:"To request an integration for a Standard Realm, youll need the following information:"})}),(0,m.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,m.jsxs)(S.ZP,{cols:2,style:{textAlign:"left"},children:[(0,m.jsxs)(S.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,m.jsxs)(S.ZP.Col,{span:1,children:[(0,m.jsx)(Y.wk,{number:1,title:"Project Information",children:null}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Project Name"]}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Project Team Members (Optional)"]}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Product Owner or Technical Contact"]})]}),(0,m.jsxs)(S.ZP.Col,{span:1,children:[(0,m.jsx)(Y.wk,{number:2,title:"Technical Info",children:null}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Client type (",(0,m.jsx)(R.default,{href:(0,T.eO)("Useful-References#client"),children:"Public or Confidential, learn more"}),")"]}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Environments (Development, Test, Production)"]}),(0,m.jsxs)(tr,{children:[(0,m.jsx)(w.G,{icon:C.LEp})," Redirect URIs for selected environments"]})]})]}),(0,m.jsx)("p",{style:{marginTop:"1.25rem"},children:"*Youll be able to save and return your integration request, anytime throughout the request form."})]}),(0,m.jsx)("button",{"data-testid":"request-integration",onClick:n,className:"callout",children:"+ Request SSO Integration"})]})]})},ts=(0,O.hU)(function(e){var n,t,r,a=e.setIntegration,i=e.setIntegrationCount,o=e.alert,c=(0,n7.useRouter)(),d=c.query.integr,h=(0,u.useState)(!0),p=h[0],f=h[1],x=(0,u.useState)(!1),g=x[0],v=x[1],b=(0,u.useState)([]),j=b[0],w=b[1],C=(0,u.useState)(d&&Number(d)||void 0),S=C[0],P=C[1],I=(n=(0,s.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.push("/request");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),k=function(e){P(e.id),a(e)},N=function(e){var n=e||[];if(w(n),i(n.length),S){var t=e.find(function(e){return(null==e?void 0:e.id)===S});t?k(t):(null==e?void 0:e.length)>0&&k(e[0])}else(null==e?void 0:e.length)>0&&k(e[0])},O=(t=(0,s.Z)(l().mark(function e(){var n,t,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,(0,te.XJ)();case 3:n=e.sent,r=(t=(0,y.Z)(n,2))[0],v(!!t[1]),N(r||[]),f(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,u.useEffect)(function(){O(),c.replace("/my-dashboard/integrations")},[]),(0,u.useEffect)(function(){return(0,Z.rn)(j||[])&&(clearInterval(r),r=setInterval((0,s.Z)(l().mark(function e(){var n,t,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,te.XJ)();case 2:n=e.sent,a=(t=(0,y.Z)(n,2))[0],t[1]?clearInterval(r):N(a||[]);case 7:case"end":return e.stop()}},e)})),5e3)),function(){r&&clearInterval(r)}},[j,S]);var _=g?(0,m.jsx)(tt.q1,{}):j&&0!==j.length?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h2",{children:"Integrations"}),(0,m.jsx)(ey.Z,{headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Status"},{accessor:"authType",Header:"Usecase"},{accessor:"serviceType",Header:"Service Type"},{accessor:"actions",Header:(0,m.jsx)(ta,{}),disableSortBy:!0}],data:null==j?void 0:j.map(function(e){return{id:ti(e.id),projectName:e.projectName,status:(0,ez.n)(e.status||"draft"),authType:tn.F[e.authType||"browser-login"],serviceType:"Gold",actions:(0,m.jsx)(ew.ZP,{request:e,onDelete:function(n,t){t?o.show({variant:"danger",content:"Failed to delete integration ".concat(e.projectName,".")}):O()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})}}),activateRow:function(e){var n=e.cells[0].value;j.forEach(function(e){e.id==n&&k(e)})},activeSelector:S&&ti(S),rowSelectorKey:"id",colfilters:[]})]}):(0,m.jsx)(tt.Vs,{message:"No Requests Submitted"});return p?(0,m.jsx)(eV.Z,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("br",{}),(0,m.jsx)(to,{handleNewIntegrationClick:I,integrations:j}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),_]})}),tc=t(29201),tl=d.ZP.div.withConfig({displayName:"integrations__Column",componentId:"sc-1qdorvc-0"})(["display:flex;flex-direction:column;flex-basis:100%;flex:1;"]),tu=function(e){e.session;var n,t=(0,n7.useRouter)(),r=(0,u.useState)(null),a=r[0],i=r[1],o=(0,u.useState)(1),c=o[0],d=o[1],h=(0,u.useState)(!1),p=h[0],f=h[1],x="integration-failed-modal",g=(n=(0,s.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.location.hash=x);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),v=(0,u.useState)(""),b=v[0],j=v[1];return(0,u.useEffect)(function(){var e;j(t.query.requestId),(null==t||null===(e=t.query)||void 0===e?void 0:e.integrationFailedMessageModal)==="true"&&(f(!0),g())},[t.query.showModal]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tc.Z,{tab:"integrations",leftPanel:function(){return(0,m.jsx)(ts,{setIntegration:i,setIntegrationCount:d})},rightPanel:function(){return a&&(0,m.jsx)(n6,{integration:a})},showResizable:c>0}),(0,m.jsx)(G.Z,{id:x,openModal:p,handleClose:function(){return f(!1)},title:"".concat(b," - Integration request failed"),content:(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:(0,m.jsx)("p",{children:"The integration request could not be completed. Please contact the Pathfinder SSO Team."})}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[(0,m.jsx)(tl,{children:(0,m.jsx)("div",{children:(0,m.jsxs)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",style:{color:"#0d6efd"},children:[(0,m.jsx)(w.G,{size:"1x",icon:C.Z6I,color:"#0d6efd"})," Rocketchat"]})})}),(0,m.jsx)(tl,{children:(0,m.jsx)("div",{children:(0,m.jsxs)("a",{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",style:{color:"#0d6efd"},children:[(0,m.jsx)(w.G,{size:"1x",icon:C.FU$,color:"#0d6efd"})," Email"]})})})]})]}),showCancel:!1,showConfirm:!1,skipCloseOnConfirm:!0,closable:!0})]})}},90559:function(e,n,t){"use strict";t.d(n,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),a=document.createElement("a");a.href=r,a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(1214)}])}},function(e){e.O(0,[662,302,130,930,479,979,528,680,734,888,774,179],function(){return e(e.s=80382)}),_N_E=e.O()}]);