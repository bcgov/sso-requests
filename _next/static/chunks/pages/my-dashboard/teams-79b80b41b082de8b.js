(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{91296:function(e,t,n){var r=0/0,a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),m=Object.prototype.toString,f=Math.max,p=Math.min,now=function(){return u.Date.now()};function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function toNumber(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==m.call(t))return r;if(isObject(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=isObject(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var c=o.test(e);return c||s.test(e)?l(e.slice(2),c?2:8):i.test(e)?r:+e}e.exports=function(e,t,n){var r,a,i,o,s,l,c=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function invokeFunc(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function shouldInvoke(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||u&&r>=i}function timerExpired(){var e,n,r,a=now();if(shouldInvoke(a))return trailingEdge(a);s=setTimeout(timerExpired,(e=a-l,n=a-c,r=t-e,u?p(r,i-n):r))}function trailingEdge(e){return(s=void 0,m&&r)?invokeFunc(e):(r=a=void 0,o)}function debounced(){var e,n=now(),i=shouldInvoke(n);if(r=arguments,a=this,l=n,i){if(void 0===s)return c=e=l,s=setTimeout(timerExpired,t),d?invokeFunc(e):o;if(u)return s=setTimeout(timerExpired,t),invokeFunc(l)}return void 0===s&&(s=setTimeout(timerExpired,t)),o}return t=toNumber(t)||0,isObject(n)&&(d=!!n.leading,i=(u="maxWait"in n)?f(toNumber(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),debounced.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=a=s=void 0},debounced.flush=function(){return void 0===s?o:trailingEdge(now())},debounced}},97935:function(e,t,n){"use strict";var r,a=n(71383),i=n(71893).ZP.span(r||(r=(0,a.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"])));t.Z=i},30105:function(e,t,n){"use strict";var r,a=n(16835),i=n(50029),o=n(71383),s=n(87794),l=n.n(s),c=n(67294),d=n(10908),u=n(71893),m=n(10170),f=n(42894),p=n(60915),h=n(97935),x=n(97682),b=n(20839),v=n(85893),g=u.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]))),j={idirEmail:"",role:"member",id:new Date().getTime()};t.Z=(0,p.hU)(function(e){var t,n=e.onSubmit,r=e.alert,o=e.setOpenCreateTeamModal,s=((0,c.useContext)(b.SessionContext)||{}).session,u=(0,c.useState)([j]),p=u[0],y=u[1],w=(0,c.useState)(""),Z=w[0],S=w[1],C=(0,c.useState)(!1),k=C[0],O=C[1],P=(0,c.useState)(null),T=P[0],E=P[1],A=(t=(0,i.Z)(l().mark(function _callee(){var e,t,i,c,d,u,f,h,b;return l().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=s,t={name:Z,members:p},i=(0,x.p)(t,e.email),d=(c=(0,a.Z)(i,2))[0],u=c[1],!d){l.next=5;break}return l.abrupt("return",E(u));case 5:return O(!0),l.next=8,(0,m.Cm)(t);case 8:if(f=l.sent,b=(h=(0,a.Z)(f,2))[0],h[1]?r.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to create team. Please try again."}):r.show({variant:"success",fadeOut:1e4,closable:!0,content:"Team ".concat(Z," successfully created")}),!b){l.next=16;break}return l.next=16,n(b.id);case 16:y([j]),S(""),O(!1),E(null),o(!1);case 21:case"end":return l.stop()}},_callee)})),function(){return t.apply(this,arguments)});return(0,v.jsxs)("div",{children:[(0,v.jsx)(d.default,{label:"Team Name",onChange:function(e){S(e.target.value)},maxLength:"255","data-testid":"team-name",value:Z}),T&&T.name&&(0,v.jsx)(h.Z,{children:null==T?void 0:T.name}),(0,v.jsx)("br",{}),(0,v.jsx)("strong",{children:"Team Members"}),(0,v.jsx)(x.Z,{errors:T,members:p,setMembers:y,currentUser:s}),(0,v.jsxs)(g,{children:[(0,v.jsx)("button",{className:"secondary",onClick:function(){y([j]),S(""),O(!1),E(null),o(!1)},children:"Cancel"}),(0,v.jsx)("button",{className:"primary",type:"button",onClick:A,"data-testid":"send-invitation",children:k?(0,v.jsx)(f.rj,{color:"#FFF",height:18,width:50,visible:k}):"Send Invitation"})]})]})})},97682:function(e,t,n){"use strict";n.d(t,{p:function(){return validateTeam}});var r,a,i,o,s,l,c,d,u,m,f=n(59499),p=n(27812),h=n(71383);n(67294);var x=n(10908),b=n(35611),v=n(71893),g=n(48966),j=n.n(g),y=n(99603),w=n(59417),Z=n(97935),S=n(74150),C=n(61864),k=n(35685),O=n(16530),P=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=v.ZP.div(r||(r=(0,h.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 10px;\n  grid-gap: 0 1em;\n"]))),E=(0,v.ZP)(b.default)(a||(a=(0,h.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n    ","\n  }\n"])),function(e){return e.readOnlyRole?"padding-left:6px;":""}),A=v.ZP.div(i||(i=(0,h.Z)(["\n  border-bottom: 1px solid black;\n  grid-column: 1 / 3;\n"]))),M=v.ZP.span(o||(o=(0,h.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),D=v.ZP.section(s||(s=(0,h.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n  padding-left: 1em;\n"]))),N=(0,v.ZP)(T)(l||(l=(0,h.Z)(["\n  grid-template-columns: 2.2fr 0.9fr 1.2fr;\n  align-items: start;\n  margin-bottom: 20px;\n  .email-select > .select-inner__control {\n    padding: 0.13em 0;\n    border: 2px solid #606060;\n    visibility: inherit;\n\n    &:focus-within {\n      outline: 4px solid #3b99fc !important;\n      outline-offset: 2px !important;\n    }\n  }\n"]))),_=(0,v.ZP)(y.G)(c||(c=(0,h.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]))),R=(0,v.ZP)(y.G)(d||(d=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n"]))),I=(0,v.ZP)(y.G)(u||(u=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n  color: white;\n  background-color: black;\n"]))),F=v.ZP.p(m||(m=(0,h.Z)(["\n  font-style: italic;\n  font-size: 0.95em;\n"]))),validateTeam=function(e,t){var n={name:null,members:[]};return e.name||(n.name="Please enter a name"),e.members.forEach(function(r,a){r.idirEmail?j().isEmail(r.idirEmail)?(e.members.filter(function(e){return e.idirEmail===r.idirEmail}).length>1||r.idirEmail===t)&&(n.members[a]="Please use unique email"):n.members[a]="Please enter a valid email":n.members[a]="Please enter an email"}),[n.name||n.members.length>0,n]};t.Z=function(e){var t=e.errors,n=e.members,r=e.setMembers,a=e.allowDelete,i=void 0===a||a,o=e.currentUser,s=void 0===o?null:o,handleEmailChange=function(e,t){var a=_objectSpread({},n[t]);a.idirEmail=(null==e?void 0:e.label.toLowerCase())||"";var i=(0,p.Z)(n);i[t]=a,r(i)},handleRoleChange=function(e,t){var a=_objectSpread({},n[e]);a.role=t.target.value;var i=(0,p.Z)(n);i[e]=a,r(i)},handleMemberDelete=function(e){r(n.filter(function(t,n){return n!==e}))};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:["Enter your team member’s government email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,P.jsx)("strong",{children:"2 business days"}),"."]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"strong",children:"Roles:"}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(I,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Admins"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"managing"})," powers"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(R,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Members"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"viewing"})," powers"]})]}),(0,P.jsx)("br",{}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{className:"underline",children:(0,P.jsx)(S.default,{external:!0,href:(0,C.eO)("CSS-App-My-Teams#ive-created-a-team-now-what"),children:"View a detailed breakdown of roles on our wiki page"})})})]}),(0,P.jsxs)(D,{children:[(0,P.jsxs)(T,{children:[(0,P.jsx)("strong",{children:"Member"}),(0,P.jsx)("strong",{children:"Role"}),(0,P.jsx)(A,{})]}),(0,P.jsx)(F,{children:"*Please enter email address tied to an IDIR to allow your user to login"}),s&&(0,P.jsxs)(N,{children:[(0,P.jsx)(x.default,{value:(null==s?void 0:s.email)||"",readOnly:!0,fullWidth:!0}),(0,P.jsx)(E,{label:"Role",disabled:!0,value:"admin",readOnlyRole:!0,children:(0,P.jsx)("option",{value:"admin",children:"Admin"})})]}),n.map(function(e,n){return(0,P.jsxs)(N,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(k.Z,{loadOptions:O.c,onChange:function(e){return handleEmailChange(e,n)},noOptionsMessage:function(){return"Start typing email..."},className:"email-select",menuPlacement:"top",maxMenuHeight:120,classNamePrefix:"select-inner",placeholder:"Enter email address"}),t&&t.members&&t.members[n]&&(0,P.jsx)(Z.Z,{children:t.members[n]})]}),(0,P.jsxs)(E,{label:"Role",onChange:function(e){return handleRoleChange(n,e)},value:e.role,"data-testid":"user-role",children:[(0,P.jsx)("option",{value:"member",children:"Member"}),(0,P.jsx)("option",{value:"admin",children:"Admin"})]}),n>=0&&i&&(0,P.jsx)(_,{icon:w.uMC,onClick:function(){return handleMemberDelete(n)},title:"Delete","data-testid":"delete-user-role"})]},e.id)}),(0,P.jsxs)(M,{onClick:function(){r([].concat((0,p.Z)(n),[{idirEmail:"",role:"member",id:new Date().getTime(),pending:!0}]))},children:[(0,P.jsx)(y.G,{style:{color:"#006fc4"},icon:w.KtF,title:"Add Item","data-testid":"add-user-role"}),(0,P.jsx)("span",{children:"Add another team member"})]})]})]})}},40343:function(e,t,n){"use strict";var r,a=n(71383);n(67294);var i=n(11163),o=n(46312),s=n(71893),l=n(85330),c=n(79858),d=n(14493),u=n(85893),m=s.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));t.Z=function(e){var t=e.tab,n=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var s=(0,i.useRouter)(),f=(0,u.jsxs)(l.mQ,{onChange:function(e){s.replace("/my-dashboard/".concat(e))},activeKey:t,tabBarGutter:30,children:[(0,u.jsx)(l.OK,{tab:"My Projects"},"integrations"),(0,u.jsx)(l.OK,{tab:"My Teams"},"teams")]});return(0,u.jsxs)(c.Z,{rules:d.F,children:[f,void 0===a||a?(0,u.jsx)(o.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,u.jsx)(m,{children:n&&n()})}):n&&n(),(0,u.jsx)("br",{}),r&&r()]})}},48270:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return teams}});var r,a,i,o,s,l,c,d,u,m,f,p,h,x,b,v,g,j,y,w=n(16835),Z=n(50029),S=n(87794),C=n.n(S),k=n(67294),O=n(40343),P=n(59499),T=n(71383),E=n(11163),A=n(71893),M=n(85330),D=n(75913),N=n(35611),_=n(28084),R=n(97682),I=n(88669),F=n(10170),U=n(60915),H=n(76457),B=n(99603),K=n(59417),z=n(32581),G=n(89928),L=n(85893),q=(0,A.ZP)(B.G)(r||(r=(0,T.Z)(["\n  color: #ff0303;\n"]))),W=A.ZP.div(a||(a=(0,T.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"]))),WarningModalContents=function(e){var t=e.title,n=e.content,r=e.note;return(0,L.jsxs)(W,{children:[(0,L.jsx)(q,{icon:K.RLE,size:"3x"}),(0,L.jsxs)("div",{children:[t&&(0,L.jsx)("strong",{children:t}),n&&(0,L.jsx)("p",{children:n}),r&&(0,L.jsx)("i",{children:r})]})]})},Y=n(52586),$=n(64735),V=n(42894),X=n(32997),J=A.ZP.div(i||(i=(0,T.Z)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"]))),Q=(0,A.ZP)(B.G)(o||(o=(0,T.Z)(["\n  cursor: ",";\n  ","\n  ",";\n"])),function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"color: #CACACA;":"color: inherit; &:hover { color: ".concat(e.activeColor||"#000","; }")},function(e){return e.isUnread?"color: ".concat(X.Uo):""});function ServiceAccountActionbuttons(e){var t=e.copyOrDownloadAction,n=e.showDeleteModal,r=e.showUpdateModal,a=e.actionsDisabled;return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(J,{children:[(0,L.jsx)(Q,{icon:K.kZ_,role:"button","aria-label":"copy",onClick:function(){return t(!1)},title:"Copy to clipboard",size:"lg",disabled:a}),(0,L.jsx)(Q,{icon:K.q7m,role:"button","aria-label":"download",onClick:function(){return t(!0)},title:"Download",size:"lg",disabled:a}),(0,L.jsx)(Q,{icon:K.lUd,role:"button","aria-label":"download",onClick:r,title:"Update secret",size:"lg",disabled:a}),(0,L.jsx)(Q,{icon:K.$aW,role:"button","aria-label":"delete",onClick:n,title:"Delete",size:"lg",disabled:a})]})})}A.ZP.div(s||(s=(0,T.Z)(["\n  height: 40px;\n  border-right: 2px solid #e3e3e3;\n"])));var ee=n(38447),et=A.ZP.td(l||(l=(0,T.Z)(["\n  float: right;\n"])));(0,A.ZP)(B.G)(c||(c=(0,T.Z)(["\n  color: #000000;\n"])));var en=A.ZP.div(d||(d=(0,T.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));function ActionsHeader(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"2.7em"},children:"Actions"})}A.ZP.div(u||(u=(0,T.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"])));var er=(0,U.hU)(function(e){var t,n,r,a=e.team,i=e.selectedServiceAccount,o=e.setSelectedServiceAccount,s=e.teamServiceAccounts,l=e.getTeamServiceAccounts,c=e.alert,d=(0,k.useState)(!1),u=d[0],m=d[1],f=(0,k.useState)(!1),p=f[0],h=f[1],x=(0,k.useState)(!1),b=x[0],v=x[1],checkDisabled=function(e){return e&&(null==e?void 0:e.status)!=="applied"&&!(null!=e&&e.archived)},handleDelete=function(){checkDisabled(i)||h(!0)},g=(t=(0,Z.Z)(C().mark(function _callee(){var e,t;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,F.yN)(a.id,null==i?void 0:i.id);case 2:if(e=n.sent,(t=(0,w.Z)(e,2))[0],!t[1]){n.next=9;break}return c.show({variant:"danger",content:"Failed to delete service account, please try again."}),n.abrupt("return");case 9:l(a.id);case 10:case"end":return n.stop()}},_callee)})),function(){return t.apply(this,arguments)}),handleUpdate=function(){checkDisabled(i)||m(!0)},j=(n=(0,Z.Z)(C().mark(function _callee2(){var e,t;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,F.Gc)(a.id,null==i?void 0:i.id);case 2:e=n.sent,(t=(0,w.Z)(e,2))[0],t[1]&&c.show({variant:"danger",content:"Failed to update secret, please try again."});case 7:case"end":return n.stop()}},_callee2)})),function(){return n.apply(this,arguments)}),y=(r=(0,Z.Z)(C().mark(function _callee3(e){var t,n,r,o,s,l;return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!checkDisabled(i)){d.next=2;break}return d.abrupt("return");case 2:return v(!0),d.next=5,(0,F.vM)(a.id,null==i?void 0:i.id);case 5:if(n=d.sent,o=(r=(0,w.Z)(n,2))[0],s=r[1],v(!1),!s){d.next=13;break}return c.show({variant:"danger",content:"Failed to ".concat(e?"download":"copy",", please try again.")}),d.abrupt("return");case 13:o=o||{},l={tokenUrl:"".concat(o["token-url"]),clientId:"".concat(o.resource),clientSecret:"".concat(null===(t=o.credentials)||void 0===t?void 0:t.secret)},e?(0,ee.Di)((0,ee.ON)(l),"".concat(null==i?void 0:i.clientId,".json")):((0,ee.TE)((0,ee.ON)(l)),c.show({variant:"success",content:"Copied to clipboard",fadeOut:3e3}));case 16:case"end":return d.stop()}},_callee3)})),function(e){return r.apply(this,arguments)});return(0,L.jsxs)(L.Fragment,{children:[b?(0,L.jsx)(V.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}):(0,L.jsx)(D.Z,{headers:[{accessor:"id",Header:"API Account ID"},{accessor:"actions",Header:(0,L.jsx)(ActionsHeader,{}),disableSortBy:!0}],data:s.map(function(e){return{id:e.id,actions:(0,L.jsx)(et,{children:(0,L.jsx)(ServiceAccountActionbuttons,{copyOrDownloadAction:y,showUpdateModal:handleUpdate,showDeleteModal:handleDelete,actionsDisabled:!!checkDisabled(e)})})}}),colfilters:[],activateRow:function(e){var t=e.cells[0].row.original.id;s.forEach(function(e){e.id==t&&o(e)})},rowSelectorKey:"id"}),(0,L.jsx)(_.Z,{id:"update-service-account-secret-modal",title:"Request a new secret for CSS API Account",onConfirm:j,openModal:u,handleClose:function(){return m(!1)},content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(en,{children:(0,L.jsx)("strong",{children:"You are about to request a new secret for CSS API Account"})}),(0,L.jsx)("br",{}),(0,L.jsx)("p",{children:"Once the new secret gets generated, your previous secret will no longer be valid for any applications using it."}),(0,L.jsx)("p",{children:"This means any application using CSS API through this account should be configured with the new secret."})]}),buttonStyle:"primary",confirmText:"Confirm",closable:!0}),(0,L.jsx)(_.Z,{id:"delete-service-account-modal",title:"Delete CSS API Account",icon:null,onConfirm:g,openModal:p,handleClose:function(){return h(!1)},content:(0,L.jsx)(WarningModalContents,{title:"Are you sure that you want to delete this CSS API Account?",content:"Once you delete this CSS PI Account, this action cannot be undone."}),buttonStyle:"danger",confirmText:"Delete",closable:!0})]})}),ea=n(49269),ei=n(9206),eo=n(20839),es=n(61864);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var el=A.ZP.div(m||(m=(0,T.Z)(["\n  padding-left: 1rem;\n  ","\n"])),function(e){return"\n  margin-top: ".concat(e.marginTop||"0",";\n  margin-bottom: ").concat(e.marginBottom||"0",";\n  margin-left: ").concat(e.marginLeft||"0",";\n  margin-right: ").concat(e.marginRight||"0",";\n  ")}),ec=A.ZP.td(f||(f=(0,T.Z)(["\n  float: right;\n"]))),ed=A.ZP.td(p||(p=(0,T.Z)(["\n  text-align: left !important;\n"]))),eu=A.ZP.div(h||(h=(0,T.Z)(["\n  height: var(--field-top-spacing);\n"])));function RoleHeader(){return(0,L.jsxs)("span",{children:["Role\xa0",(0,L.jsx)(Y.Z,{title:"",content:'Admin: can manage integrations <span class="strong">and</span> teams. <br> Members: can <span class="strong">only</span> manage integrations.',hide:200})]})}function IntegrationActionsHeader(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"1.8em"},children:"Actions"})}function MembersActionsHeader(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"0.4em"},children:"Actions"})}var em={idirEmail:"",role:"member",pending:!0},ConfirmDeleteModal=function(e){var t=e.onConfirmDelete,n=e.type,r=e.openModal,a=e.handleClose,i={confirmText:"Delete",buttonStyle:"danger",openModal:r,handleClose:void 0===a?function(){}:a},o="",s="";switch(n){case"allow":o="Once they are deleted, they will no longer have access to the team's integrations.",s="Are you sure that you want to delete this team member?",i.onConfirm=t;break;case"notAllowed":o="Before you delete the last team admin, you must assign a new admin.",i.confirmText="Okay",i.buttonStyle="primary"}return(0,L.jsx)(_.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:"delete-member-modal",title:"Delete Team Member",icon:null,content:(0,L.jsx)(WarningModalContents,{content:o,title:s}),closable:!0},i))},ef=(0,A.ZP)(B.G)(x||(x=(0,T.Z)(["\n  margin-right: 10px;\n  &:hover {\n    cursor: pointer;\n  }\n"]))),RequestStatusIcon=function(e){var t=e.status;if(!t)return null;var n=K.RLE,r="black";return"draft"===t?(n=K.Xcf,r="#1a5a96"):"submitted"===t?(n=K.SZw,r="#fcba19"):["prFailed","applyFailed","planFailed"].includes(t)?(n=K.nYk,r="#ff0303"):"applied"===t&&(r="#2e8540",n=K.f8k),(0,L.jsx)(B.G,{icon:n,title:t,style:{color:r}})},MemberStatusIcon=function(e){var t,n,r,a=e.pending,i=e.invitationSendTime;if(!i)return null;var o=new Date().getTime()-new Date(i).getTime();return a&&o/864e5>2?(t=K.RLE,n="#ff0303",r="Invitation Expired"):a?(t=K.SZw,n="#fcba19",r="Invitation Sent"):(n="#2e8540",t=K.f8k,r="Active Member"),(0,L.jsx)(B.G,{icon:t,title:r,style:{color:n}})};A.ZP.div(b||(b=(0,T.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"]))),A.ZP.div(v||(v=(0,T.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"])));var ep=A.ZP.div(g||(g=(0,T.Z)(["\n  text-align: center;\n"]))),eh=(0,U.hU)(function(e){var t,n,r,a,i,o,s,l=e.alert,c=e.currentUser,d=e.team,u=e.loadTeams,m=(0,E.useRouter)(),f=(0,k.useState)([]),p=f[0],h=f[1],x=(0,k.useState)([]),b=x[0],v=x[1],g=(0,k.useState)([]),j=g[0],y=g[1],S=(0,k.useState)(null),O=S[0],P=S[1],T=(0,k.useState)(null),A=T[0],U=T[1],B=(0,k.useState)(null),q=B[0],W=B[1],Y=(0,k.useState)([em]),X=Y[0],J=Y[1],Q=(0,k.useState)(),ee=Q[0],et=Q[1],en=(0,k.useState)(!1),eh=en[0],ex=en[1],eb=(0,k.useState)(),ev=eb[0],eg=eb[1],ej=(0,k.useState)("allow"),ey=ej[0],ew=ej[1],eZ=(0,k.useContext)(eo.SurveyContext),eS=(0,k.useState)(!1),eC=eS[0],ek=eS[1],eO=(0,k.useState)(!1),eP=eO[0],eT=eO[1],eE=(t=(0,Z.Z)(C().mark(function _callee(e){var t,n,r,a,i,o,s,l,d,u;return C().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return ex(!0),m.next=3,Promise.all([(0,F.YY)(e),(0,I.H0)(e)]);case 3:return t=m.sent,r=(n=(0,w.Z)(t,2))[0],a=n[1],o=(i=(0,w.Z)(r,2))[0],s=i[1],d=(l=(0,w.Z)(a,2))[0],u=l[1],s||u?(h([]),W(null),v([])):(h(o),W(o.find(function(e){return e.idirEmail===c.email})),v(d||[])),m.next=12,eA(e);case 12:ex(!1);case 13:case"end":return m.stop()}},_callee)})),function(e){return t.apply(this,arguments)}),eA=(n=(0,Z.Z)(C().mark(function _callee2(e){var t,n,r;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ex(!0),"admin"!==d.role){a.next=11;break}return a.next=4,(0,F.Sx)(e);case 4:t=a.sent,r=(n=(0,w.Z)(t,2))[0],n[1]?y([]):(y(r),P(r&&r.length>0?r[0]:null)),a.next=13;break;case 11:y([]),P(null);case 13:ex(!1);case 14:case"end":return a.stop()}},_callee2)})),function(e){return n.apply(this,arguments)});(0,k.useEffect)(function(){U(null),eE(d.id)},[d.id]),(0,k.useEffect)(function(){O&&"applied"!==O.status&&!O.archived&&U(O)},[O]),(0,k.useEffect)(function(){return A&&"applied"!==A.status?(clearInterval(s),s=setInterval((0,Z.Z)(C().mark(function _callee3(){var e,t,n;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,F.ZT)(d.id,A.id);case 2:e=r.sent,n=(t=(0,w.Z)(e,2))[0],t[1]?clearInterval(s):U(n);case 7:case"end":return r.stop()}},_callee3)})),5e3)):(eA(d.id),U(null)),function(){s&&clearInterval(s)}},[A]);var handleDeleteClick=function(e){e&&((0,z.Wv)(p,e)?ew("allow"):ew("notAllowed"),eg(e),eT(!0))},eM=(r=(0,Z.Z)(C().mark(function _callee4(){var e,t,n,r,a;return C().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=(0,R.p)({name:d.name,members:X},c.email),n=(t=(0,w.Z)(e,2))[0],r=t[1],!n){i.next=4;break}return et(r),i.abrupt("return");case 4:return i.next=6,(0,F.yG)({members:X,id:d.id});case 6:if(a=i.sent,!(0,w.Z)(a,2)[1]){i.next=13;break}l.show({variant:"danger",fadeOut:1e4,closable:!0,content:es.sY.ADD_TEAM_MEMBERS_ERROR}),i.next=18;break;case 13:return i.next=15,eE(d.id);case 15:J([em]),window.location.hash="",l.show({variant:"success",fadeOut:1e4,closable:!0,content:es.sY.ADD_TEAM_MEMBERS_SUCCESS});case 18:case"end":return i.stop()}},_callee4)})),function(){return r.apply(this,arguments)}),eD=(a=(0,Z.Z)(C().mark(function _callee5(){var e,t,n;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!ev||!d.id)){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,(0,F.MH)(Number(ev),d.id);case 4:e=r.sent,(0,w.Z)(e,2)[1]?l.show({variant:"danger",fadeOut:1e4,closable:!0,content:es.sY.DELETE_TEAM_MEMBER_ERROR}):(h(p.filter(function(e){return e.id!==ev})),n=null===(t=p.find(function(e){return e.id===ev}))||void 0===t?void 0:t.idirEmail,l.show({variant:"success",fadeOut:1e4,closable:!0,content:"".concat(n," has successfully been deleted.")}));case 8:case"end":return r.stop()}},_callee5)})),function(){return a.apply(this,arguments)}),viewProject=function(e){m.push({pathname:"/my-dashboard/integrations",query:{integr:e}})},eN=(i=(0,Z.Z)(C().mark(function _callee6(e){var t;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(d.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,(0,F.rU)(e,d.id);case 4:t=n.sent,(0,w.Z)(t,2)[1]?l.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to resend invitation."}):l.show({variant:"success",fadeOut:1e4,closable:!0,content:"Sent new invitation for team member ".concat(e.idirEmail)});case 8:case"end":return n.stop()}},_callee6)})),function(e){return i.apply(this,arguments)}),e_=(o=(0,Z.Z)(C().mark(function _callee7(e,t){var n,r,a;return C().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,F.zZ)(d.id,e,{role:t});case 2:if(n=i.sent,a=(r=(0,w.Z)(n,2))[0],!r[1]){i.next=9;break}return l.show({variant:"danger",content:"Failed to update user role. Please try again."}),i.abrupt("return");case 9:h(p.map(function(t){return t.id===e?a:t})),l.show({variant:"success",fadeOut:1e4,closable:!0,content:"Member role updated successfully"});case 12:case"end":return i.stop()}},_callee7)})),function(e,t){return o.apply(this,arguments)});if(!d||!q)return null;var eR="admin"===q.role;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("h2",{children:"Team Details"}),(0,L.jsxs)(M.mQ,{defaultActiveKey:"members",tabBarGutter:30,children:[(0,L.jsx)(M.OK,{tab:"Members",children:(0,L.jsxs)(el,{children:[eR?(0,L.jsx)("button",{className:"primary",style:{margin:"1rem 0"},onClick:function(){return ek(!0)},"data-testid":"add-new-team-member",children:"+ Add New Team Members"}):(0,L.jsx)("br",{}),(0,L.jsx)(H.Z,{type:"text",rows:7,ready:!eh,style:{marginTop:"20px"},children:(0,L.jsx)(D.Z,{"data-testid":"team-members-table",variant:"medium",headers:[{accessor:"status",Header:"Invite Status",disableSortBy:!0},{accessor:"idirEmail",Header:"Email"},{accessor:"role",Header:(0,L.jsx)(RoleHeader,{}),disableSortBy:!0},{accessor:"actions",Header:(0,L.jsx)(MembersActionsHeader,{}),disableSortBy:!0}],data:p.map(function(e){var t=eR&&q.id!==e.id;return{status:(0,L.jsx)(MemberStatusIcon,{pending:e.pending,invitationSendTime:e.createdAt}),idirEmail:e.idirEmail,role:t&&!e.pending?(0,L.jsxs)(N.default,{onChange:function(t){return e_(e.id,t.target.value)},value:e.role,children:[(0,L.jsx)("option",{value:"member",children:"Member"}),(0,L.jsx)("option",{value:"admin",children:"Admin"})]}):(0,z.kC)(e.role),actions:(0,L.jsxs)(ec,{children:[t&&e.pending&&(0,L.jsx)(ef,{icon:K.zBy,size:"lg",onClick:function(){return eN(e)},title:"Resend Invitation",style:{marginRight:"6px"},"data-testid":"resend-invitation"}),t&&(0,L.jsx)(ef,{icon:K.$aW,onClick:function(){return handleDeleteClick(e.id)},size:"lg",title:"Delete User",style:{marginRight:"16px"},"data-testid":"delete-member"})]})}}),colfilters:[],rowSelectorKey:"status",readOnly:!0})})]})},"members"),(0,L.jsx)(M.OK,{tab:"Integrations",children:(0,L.jsx)(el,{marginTop:"20px",children:(0,L.jsx)(H.Z,{type:"text",rows:7,ready:!eh,style:{marginTop:"20px"},children:(0,L.jsx)(D.Z,{variant:"medium",headers:[{accessor:"status",Header:"Status",disableSortBy:!0},{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"actions",Header:(0,L.jsx)(IntegrationActionsHeader,{}),disableSortBy:!0}],data:(null==b?void 0:b.length)>0?null==b?void 0:b.map(function(e){return{status:(0,L.jsx)(RequestStatusIcon,{status:null==e?void 0:e.status}),id:e.id,projectName:e.projectName,actions:(0,L.jsx)(ec,{children:(0,L.jsx)(G.ZP,{request:e,onDelete:function(){u(),eE(null==d?void 0:d.id)},children:(0,L.jsx)(G.Kk,{icon:K.Mdf,"aria-label":"view",onClick:function(){return viewProject(e.id)},size:"lg"})})})}}):[],readOnly:!0,colfilters:[],rowSelectorKey:"status",noDataFoundElement:(0,L.jsxs)(ed,{colSpan:5,children:[(0,L.jsx)("br",{}),"There are no integrations for this team yet.",(0,L.jsx)("br",{}),(0,L.jsx)("br",{}),"To add this team to an ",(0,L.jsx)("span",{className:"strong",children:"existing integration"}),":",(0,L.jsx)("span",{className:"line-height-200"}),(0,L.jsxs)("ol",{children:[(0,L.jsxs)("li",{children:["Go to your"," ",(0,L.jsx)("span",{className:"text-blue",children:(0,L.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,L.jsx)("li",{children:"Select the “pencil” icon to edit the integration"}),(0,L.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]}),(0,L.jsx)("br",{}),"To add this team to a ",(0,L.jsx)("span",{className:"strong",children:"new integration"}),":",(0,L.jsx)("span",{className:"line-height-200"}),(0,L.jsxs)("ol",{children:[(0,L.jsxs)("li",{children:["Go to your"," ",(0,L.jsx)("span",{className:"text-blue",children:(0,L.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,L.jsx)("li",{children:"Select “+ Request SSO Integration”"}),(0,L.jsx)("li",{children:"Select “Yes” to allow multiple team members to manage the integration"}),(0,L.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]})]})})})})},"integrations"),eR&&(0,L.jsx)(M.OK,{tab:"CSS API Account",children:(0,L.jsx)(el,{marginTop:"10px",children:eh?(0,L.jsxs)(ep,{children:[(0,L.jsx)(eu,{}),(0,L.jsx)(V.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,L.jsxs)($.ZP,{cols:10,children:[(0,L.jsxs)($.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,L.jsx)($.ZP.Col,{span:4,children:j.length>0?(0,L.jsx)(er,{team:d,selectedServiceAccount:O,setSelectedServiceAccount:P,teamServiceAccounts:j,getTeamServiceAccounts:eA}):(0,L.jsx)("button",{style:{marginBottom:10},onClick:(0,Z.Z)(C().mark(function _callee8(){var e,t,n;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return ex(!0),r.next=3,(0,F.rl)(d.id);case 3:e=r.sent,(t=(0,w.Z)(e,2))[0],(n=t[1])?(ex(!1),l.show({variant:"danger",fadeOut:1e4,closable:!0,content:n})):(null==eZ||eZ.setShowSurvey(!0,"cssApiRequest"),eA(d.id));case 8:case"end":return r.stop()}},_callee8)})),className:"primary",children:"+ Request CSS API Account"})}),(0,L.jsx)($.ZP.Col,{span:6,children:A&&(0,L.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,L.jsx)("div",{style:{padding:5},children:(0,L.jsxs)(ea.B,{children:["Your request for an API account could not be completed. Please"," ",(0,L.jsx)(ei.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})]}),j.length>0&&(0,L.jsx)($.ZP.Row,{children:(0,L.jsxs)(ea.$,{children:["For more information on how to use the CSS API Account with your integrations,"," ",(0,L.jsx)(ei.rU,{href:"".concat(es.UN,"/integrating-your-application/css-app-api"),external:!0,children:"click to learn more on our wiki page"}),"."]})})]})})},"service-accounts")]}),(0,L.jsx)(_.Z,{id:"add-member-modal",openModal:eC,handleClose:function(){et(null),J([em]),ek(!1)},title:"Add a New Team Member",icon:null,content:(0,L.jsx)(R.Z,{members:X,setMembers:J,allowDelete:eR,errors:ee,currentUser:c}),onConfirm:eM,buttonStyle:"primary",skipCloseOnConfirm:!0,closable:!0}),(0,L.jsx)(ConfirmDeleteModal,{onConfirmDelete:eD,type:ey,openModal:eP,handleClose:function(){return eT(!1)}})]})}),ex=n(30105),eb=n(10908),ev=n(97935),eg=A.ZP.div(j||(j=(0,T.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"])));function EditTeamNameForm(e){var t,n=e.onSubmit,r=e.teamId,a=e.initialTeamName,i=e.setOpenEditTeamModal,o=(0,k.useState)(""),s=o[0],l=o[1],c=(0,k.useState)(!1),d=c[0],u=c[1],m=(0,k.useState)(),f=m[0],p=m[1],h=(0,k.useState)(!1),x=h[0],b=h[1];(0,k.useEffect)(function(){l(a)},[a]);var validateTeam=function(e){var t={members:[]},n=!1;return(e.name.trim()||(t.name="Please enter a name",n=!0),n)?t:(p(void 0),null)},v=(t=(0,Z.Z)(C().mark(function _callee(){var e,t,a;return C().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(b(!1),!(t=validateTeam(e={name:s.trim(),id:r}))){o.next=5;break}return o.abrupt("return",p(t));case 5:return u(!0),o.next=8,(0,F.w2)(e);case 8:if(a=o.sent,!(0,w.Z)(a,2)[1]){o.next=15;break}return b(!0),u(!1),o.abrupt("return");case 15:return o.next=17,n();case 17:u(!1),i(!1);case 19:case"end":return o.stop()}},_callee)})),function(){return t.apply(this,arguments)});return(0,L.jsxs)("div",{children:[(0,L.jsx)(eb.default,{label:"New Team Name",onChange:function(e){l(e.target.value)},value:s,"data-testid":"edit-name"}),f&&f.name&&(0,L.jsx)(ev.Z,{children:null==f?void 0:f.name}),x&&(0,L.jsx)(ev.Z,{children:"Failed to update team name"}),(0,L.jsx)("br",{}),(0,L.jsxs)(eg,{children:[(0,L.jsx)("button",{className:"secondary",onClick:function(){l(a),i(!1)},style:{marginRight:"20px"},"data-testid":"cancel-edit-name",children:"Cancel"}),(0,L.jsx)("button",{className:"primary",type:"button",onClick:v,"data-testid":"save-edit-name",children:d?(0,L.jsx)(V.rj,{color:"#FFF",height:18,width:50,visible:d}):"Save"})]})]})}var ej=n(1389),ey=n(29519),ew=n(34798),eZ=n.n(ew);function TeamActionButtons(e){var t=e.team,n=e.showEditTeamNameModal,r=e.showDeleteModal,a=(0,ey.te)(t),i=(0,ey.VV)(t);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(G.c4,{children:[(0,L.jsx)(G.Kk,{disabled:!i,icon:K.Xcf,role:"button","aria-label":"edit",title:"Edit",size:"lg",onClick:function(){return i?n(t):eZ()},"data-testid":"edit-team-button"}),(0,L.jsx)(G.Kk,{disabled:!a,icon:K.$aW,role:"button","aria-label":"delete",title:"Delete",size:"lg",onClick:function(){return a?r(t):eZ()},style:{marginLeft:"7px"},"data-testid":"delete-team-button"})]})})}var eS=n(82500),eC=A.ZP.tr(y||(y=(0,T.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"])));function TeamListActionsHeader(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var NewEntityButton=function(e){var t=e.handleNewTeamClick;return(0,L.jsx)("button",{onClick:t,className:"callout",children:"+ Create a New Team"})},ek=(0,U.hU)(function(e){var t,n,r,a,i=e.currentUser,o=e.setTeam,s=e.loading,l=e.teams,c=e.loadTeams,d=e.hasError,u=e.alert,m=(0,k.useState)(null),f=m[0],p=m[1],h=(0,k.useState)(void 0),x=h[0],b=h[1],v=(0,k.useState)([]),g=v[0],j=v[1],y=(0,k.useState)(!1),S=y[0],O=y[1],P=(0,k.useState)(!1),T=P[0],E=P[1],A=(0,k.useState)(!1),M=A[0],N=A[1],R=(0,k.useState)(!1),I=R[0],U=R[1],H=(0,k.useState)(!1),B=H[0],K=H[1],z=(t=(0,Z.Z)(C().mark(function _callee(e){return C().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p(e),b(null==e?void 0:e.id),o(e),!e){t.next=7;break}return t.next=6,G(e.id);case 6:K(f&&0===Number(f.integrationCount)||!1);case 7:case"end":return t.stop()}},_callee)})),function(e){return t.apply(this,arguments)}),G=(n=(0,Z.Z)(C().mark(function _callee2(e){var t,n,r;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if((null==f?void 0:f.role)!=="admin"){a.next=13;break}return a.next=3,(0,F.Sx)(e);case 3:if(t=a.sent,r=(n=(0,w.Z)(t,2))[0],!n[1]){a.next=10;break}return u.show({variant:"danger",content:"Failed to load service accounts for team. Please refresh."}),a.abrupt("return");case 10:j(r),a.next=14;break;case 13:j([]);case 14:case"end":return a.stop()}},_callee2)})),function(e){return n.apply(this,arguments)});(0,k.useEffect)(function(){(null==l?void 0:l.length)>0?x&&l.find(function(e){return e.id===x})||z(l[0]):z(null)},[l]);var q=(r=(0,Z.Z)(C().mark(function _callee3(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(!0));case 1:case"end":return e.stop()}},_callee3)})),function(){return r.apply(this,arguments)}),showDeleteModal=function(e){O(!1),z(e),x===e.id&&U(!0)},showEditTeamNameModal=function(e){z(e),N(!0)},W=d?(0,L.jsx)(eS.q1,{}):l&&(null==l?void 0:l.length)!==0?(0,L.jsx)(D.Z,{headers:[{accessor:"name",Header:"Team Name"},{accessor:"actions",Header:(0,L.jsx)(TeamListActionsHeader,{}),disableSortBy:!0}],data:l&&l.map(function(e){return{teamId:e.id,name:e.name,actions:(0,L.jsx)(eC,{children:(0,L.jsx)(TeamActionButtons,{team:e,showEditTeamNameModal:showEditTeamNameModal,showDeleteModal:showDeleteModal})})}}),activateRow:function(e){var t=e.cells[0].row.original.teamId;l.forEach(function(e){e.id==t&&z(e)})},rowSelectorKey:"teamId",activeSelector:x,colfilters:[]}):(0,L.jsx)(eS.Vs,{message:"You have not been added to any teams yet."}),Y=(a=(0,Z.Z)(C().mark(function _callee4(){var e,t;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(O(!1),B){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,F.fC)(x);case 5:e=n.sent,(t=(0,w.Z)(e,2))[0],t[1]?O(!0):c();case 10:case"end":return n.stop()}},_callee4)})),function(){return a.apply(this,arguments)});return s?(0,L.jsx)(ej.Z,{}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("br",{}),(0,L.jsx)(NewEntityButton,{handleNewTeamClick:q}),(0,L.jsx)("br",{}),(0,L.jsx)("br",{}),W,(0,L.jsx)(_.Z,{id:es.zw,title:"Create a New Team",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,L.jsx)(ex.Z,{onSubmit:c,currentUser:i,setOpenCreateTeamModal:E}),showCancel:!1,showConfirm:!1,openModal:T,handleClose:function(){return E(!1)},closable:!0}),(0,L.jsx)(_.Z,{id:es.HW,title:"Edit Team Name",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,L.jsx)(EditTeamNameForm,{onSubmit:c,teamId:x,initialTeamName:(null==f?void 0:f.name)||"",setOpenEditTeamModal:N}),showCancel:!1,showConfirm:!1,openModal:M,handleClose:function(){return N(!1)},closable:!0}),(0,L.jsx)(_.Z,{id:es.aS,title:"Delete team",icon:null,onConfirm:Y,content:(0,L.jsxs)("div",{children:[(0,L.jsx)(WarningModalContents,{title:"Are you sure that you want to delete this team?",content:B?"Once you delete this team, this action cannot be undone.":"Before you delete this team, you will need to delete the integration(s) the team is responsible for.",note:B&&g.length>0?"*By deleting this team, you are also deleting the CSS App API Account that belongs to this team.":""}),S&&(0,L.jsx)(ev.Z,{children:"Failed to delete. Please try again"})]}),buttonStyle:"danger",confirmText:B?"Delete Team":"Okay",openModal:I,handleClose:function(){return U(!1)},closable:!0})]})}),teams=function(e){var t,n=e.session,r=(0,k.useState)(!0),a=r[0],i=r[1],o=(0,k.useState)(!1),s=o[0],l=o[1],c=(0,k.useState)(null),d=c[0],u=c[1],m=(0,k.useState)([]),f=m[0],p=m[1],h=(t=(0,Z.Z)(C().mark(function _callee(){var e,t,n;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i(!0),r.next=3,(0,F.Dc)();case 3:e=r.sent,n=(t=(0,w.Z)(e,2))[0],l(!!t[1]),p(n||[]),i(!1);case 10:case"end":return r.stop()}},_callee)})),function(){return t.apply(this,arguments)});return(0,k.useEffect)(function(){h()},[]),(0,L.jsx)(O.Z,{tab:"teams",leftPanel:function(){return(0,L.jsx)(ek,{currentUser:n,setTeam:u,loading:a,teams:f,loadTeams:h,hasError:s})},rightPanel:function(){return d&&(0,L.jsx)(eh,{team:d,currentUser:n,loadTeams:h})}})}},38447:function(e,t,n){"use strict";n.d(t,{Di:function(){return downloadText},ON:function(){return prettyJSON},TE:function(){return copyTextToClipboard}});var prettyJSON=function(e){return JSON.stringify(e,void 0,2)},copyTextToClipboard=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy"),document.body.removeChild(t),!0}catch(e){return document.body.removeChild(t),!1}},downloadText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:n})),a=document.createElement("a");a.href=r,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},69137:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/teams",function(){return n(48270)}])},35685:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(2717),a=n(67294),i=n(28648),o=n(65342),s=n(28549),l=n(33417),c=n(70292),d=n(30138),u=n(17609),m=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];n(73935),n(73469);var f=(0,a.forwardRef)(function(e,t){var n,f,p,h,x,b,v,g,j,y,w,Z,S,C,k,O,P,T,E,A,M,D,N,_,R,I,F,U,H,B,K,z,G,L,q,W,Y,$,V,X,J,Q,ee,et,en,er,ea,ei,eo,es,el,ec=(f=void 0!==(n=e.defaultOptions)&&n,h=void 0!==(p=e.cacheOptions)&&p,x=e.loadOptions,e.options,b=e.isLoading,v=e.onInputChange,g=e.filterOption,y=(j=(0,d.Z)(e,m)).inputValue,w=(0,a.useRef)(void 0),Z=(0,a.useRef)(!1),S=(0,a.useState)(Array.isArray(f)?f:void 0),k=(C=(0,c.Z)(S,2))[0],O=C[1],P=(0,a.useState)(void 0!==y?y:""),E=(T=(0,c.Z)(P,2))[0],A=T[1],M=(0,a.useState)(!0===f),N=(D=(0,c.Z)(M,2))[0],_=D[1],R=(0,a.useState)(void 0),F=(I=(0,c.Z)(R,2))[0],U=I[1],H=(0,a.useState)([]),K=(B=(0,c.Z)(H,2))[0],z=B[1],G=(0,a.useState)(!1),q=(L=(0,c.Z)(G,2))[0],W=L[1],Y=(0,a.useState)({}),V=($=(0,c.Z)(Y,2))[0],X=$[1],J=(0,a.useState)(void 0),ee=(Q=(0,c.Z)(J,2))[0],et=Q[1],en=(0,a.useState)(void 0),ea=(er=(0,c.Z)(en,2))[0],ei=er[1],h!==ea&&(X({}),ei(h)),f!==ee&&(O(Array.isArray(f)?f:void 0),et(f)),(0,a.useEffect)(function(){return Z.current=!0,function(){Z.current=!1}},[]),eo=(0,a.useCallback)(function(e,t){if(!x)return t();var n=x(e,t);n&&"function"==typeof n.then&&n.then(t,function(){return t()})},[x]),(0,a.useEffect)(function(){!0===f&&eo(E,function(e){Z.current&&(O(e||[]),_(!!w.current))})},[]),es=(0,a.useCallback)(function(e,t){var n=(0,u.L)(e,t,v);if(!n){w.current=void 0,A(""),U(""),z([]),_(!1),W(!1);return}if(h&&V[n])A(n),U(n),z(V[n]),_(!1),W(!1);else{var r=w.current={};A(n),_(!0),W(!F),eo(n,function(e){Z&&r===w.current&&(w.current=void 0,_(!1),U(n),z(e||[]),W(!1),X(e?(0,l.Z)((0,l.Z)({},V),{},(0,s.Z)({},n,e)):V))})}},[h,eo,F,V,v]),el=q?[]:E&&F?K:k||[],(0,l.Z)((0,l.Z)({},j),{},{options:el,isLoading:N||void 0!==b&&b,onInputChange:es,filterOption:void 0===g?null:g})),ed=(0,o.u)(ec);return a.createElement(i.S,(0,r.Z)({ref:t},ed))})}},function(e){e.O(0,[925,936,620,326,240,774,888,179],function(){return e(e.s=69137)}),_N_E=e.O()}]);