(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{91296:function(e,t,n){var r=0/0,a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),m=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return d.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==m.call(t))return r;if(x(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=x(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var l=o.test(e);return l||s.test(e)?c(e.slice(2),l?2:8):i.test(e)?r:+e}e.exports=function(e,t,n){var r,a,i,o,s,c,l=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function v(t){var n=r,i=a;return r=a=void 0,l=t,o=e.apply(i,n)}function g(e){var n=e-c,r=e-l;return void 0===c||n>=t||n<0||d&&r>=i}function j(){var e,n,r,a=h();if(g(a))return y(a);s=setTimeout(j,(e=a-c,n=a-l,r=t-e,d?p(r,i-n):r))}function y(e){return(s=void 0,m&&r)?v(e):(r=a=void 0,o)}function w(){var e,n=h(),i=g(n);if(r=arguments,a=this,c=n,i){if(void 0===s)return l=e=c,s=setTimeout(j,t),u?v(e):o;if(d)return s=setTimeout(j,t),v(c)}return void 0===s&&(s=setTimeout(j,t)),o}return t=b(t)||0,x(n)&&(u=!!n.leading,i=(d="maxWait"in n)?f(b(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},w.flush=function(){return void 0===s?o:y(h())},w}},65363:function(e,t,n){"use strict";var r,a=n(71383),i=n(71893).ZP.span(r||(r=(0,a.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"])));t.Z=i},92109:function(e,t,n){"use strict";var r,a=n(16835),i=n(50029),o=n(71383),s=n(87794),c=n.n(s),l=n(67294),u=n(11915),d=n(71893),m=n(37112),f=n(42894),p=n(36063),h=n(65363),x=n(87266),b=n(29207),v=n(85893),g=d.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]))),j={idirEmail:"",role:"member",id:new Date().getTime()};t.Z=(0,p.hU)(function(e){var t,n=e.onSubmit,r=e.alert,o=e.setOpenCreateTeamModal,s=((0,l.useContext)(b.SessionContext)||{}).session,d=(0,l.useState)([j]),p=d[0],y=d[1],w=(0,l.useState)(""),Z=w[0],S=w[1],C=(0,l.useState)(!1),O=C[0],k=C[1],P=(0,l.useState)(null),T=P[0],E=P[1],A=(t=(0,i.Z)(c().mark(function e(){var t,i,l,u,d,f,h,b;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={name:Z,members:p},i=(0,x.p)(t,s.email),u=(l=(0,a.Z)(i,2))[0],d=l[1],!u){e.next=5;break}return e.abrupt("return",E(d));case 5:return k(!0),e.next=8,(0,m.Cm)(t);case 8:if(f=e.sent,b=(h=(0,a.Z)(f,2))[0],h[1]?r.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to create team. Please try again."}):r.show({variant:"success",fadeOut:1e4,closable:!0,content:"Team ".concat(Z," successfully created")}),!b){e.next=16;break}return e.next=16,n(b.id);case 16:y([j]),S(""),k(!1),E(null),o(!1);case 21:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,v.jsxs)("div",{children:[(0,v.jsx)(u.default,{label:"Team Name",onChange:function(e){S(e.target.value)},maxLength:"255","data-testid":"team-name",value:Z}),T&&T.name&&(0,v.jsx)(h.Z,{children:null==T?void 0:T.name}),(0,v.jsx)("br",{}),(0,v.jsx)("strong",{children:"Team Members"}),(0,v.jsx)(x.Z,{errors:T,members:p,setMembers:y,currentUser:s}),(0,v.jsxs)(g,{children:[(0,v.jsx)("button",{className:"secondary",onClick:function(){y([j]),S(""),k(!1),E(null),o(!1)},children:"Cancel"}),(0,v.jsx)("button",{className:"primary",type:"button",onClick:A,"data-testid":"send-invitation",children:O?(0,v.jsx)(f.rj,{color:"#FFF",height:18,width:50,visible:O}):"Send Invitation"})]})]})})},87266:function(e,t,n){"use strict";n.d(t,{p:function(){return z}});var r,a,i,o,s,c,l,u,d,m,f=n(59499),p=n(27812),h=n(71383);n(67294);var x=n(11915),b=n(35611),v=n(71893),g=n(48966),j=n.n(g),y=n(99603),w=n(59417),Z=n(65363),S=n(74150),C=n(18269),O=n(35685),k=n(17769),P=n(85893);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=v.ZP.div(r||(r=(0,h.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 10px;\n  grid-gap: 0 1em;\n"]))),M=(0,v.ZP)(b.default)(a||(a=(0,h.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n    ","\n  }\n"])),function(e){return e.readOnlyRole?"padding-left:6px;":""}),N=v.ZP.div(i||(i=(0,h.Z)(["\n  border-bottom: 1px solid black;\n  grid-column: 1 / 3;\n"]))),D=v.ZP.span(o||(o=(0,h.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),R=v.ZP.section(s||(s=(0,h.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n  padding-left: 1em;\n"]))),I=(0,v.ZP)(A)(c||(c=(0,h.Z)(["\n  grid-template-columns: 2.2fr 0.9fr 1.2fr;\n  align-items: start;\n  margin-bottom: 20px;\n  .email-select > .select-inner__control {\n    padding: 0.13em 0;\n    border: 2px solid #606060;\n    visibility: inherit;\n\n    &:focus-within {\n      outline: 4px solid #3b99fc !important;\n      outline-offset: 2px !important;\n    }\n  }\n"]))),F=(0,v.ZP)(y.G)(l||(l=(0,h.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]))),U=(0,v.ZP)(y.G)(u||(u=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n"]))),_=(0,v.ZP)(y.G)(d||(d=(0,h.Z)(["\n  padding: 3px;\n  border-radius: 25px;\n  border-style: solid;\n  border-color: black;\n  border-width: thin;\n  color: white;\n  background-color: black;\n"]))),B=v.ZP.p(m||(m=(0,h.Z)(["\n  font-style: italic;\n  font-size: 0.95em;\n"]))),z=function(e,t){var n={name:null,members:[]};return e.name||(n.name="Please enter a name"),e.members.forEach(function(r,a){r.idirEmail?j().isEmail(r.idirEmail)?(e.members.filter(function(e){return e.idirEmail===r.idirEmail}).length>1||r.idirEmail===t)&&(n.members[a]="Please use unique email"):n.members[a]="Please enter a valid email":n.members[a]="Please enter an email"}),[n.name||n.members.length>0,n]};t.Z=function(e){var t=e.errors,n=e.members,r=e.setMembers,a=e.allowDelete,i=void 0===a||a,o=e.currentUser,s=void 0===o?null:o,c=function(e,t){var a=E({},n[t]);a.idirEmail=(null==e?void 0:e.label.toLowerCase())||"";var i=(0,p.Z)(n);i[t]=a,r(i)},l=function(e,t){var a=E({},n[e]);a.role=t.target.value;var i=(0,p.Z)(n);i[e]=a,r(i)},u=function(e){r(n.filter(function(t,n){return n!==e}))};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{children:["Enter your team member’s government email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,P.jsx)("strong",{children:"2 business days"}),"."]}),(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{className:"strong",children:"Roles:"}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(_,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Admins"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"managing"})," powers"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,P.jsx)(U,{icon:w.Tab})}),"\xa0\xa0",(0,P.jsx)("span",{className:"underline",style:{verticalAlign:"top"},children:"Members"}),(0,P.jsxs)("span",{style:{verticalAlign:"top"},children:["\xa0have ",(0,P.jsx)("b",{children:"viewing"})," powers"]})]}),(0,P.jsx)("br",{}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{className:"underline",children:(0,P.jsx)(S.default,{external:!0,href:(0,C.eO)("CSS-App-My-Teams#ive-created-a-team-now-what"),children:"View a detailed breakdown of roles on our wiki page"})})})]}),(0,P.jsxs)(R,{children:[(0,P.jsxs)(A,{children:[(0,P.jsx)("strong",{children:"Member"}),(0,P.jsx)("strong",{children:"Role"}),(0,P.jsx)(N,{})]}),(0,P.jsx)(B,{children:"*Please enter email address tied to an IDIR to allow your user to login"}),s&&(0,P.jsxs)(I,{children:[(0,P.jsx)(x.default,{value:(null==s?void 0:s.email)||"",readOnly:!0,fullWidth:!0}),(0,P.jsx)(M,{label:"Role",disabled:!0,value:"admin",readOnlyRole:!0,children:(0,P.jsx)("option",{value:"admin",children:"Admin"})})]}),n.map(function(e,n){return(0,P.jsxs)(I,{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)(O.Z,{loadOptions:k.c,onChange:function(e){return c(e,n)},noOptionsMessage:function(){return"Start typing email..."},className:"email-select",menuPlacement:"top",maxMenuHeight:120,classNamePrefix:"select-inner",placeholder:"Enter email address"}),t&&t.members&&t.members[n]&&(0,P.jsx)(Z.Z,{children:t.members[n]})]}),(0,P.jsxs)(M,{label:"Role",onChange:function(e){return l(n,e)},value:e.role,"data-testid":"user-role",children:[(0,P.jsx)("option",{value:"member",children:"Member"}),(0,P.jsx)("option",{value:"admin",children:"Admin"})]}),n>=0&&i&&(0,P.jsx)(F,{icon:w.uMC,onClick:function(){return u(n)},title:"Delete","data-testid":"delete-user-role"})]},e.id)}),(0,P.jsxs)(D,{onClick:function(){r([].concat((0,p.Z)(n),[{idirEmail:"",role:"member",id:new Date().getTime(),pending:!0}]))},children:[(0,P.jsx)(y.G,{style:{color:"#006fc4"},icon:w.KtF,title:"Add Item","data-testid":"add-user-role"}),(0,P.jsx)("span",{children:"Add another team member"})]})]})]})}},49936:function(e,t,n){"use strict";var r,a=n(71383);n(67294);var i=n(11163),o=n(46312),s=n(71893),c=n(85330),l=n(4256),u=n(22280),d=n(85893),m=s.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));t.Z=function(e){var t=e.tab,n=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var s=(0,i.useRouter)(),f=(0,d.jsxs)(c.mQ,{onChange:function(e){s.replace("/my-dashboard/".concat(e))},activeKey:t,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[f,void 0===a||a?(0,d.jsx)(o.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(m,{children:n&&n()})}):n&&n(),(0,d.jsx)("br",{}),r&&r()]})}},44196:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ez}});var r,a,i,o,s,c,l,u,d,m,f,p,h,x,b,v,g,j,y,w=n(16835),Z=n(50029),S=n(87794),C=n.n(S),O=n(67294),k=n(49936),P=n(59499),T=n(71383),E=n(11163),A=n(71893),M=n(85330),N=n(17762),D=n(35611),R=n(35166),I=n(87266),F=n(27008),U=n(37112),_=n(36063),B=n(76457),z=n(99603),H=n(59417),G=n(58766),K=n(63916),L=n(85893),q=(0,A.ZP)(z.G)(r||(r=(0,T.Z)(["\n  color: #ff0303;\n"]))),Y=A.ZP.div(a||(a=(0,T.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"]))),W=function(e){var t=e.title,n=e.content,r=e.note;return(0,L.jsxs)(Y,{children:[(0,L.jsx)(q,{icon:H.RLE,size:"3x"}),(0,L.jsxs)("div",{children:[t&&(0,L.jsx)("strong",{children:t}),n&&(0,L.jsx)("p",{children:n}),r&&(0,L.jsx)("i",{children:r})]})]})},$=n(11058),V=n(64735),X=n(42894),Q=n(12183),J=A.ZP.div(i||(i=(0,T.Z)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"]))),ee=(0,A.ZP)(z.G)(o||(o=(0,T.Z)(["\n  cursor: ",";\n  ","\n  ",";\n"])),function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"color: #CACACA;":"color: inherit; &:hover { color: ".concat(e.activeColor||"#000","; }")},function(e){return e.isUnread?"color: ".concat(Q.Uo):""});function et(e){var t=e.copyOrDownloadAction,n=e.showDeleteModal,r=e.showUpdateModal,a=e.actionsDisabled;return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(J,{children:[(0,L.jsx)(ee,{icon:H.kZ_,role:"button","aria-label":"copy",onClick:function(){return t(!1)},title:"Copy to clipboard",size:"lg",disabled:a}),(0,L.jsx)(ee,{icon:H.q7m,role:"button","aria-label":"download",onClick:function(){return t(!0)},title:"Download",size:"lg",disabled:a}),(0,L.jsx)(ee,{icon:H.lUd,role:"button","aria-label":"download",onClick:r,title:"Update secret",size:"lg",disabled:a}),(0,L.jsx)(ee,{icon:H.$aW,role:"button","aria-label":"delete",onClick:n,title:"Delete",size:"lg",disabled:a})]})})}A.ZP.div(s||(s=(0,T.Z)(["\n  height: 40px;\n  border-right: 2px solid #e3e3e3;\n"])));var en=n(9595),er=A.ZP.td(c||(c=(0,T.Z)(["\n  float: right;\n"])));(0,A.ZP)(z.G)(l||(l=(0,T.Z)(["\n  color: #000000;\n"])));var ea=A.ZP.div(u||(u=(0,T.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));function ei(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"2.7em"},children:"Actions"})}A.ZP.div(d||(d=(0,T.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 6fr;\n"])));var eo=(0,_.hU)(function(e){var t,n,r,a=e.team,i=e.selectedServiceAccount,o=e.setSelectedServiceAccount,s=e.teamServiceAccounts,c=e.getTeamServiceAccounts,l=e.alert,u=(0,O.useState)(!1),d=u[0],m=u[1],f=(0,O.useState)(!1),p=f[0],h=f[1],x=(0,O.useState)(!1),b=x[0],v=x[1],g=function(e){return e&&(null==e?void 0:e.status)!=="applied"&&!(null!=e&&e.archived)},j=function(){g(i)||h(!0)},y=(t=(0,Z.Z)(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.yN)(a.id,null==i?void 0:i.id);case 2:if(t=e.sent,(n=(0,w.Z)(t,2))[0],!n[1]){e.next=9;break}return l.show({variant:"danger",content:"Failed to delete service account, please try again."}),e.abrupt("return");case 9:c(a.id);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),S=function(){g(i)||m(!0)},k=(n=(0,Z.Z)(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.Gc)(a.id,null==i?void 0:i.id);case 2:t=e.sent,(n=(0,w.Z)(t,2))[0],n[1]&&l.show({variant:"danger",content:"Failed to update secret, please try again."});case 7:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),P=(r=(0,Z.Z)(C().mark(function e(t){var n,r,o,s,c,u;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g(i)){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,(0,U.vM)(a.id,null==i?void 0:i.id);case 5:if(r=e.sent,s=(o=(0,w.Z)(r,2))[0],c=o[1],v(!1),!c){e.next=13;break}return l.show({variant:"danger",content:"Failed to ".concat(t?"download":"copy",", please try again.")}),e.abrupt("return");case 13:s=s||{},u={tokenUrl:"".concat(s["auth-server-url"],"/realms/").concat(s.realm,"/protocol/openid-connect/token"),clientId:"".concat(s.resource),clientSecret:"".concat(null===(n=s.credentials)||void 0===n?void 0:n.secret)},t?(0,en.Di)((0,en.ON)(u),"".concat(null==i?void 0:i.clientId,".json")):((0,en.TE)((0,en.ON)(u)),l.show({variant:"success",content:"Copied to clipboard",fadeOut:3e3}));case 16:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,L.jsxs)(L.Fragment,{children:[b?(0,L.jsx)(X.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}):(0,L.jsx)(N.Z,{headers:[{accessor:"id",Header:"API Account ID"},{accessor:"actions",Header:(0,L.jsx)(ei,{}),disableSortBy:!0}],data:s.map(function(e){return{id:e.id,actions:(0,L.jsx)(er,{children:(0,L.jsx)(et,{copyOrDownloadAction:P,showUpdateModal:S,showDeleteModal:j,actionsDisabled:!!g(e)})})}}),colfilters:[],activateRow:function(e){var t=e.cells[0].row.original.id;s.forEach(function(e){e.id==t&&o(e)})},rowSelectorKey:"id"}),(0,L.jsx)(R.Z,{id:"update-service-account-secret-modal",title:"Request a new secret for CSS API Account",onConfirm:k,openModal:d,handleClose:function(){return m(!1)},content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ea,{children:(0,L.jsx)("strong",{children:"You are about to request a new secret for CSS API Account"})}),(0,L.jsx)("br",{}),(0,L.jsx)("p",{children:"Once the new secret gets generated, your previous secret will no longer be valid for any applications using it."}),(0,L.jsx)("p",{children:"This means any application using CSS API through this account should be configured with the new secret."})]}),buttonStyle:"primary",confirmText:"Confirm",closable:!0}),(0,L.jsx)(R.Z,{id:"delete-service-account-modal",title:"Delete CSS API Account",icon:null,onConfirm:y,openModal:p,handleClose:function(){return h(!1)},content:(0,L.jsx)(W,{title:"Are you sure that you want to delete this CSS API Account?",content:"Once you delete this CSS PI Account, this action cannot be undone."}),buttonStyle:"danger",confirmText:"Delete",closable:!0})]})}),es=n(32098),ec=n(9206),el=n(29207),eu=n(18269);function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var em=A.ZP.div(m||(m=(0,T.Z)(["\n  padding-left: 1rem;\n  ","\n"])),function(e){return"\n  margin-top: ".concat(e.marginTop||"0",";\n  margin-bottom: ").concat(e.marginBottom||"0",";\n  margin-left: ").concat(e.marginLeft||"0",";\n  margin-right: ").concat(e.marginRight||"0",";\n  ")}),ef=A.ZP.td(f||(f=(0,T.Z)(["\n  float: right;\n"]))),ep=A.ZP.td(p||(p=(0,T.Z)(["\n  text-align: left !important;\n"]))),eh=A.ZP.div(h||(h=(0,T.Z)(["\n  height: var(--field-top-spacing);\n"])));function ex(){return(0,L.jsxs)("span",{children:["Role\xa0",(0,L.jsx)($.Z,{title:"",content:'Admin: can manage integrations <span class="strong">and</span> teams. <br> Members: can <span class="strong">only</span> manage integrations.',hide:200})]})}function eb(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"1.8em"},children:"Actions"})}function ev(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"0.4em"},children:"Actions"})}var eg={idirEmail:"",role:"member",pending:!0},ej=function(e){var t=e.onConfirmDelete,n=e.type,r=e.openModal,a=e.handleClose,i={confirmText:"Delete",buttonStyle:"danger",openModal:r,handleClose:void 0===a?function(){}:a},o="",s="";switch(n){case"allow":o="Once they are deleted, they will no longer have access to the team's integrations.",s="Are you sure that you want to delete this team member?",i.onConfirm=t;break;case"notAllowed":o="Before you delete the last team admin, you must assign a new admin.",i.confirmText="Okay",i.buttonStyle="primary"}return(0,L.jsx)(R.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:"delete-member-modal",title:"Delete Team Member",icon:null,content:(0,L.jsx)(W,{content:o,title:s}),closable:!0},i))},ey=(0,A.ZP)(z.G)(x||(x=(0,T.Z)(["\n  margin-right: 10px;\n  &:hover {\n    cursor: pointer;\n  }\n"]))),ew=function(e){var t=e.status;if(!t)return null;var n=H.RLE,r="black";return"draft"===t?(n=H.Xcf,r="#1a5a96"):"submitted"===t?(n=H.SZw,r="#fcba19"):["prFailed","applyFailed","planFailed"].includes(t)?(n=H.nYk,r="#ff0303"):"applied"===t&&(r="#2e8540",n=H.f8k),(0,L.jsx)(z.G,{icon:n,title:t,style:{color:r}})},eZ=function(e){var t,n,r,a=e.pending,i=e.invitationSendTime;if(!i)return null;var o=new Date().getTime()-new Date(i).getTime();return a&&o/864e5>2?(t=H.RLE,n="#ff0303",r="Invitation Expired"):a?(t=H.SZw,n="#fcba19",r="Invitation Sent"):(n="#2e8540",t=H.f8k,r="Active Member"),(0,L.jsx)(z.G,{icon:t,title:r,style:{color:n}})};A.ZP.div(b||(b=(0,T.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"]))),A.ZP.div(v||(v=(0,T.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"])));var eS=A.ZP.div(g||(g=(0,T.Z)(["\n  text-align: center;\n"]))),eC=(0,_.hU)(function(e){var t,n,r,a,i,o,s,c=e.alert,l=e.currentUser,u=e.team,d=e.loadTeams,m=(0,E.useRouter)(),f=(0,O.useState)([]),p=f[0],h=f[1],x=(0,O.useState)([]),b=x[0],v=x[1],g=(0,O.useState)([]),j=g[0],y=g[1],S=(0,O.useState)(null),k=S[0],P=S[1],T=(0,O.useState)(null),A=T[0],_=T[1],z=(0,O.useState)(null),q=z[0],Y=z[1],W=(0,O.useState)([eg]),$=W[0],Q=W[1],J=(0,O.useState)(),ee=J[0],et=J[1],en=(0,O.useState)(!1),er=en[0],ea=en[1],ei=(0,O.useState)(),ed=ei[0],eC=ei[1],eO=(0,O.useState)("allow"),ek=eO[0],eP=eO[1],eT=(0,O.useContext)(el.SurveyContext),eE=(0,O.useState)(!1),eA=eE[0],eM=eE[1],eN=(0,O.useState)(!1),eD=eN[0],eR=eN[1],eI=(t=(0,Z.Z)(C().mark(function e(t){var n,r,a,i,o,s,c,u,d,m;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ea(!0),e.next=3,Promise.all([(0,U.YY)(t),(0,F.H0)(t)]);case 3:return n=e.sent,a=(r=(0,w.Z)(n,2))[0],i=r[1],s=(o=(0,w.Z)(a,2))[0],c=o[1],d=(u=(0,w.Z)(i,2))[0],m=u[1],c||m?(h([]),Y(null),v([])):(h(s),Y(s.find(function(e){return e.idirEmail===l.email})),v(d||[])),e.next=12,eF(t);case 12:ea(!1);case 13:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),eF=(n=(0,Z.Z)(C().mark(function e(t){var n,r,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ea(!0),"admin"!==u.role){e.next=11;break}return e.next=4,(0,U.Sx)(t);case 4:n=e.sent,a=(r=(0,w.Z)(n,2))[0],r[1]?y([]):(y(a),P(a&&a.length>0?a[0]:null)),e.next=13;break;case 11:y([]),P(null);case 13:ea(!1);case 14:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});(0,O.useEffect)(function(){_(null),eI(u.id)},[u.id]),(0,O.useEffect)(function(){k&&"applied"!==k.status&&!k.archived&&_(k)},[k]),(0,O.useEffect)(function(){return A&&"applied"!==A.status?(clearInterval(s),s=setInterval((0,Z.Z)(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.ZT)(u.id,A.id);case 2:t=e.sent,r=(n=(0,w.Z)(t,2))[0],n[1]?clearInterval(s):_(r);case 7:case"end":return e.stop()}},e)})),5e3)):(eF(u.id),_(null)),function(){s&&clearInterval(s)}},[A]);var eU=function(e){e&&((0,G.Wv)(p,e)?eP("allow"):eP("notAllowed"),eC(e),eR(!0))},e_=(r=(0,Z.Z)(C().mark(function e(){var t,n,r,a,i;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,I.p)({name:u.name,members:$},l.email),r=(n=(0,w.Z)(t,2))[0],a=n[1],!r){e.next=4;break}return et(a),e.abrupt("return");case 4:return e.next=6,(0,U.yG)({members:$,id:u.id});case 6:if(i=e.sent,!(0,w.Z)(i,2)[1]){e.next=13;break}c.show({variant:"danger",fadeOut:1e4,closable:!0,content:eu.sY.ADD_TEAM_MEMBERS_ERROR}),e.next=18;break;case 13:return e.next=15,eI(u.id);case 15:Q([eg]),window.location.hash="",c.show({variant:"success",fadeOut:1e4,closable:!0,content:eu.sY.ADD_TEAM_MEMBERS_SUCCESS});case 18:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),eB=(a=(0,Z.Z)(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ed||!u.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,U.MH)(Number(ed),u.id);case 4:t=e.sent,(0,w.Z)(t,2)[1]?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:eu.sY.DELETE_TEAM_MEMBER_ERROR}):(h(p.filter(function(e){return e.id!==ed})),r=null===(n=p.find(function(e){return e.id===ed}))||void 0===n?void 0:n.idirEmail,c.show({variant:"success",fadeOut:1e4,closable:!0,content:"".concat(r," has successfully been deleted.")}));case 8:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)}),ez=function(e){m.push({pathname:"/my-dashboard/integrations",query:{integr:e}})},eH=(i=(0,Z.Z)(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,U.rU)(t,u.id);case 4:n=e.sent,(0,w.Z)(n,2)[1]?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:"Failed to resend invitation."}):c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Sent new invitation for team member ".concat(t.idirEmail)});case 8:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eG=(o=(0,Z.Z)(C().mark(function e(t,n){var r,a,i;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.zZ)(u.id,t,{role:n});case 2:if(r=e.sent,i=(a=(0,w.Z)(r,2))[0],!a[1]){e.next=9;break}return c.show({variant:"danger",content:"Failed to update user role. Please try again."}),e.abrupt("return");case 9:h(p.map(function(e){return e.id===t?i:e})),c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Member role updated successfully"});case 12:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)});if(!u||!q)return null;var eK="admin"===q.role;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("h2",{children:"Team Details"}),(0,L.jsxs)(M.mQ,{defaultActiveKey:"members",tabBarGutter:30,children:[(0,L.jsx)(M.OK,{tab:"Members",children:(0,L.jsxs)(em,{children:[eK?(0,L.jsx)("button",{className:"primary",style:{margin:"1rem 0"},onClick:function(){return eM(!0)},"data-testid":"add-new-team-member",children:"+ Add New Team Members"}):(0,L.jsx)("br",{}),(0,L.jsx)(B.Z,{type:"text",rows:7,ready:!er,style:{marginTop:"20px"},children:(0,L.jsx)(N.Z,{"data-testid":"team-members-table",variant:"medium",headers:[{accessor:"status",Header:"Invite Status",disableSortBy:!0},{accessor:"idirEmail",Header:"Email"},{accessor:"role",Header:(0,L.jsx)(ex,{}),disableSortBy:!0},{accessor:"actions",Header:(0,L.jsx)(ev,{}),disableSortBy:!0}],data:p.map(function(e){var t=eK&&q.id!==e.id;return{status:(0,L.jsx)(eZ,{pending:e.pending,invitationSendTime:e.createdAt}),idirEmail:e.idirEmail,role:t&&!e.pending?(0,L.jsxs)(D.default,{onChange:function(t){return eG(e.id,t.target.value)},value:e.role,children:[(0,L.jsx)("option",{value:"member",children:"Member"}),(0,L.jsx)("option",{value:"admin",children:"Admin"})]}):(0,G.kC)(e.role),actions:(0,L.jsxs)(ef,{children:[t&&e.pending&&(0,L.jsx)(ey,{icon:H.zBy,size:"lg",onClick:function(){return eH(e)},title:"Resend Invitation",style:{marginRight:"6px"},"data-testid":"resend-invitation"}),t&&(0,L.jsx)(ey,{icon:H.$aW,onClick:function(){return eU(e.id)},size:"lg",title:"Delete User",style:{marginRight:"16px"},"data-testid":"delete-member"})]})}}),colfilters:[],rowSelectorKey:"status",readOnly:!0})})]})},"members"),(0,L.jsx)(M.OK,{tab:"Integrations",children:(0,L.jsx)(em,{marginTop:"20px",children:(0,L.jsx)(B.Z,{type:"text",rows:7,ready:!er,style:{marginTop:"20px"},children:(0,L.jsx)(N.Z,{variant:"medium",headers:[{accessor:"status",Header:"Status",disableSortBy:!0},{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"actions",Header:(0,L.jsx)(eb,{}),disableSortBy:!0}],data:(null==b?void 0:b.length)>0?null==b?void 0:b.map(function(e){return{status:(0,L.jsx)(ew,{status:null==e?void 0:e.status}),id:e.id,projectName:e.projectName,actions:(0,L.jsx)(ef,{children:(0,L.jsx)(K.ZP,{request:e,onDelete:function(){d(),eI(null==u?void 0:u.id)},children:(0,L.jsx)(K.Kk,{icon:H.Mdf,"aria-label":"view",onClick:function(){return ez(e.id)},size:"lg"})})})}}):[],readOnly:!0,colfilters:[],rowSelectorKey:"status",noDataFoundElement:(0,L.jsxs)(ep,{colSpan:5,children:[(0,L.jsx)("br",{}),"There are no integrations for this team yet.",(0,L.jsx)("br",{}),(0,L.jsx)("br",{}),"To add this team to an ",(0,L.jsx)("span",{className:"strong",children:"existing integration"}),":",(0,L.jsx)("span",{className:"line-height-200"}),(0,L.jsxs)("ol",{children:[(0,L.jsxs)("li",{children:["Go to your"," ",(0,L.jsx)("span",{className:"text-blue",children:(0,L.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,L.jsx)("li",{children:"Select the “pencil” icon to edit the integration"}),(0,L.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]}),(0,L.jsx)("br",{}),"To add this team to a ",(0,L.jsx)("span",{className:"strong",children:"new integration"}),":",(0,L.jsx)("span",{className:"line-height-200"}),(0,L.jsxs)("ol",{children:[(0,L.jsxs)("li",{children:["Go to your"," ",(0,L.jsx)("span",{className:"text-blue",children:(0,L.jsx)("span",{className:"strong",children:"Projects"})})," ","tab"]}),(0,L.jsx)("li",{children:"Select “+ Request SSO Integration”"}),(0,L.jsx)("li",{children:"Select “Yes” to allow multiple team members to manage the integration"}),(0,L.jsx)("li",{children:"Select this team from the “Project Team” drop down"})]})]})})})})},"integrations"),eK&&(0,L.jsx)(M.OK,{tab:"CSS API Account",children:(0,L.jsx)(em,{marginTop:"10px",children:er?(0,L.jsxs)(eS,{children:[(0,L.jsx)(eh,{}),(0,L.jsx)(X.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,L.jsxs)(V.ZP,{cols:10,children:[(0,L.jsxs)(V.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,L.jsx)(V.ZP.Col,{span:4,children:j.length>0?(0,L.jsx)(eo,{team:u,selectedServiceAccount:k,setSelectedServiceAccount:P,teamServiceAccounts:j,getTeamServiceAccounts:eF}):(0,L.jsx)("button",{style:{marginBottom:10},onClick:(0,Z.Z)(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ea(!0),e.next=3,(0,U.rl)(u.id);case 3:t=e.sent,(n=(0,w.Z)(t,2))[0],(r=n[1])?(ea(!1),c.show({variant:"danger",fadeOut:1e4,closable:!0,content:r})):(null==eT||eT.setShowSurvey(!0,"cssApiRequest"),eF(u.id));case 8:case"end":return e.stop()}},e)})),className:"primary",children:"+ Request CSS API Account"})}),(0,L.jsx)(V.ZP.Col,{span:6,children:A&&(0,L.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,L.jsx)("div",{style:{padding:5},children:(0,L.jsxs)(es.B,{children:["Your request for an API account could not be completed. Please"," ",(0,L.jsx)(ec.rU,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})]}),j.length>0&&(0,L.jsx)(V.ZP.Row,{children:(0,L.jsxs)(es.$,{children:["For more information on how to use the CSS API Account with your integrations,"," ",(0,L.jsx)(ec.rU,{href:"".concat(eu.UN,"/integrating-your-application/css-app-api"),external:!0,children:"click to learn more on our wiki page"}),"."]})})]})})},"service-accounts")]}),(0,L.jsx)(R.Z,{id:"add-member-modal",openModal:eA,handleClose:function(){et(null),Q([eg]),eM(!1)},title:"Add a New Team Member",icon:null,content:(0,L.jsx)(I.Z,{members:$,setMembers:Q,allowDelete:eK,errors:ee,currentUser:l}),onConfirm:e_,buttonStyle:"primary",skipCloseOnConfirm:!0,closable:!0}),(0,L.jsx)(ej,{onConfirmDelete:eB,type:ek,openModal:eD,handleClose:function(){return eR(!1)}})]})}),eO=n(92109),ek=n(11915),eP=n(65363),eT=A.ZP.div(j||(j=(0,T.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"])));function eE(e){var t,n=e.onSubmit,r=e.teamId,a=e.initialTeamName,i=e.setOpenEditTeamModal,o=(0,O.useState)(""),s=o[0],c=o[1],l=(0,O.useState)(!1),u=l[0],d=l[1],m=(0,O.useState)(),f=m[0],p=m[1],h=(0,O.useState)(!1),x=h[0],b=h[1];(0,O.useEffect)(function(){c(a)},[a]);var v=function(e){var t={members:[]},n=!1;return(e.name.trim()||(t.name="Please enter a name",n=!0),n)?t:(p(void 0),null)},g=(t=(0,Z.Z)(C().mark(function e(){var t,a,o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!1),!(a=v(t={name:s.trim(),id:r}))){e.next=5;break}return e.abrupt("return",p(a));case 5:return d(!0),e.next=8,(0,U.w2)(t);case 8:if(o=e.sent,!(0,w.Z)(o,2)[1]){e.next=15;break}return b(!0),d(!1),e.abrupt("return");case 15:return e.next=17,n();case 17:d(!1),i(!1);case 19:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,L.jsxs)("div",{children:[(0,L.jsx)(ek.default,{label:"New Team Name",onChange:function(e){c(e.target.value)},value:s,"data-testid":"edit-name"}),f&&f.name&&(0,L.jsx)(eP.Z,{children:null==f?void 0:f.name}),x&&(0,L.jsx)(eP.Z,{children:"Failed to update team name"}),(0,L.jsx)("br",{}),(0,L.jsxs)(eT,{children:[(0,L.jsx)("button",{className:"secondary",onClick:function(){c(a),i(!1)},style:{marginRight:"20px"},"data-testid":"cancel-edit-name",children:"Cancel"}),(0,L.jsx)("button",{className:"primary",type:"button",onClick:g,"data-testid":"save-edit-name",children:u?(0,L.jsx)(X.rj,{color:"#FFF",height:18,width:50,visible:u}):"Save"})]})]})}var eA=n(5845),eM=n(30274),eN=n(34798),eD=n.n(eN);function eR(e){var t=e.team,n=e.showEditTeamNameModal,r=e.showDeleteModal,a=(0,eM.te)(t),i=(0,eM.VV)(t);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(K.c4,{children:[(0,L.jsx)(K.Kk,{disabled:!i,icon:H.Xcf,role:"button","aria-label":"edit",title:"Edit",size:"lg",onClick:function(){return i?n(t):eD()},"data-testid":"edit-team-button"}),(0,L.jsx)(K.Kk,{disabled:!a,icon:H.$aW,role:"button","aria-label":"delete",title:"Delete",size:"lg",onClick:function(){return a?r(t):eD()},style:{marginLeft:"7px"},"data-testid":"delete-team-button"})]})})}var eI=n(24791),eF=A.ZP.tr(y||(y=(0,T.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"])));function eU(){return(0,L.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var e_=function(e){var t=e.handleNewTeamClick;return(0,L.jsx)("button",{onClick:t,className:"callout",children:"+ Create a New Team"})},eB=(0,_.hU)(function(e){var t,n,r,a,i=e.currentUser,o=e.setTeam,s=e.loading,c=e.teams,l=e.loadTeams,u=e.hasError,d=e.alert,m=(0,O.useState)(null),f=m[0],p=m[1],h=(0,O.useState)(void 0),x=h[0],b=h[1],v=(0,O.useState)([]),g=v[0],j=v[1],y=(0,O.useState)(!1),S=y[0],k=y[1],P=(0,O.useState)(!1),T=P[0],E=P[1],A=(0,O.useState)(!1),M=A[0],D=A[1],I=(0,O.useState)(!1),F=I[0],_=I[1],B=(0,O.useState)(!1),z=B[0],H=B[1],G=(t=(0,Z.Z)(C().mark(function e(t){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p(t),b(null==t?void 0:t.id),o(t),!t){e.next=7;break}return e.next=6,K(t.id);case 6:H(f&&0===Number(f.integrationCount)||!1);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),K=(n=(0,Z.Z)(C().mark(function e(t){var n,r,a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==f?void 0:f.role)!=="admin"){e.next=13;break}return e.next=3,(0,U.Sx)(t);case 3:if(n=e.sent,a=(r=(0,w.Z)(n,2))[0],!r[1]){e.next=10;break}return d.show({variant:"danger",content:"Failed to load service accounts for team. Please refresh."}),e.abrupt("return");case 10:j(a),e.next=14;break;case 13:j([]);case 14:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});(0,O.useEffect)(function(){(null==c?void 0:c.length)>0?x&&c.find(function(e){return e.id===x})||G(c[0]):G(null)},[c]);var q=(r=(0,Z.Z)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(!0));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),Y=function(e){k(!1),G(e),x===e.id&&_(!0)},$=function(e){G(e),D(!0)},V=u?(0,L.jsx)(eI.q1,{}):c&&(null==c?void 0:c.length)!==0?(0,L.jsx)(N.Z,{headers:[{accessor:"name",Header:"Team Name"},{accessor:"actions",Header:(0,L.jsx)(eU,{}),disableSortBy:!0}],data:c&&c.map(function(e){return{teamId:e.id,name:e.name,actions:(0,L.jsx)(eF,{children:(0,L.jsx)(eR,{team:e,showEditTeamNameModal:$,showDeleteModal:Y})})}}),activateRow:function(e){var t=e.cells[0].row.original.teamId;c.forEach(function(e){e.id==t&&G(e)})},rowSelectorKey:"teamId",activeSelector:x,colfilters:[]}):(0,L.jsx)(eI.Vs,{message:"You have not been added to any teams yet."}),X=(a=(0,Z.Z)(C().mark(function e(){var t,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!1),z){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,U.fC)(x);case 5:t=e.sent,(n=(0,w.Z)(t,2))[0],n[1]?k(!0):l();case 10:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});return s?(0,L.jsx)(eA.Z,{}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("br",{}),(0,L.jsx)(e_,{handleNewTeamClick:q}),(0,L.jsx)("br",{}),(0,L.jsx)("br",{}),V,(0,L.jsx)(R.Z,{id:eu.zw,title:"Create a New Team",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,L.jsx)(eO.Z,{onSubmit:l,currentUser:i,setOpenCreateTeamModal:E}),showCancel:!1,showConfirm:!1,openModal:T,handleClose:function(){return E(!1)},closable:!0}),(0,L.jsx)(R.Z,{id:eu.HW,title:"Edit Team Name",icon:null,onConfirm:function(){return console.log("confirm")},content:(0,L.jsx)(eE,{onSubmit:l,teamId:x,initialTeamName:(null==f?void 0:f.name)||"",setOpenEditTeamModal:D}),showCancel:!1,showConfirm:!1,openModal:M,handleClose:function(){return D(!1)},closable:!0}),(0,L.jsx)(R.Z,{id:eu.aS,title:"Delete team",icon:null,onConfirm:X,content:(0,L.jsxs)("div",{children:[(0,L.jsx)(W,{title:"Are you sure that you want to delete this team?",content:z?"Once you delete this team, this action cannot be undone.":"Before you delete this team, you will need to delete the integration(s) the team is responsible for.",note:z&&g.length>0?"*By deleting this team, you are also deleting the CSS App API Account that belongs to this team.":""}),S&&(0,L.jsx)(eP.Z,{children:"Failed to delete. Please try again"})]}),buttonStyle:"danger",confirmText:z?"Delete Team":"Okay",openModal:F,handleClose:function(){return _(!1)},closable:!0})]})}),ez=function(e){var t,n=e.session,r=(0,O.useState)(!0),a=r[0],i=r[1],o=(0,O.useState)(!1),s=o[0],c=o[1],l=(0,O.useState)(null),u=l[0],d=l[1],m=(0,O.useState)([]),f=m[0],p=m[1],h=(t=(0,Z.Z)(C().mark(function e(){var t,n,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,(0,U.Dc)();case 3:t=e.sent,r=(n=(0,w.Z)(t,2))[0],c(!!n[1]),p(r||[]),i(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,O.useEffect)(function(){h()},[]),(0,L.jsx)(k.Z,{tab:"teams",leftPanel:function(){return(0,L.jsx)(eB,{currentUser:n,setTeam:d,loading:a,teams:f,loadTeams:h,hasError:s})},rightPanel:function(){return u&&(0,L.jsx)(eC,{team:u,currentUser:n,loadTeams:h})}})}},9595:function(e,t,n){"use strict";n.d(t,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{return document.execCommand("copy"),document.body.removeChild(t),!0}catch(e){return document.body.removeChild(t),!1}},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:n})),a=document.createElement("a");a.href=r,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},69137:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/teams",function(){return n(44196)}])},35685:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(2717),a=n(67294),i=n(28648),o=n(65342),s=n(28549),c=n(33417),l=n(70292),u=n(30138),d=n(17609),m=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];n(73935),n(73469);var f=(0,a.forwardRef)(function(e,t){var n,f,p,h,x,b,v,g,j,y,w,Z,S,C,O,k,P,T,E,A,M,N,D,R,I,F,U,_,B,z,H,G,K,L,q,Y,W,$,V,X,Q,J,ee,et,en,er,ea,ei,eo,es,ec=(f=void 0!==(n=e.defaultOptions)&&n,h=void 0!==(p=e.cacheOptions)&&p,x=e.loadOptions,e.options,b=e.isLoading,v=e.onInputChange,g=e.filterOption,y=(j=(0,u.Z)(e,m)).inputValue,w=(0,a.useRef)(void 0),Z=(0,a.useRef)(!1),S=(0,a.useState)(Array.isArray(f)?f:void 0),O=(C=(0,l.Z)(S,2))[0],k=C[1],P=(0,a.useState)(void 0!==y?y:""),E=(T=(0,l.Z)(P,2))[0],A=T[1],M=(0,a.useState)(!0===f),D=(N=(0,l.Z)(M,2))[0],R=N[1],I=(0,a.useState)(void 0),U=(F=(0,l.Z)(I,2))[0],_=F[1],B=(0,a.useState)([]),H=(z=(0,l.Z)(B,2))[0],G=z[1],K=(0,a.useState)(!1),q=(L=(0,l.Z)(K,2))[0],Y=L[1],W=(0,a.useState)({}),V=($=(0,l.Z)(W,2))[0],X=$[1],Q=(0,a.useState)(void 0),ee=(J=(0,l.Z)(Q,2))[0],et=J[1],en=(0,a.useState)(void 0),ea=(er=(0,l.Z)(en,2))[0],ei=er[1],h!==ea&&(X({}),ei(h)),f!==ee&&(k(Array.isArray(f)?f:void 0),et(f)),(0,a.useEffect)(function(){return Z.current=!0,function(){Z.current=!1}},[]),eo=(0,a.useCallback)(function(e,t){if(!x)return t();var n=x(e,t);n&&"function"==typeof n.then&&n.then(t,function(){return t()})},[x]),(0,a.useEffect)(function(){!0===f&&eo(E,function(e){Z.current&&(k(e||[]),R(!!w.current))})},[]),es=(0,a.useCallback)(function(e,t){var n=(0,d.L)(e,t,v);if(!n){w.current=void 0,A(""),_(""),G([]),R(!1),Y(!1);return}if(h&&V[n])A(n),_(n),G(V[n]),R(!1),Y(!1);else{var r=w.current={};A(n),R(!0),Y(!U),eo(n,function(e){Z&&r===w.current&&(w.current=void 0,R(!1),_(n),G(e||[]),Y(!1),X(e?(0,c.Z)((0,c.Z)({},V),{},(0,s.Z)({},n,e)):V))})}},[h,eo,U,V,v]),(0,c.Z)((0,c.Z)({},j),{},{options:q?[]:E&&U?H:O||[],isLoading:D||void 0!==b&&b,onInputChange:es,filterOption:void 0===g?null:g})),el=(0,o.u)(ec);return a.createElement(i.S,(0,r.Z)({ref:t},el))})}},function(e){e.O(0,[925,661,620,912,762,774,888,179],function(){return e(e.s=69137)}),_N_E=e.O()}]);