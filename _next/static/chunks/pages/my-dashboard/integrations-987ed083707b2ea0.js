(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{49936:function(e,n,t){"use strict";var r,a=t(71383);t(67294);var i=t(11163),s=t(46312),o=t(71893),c=t(85330),l=t(4256),u=t(22280),d=t(85893),p=o.ZP.div(r||(r=(0,a.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n=e.tab,t=e.leftPanel,r=e.rightPanel,a=e.showResizable;e.children;var o=(0,i.useRouter)(),h=(0,d.jsxs)(c.mQ,{onChange:function(e){o.replace("/my-dashboard/".concat(e))},activeKey:n,tabBarGutter:30,children:[(0,d.jsx)(c.OK,{tab:"My Projects"},"integrations"),(0,d.jsx)(c.OK,{tab:"My Teams"},"teams")]});return(0,d.jsxs)(l.Z,{rules:u.F,children:[h,void 0===a||a?(0,d.jsx)(s.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,d.jsx)(p,{children:t&&t()})}):t&&t(),(0,d.jsx)("br",{}),r&&r()]})}},24104:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return t5}});var r,a,i,s,o,c,l,u,d,p,h,f,x,v,g,m,b,j,y,w,Z,S,P,C,k,I,O,D,N,E,R,T,F,A,q,G,L,B,U,M,z,K,H,_,W,V,Y,$,J,Q,X,ee=t(50029),en=t(71383),et=t(87794),er=t.n(et),ea=t(67294),ei=t(71893),es=t(59499),eo=t(16530),ec=t(69829),el=t(85893);function eu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ed(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eu(Object(t),!0).forEach(function(n){(0,es.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ep=(0,eo.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),eh=function(e){switch(e){case"success":return ec.CheckCircle;case"info":return ec.InfoCircle;case"warning":return ec.ExclamationTriangle;default:return ec.ExclamationCircle}};function ef(e){return(0,el.jsxs)(ep,ed(ed({},e),{},{children:[(0,el.jsx)(ep.Group,{style:{marginTop:"1px"},children:(0,el.jsx)(ec.FaSVG,{children:(0,el.jsx)("path",{fill:"currentColor",d:eh(e.variant)})})}),(0,el.jsx)(ep.Content,{children:e.content?e.content:e.children}),e.closable&&(0,el.jsx)(ep.Group,{align:"right",children:(0,el.jsx)(ep.Close,{children:"x"})})]}))}var ex=t(16835),ev=t(99603),eg=t(59417),em=t(64735),eb=t(42894),ej=t(7790),ey=t(9595),ew=t(58766),eZ=t(12183),eS=t(36063),eP=t(32098),eC=t(4602),ek=t(74150),eI=t(18269),eO=ei.ZP.div(o||(o=(0,en.Z)(["\n  text-align: center;\n"]))),eD=ei.ZP.div(c||(c=(0,en.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),eZ.n5),eN=ei.ZP.span(l||(l=(0,en.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),eE=ei.ZP.div(u||(u=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),eR=ei.ZP.div(d||(d=(0,en.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),eT=(0,eS.hU)(function(e){var n,t,r,a=e.integration,i=e.alert,s=(0,ea.useState)(!1),o=s[0],c=s[1],l=(n=(0,ee.Z)(er().mark(function e(n){var t,r,s,o;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,(0,ej.OV)(a.id,n);case 3:if(t=e.sent,s=(r=(0,ex.Z)(t,2))[0],o=r[1],c(!1),!o){e.next=11;break}return i.show({variant:"danger",content:"Failed to download installation"}),e.abrupt("return",null);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),u=(t=(0,ee.Z)(er().mark(function e(n){var t;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,ey.TE)((0,ey.ON)(t));case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),d=(r=(0,ee.Z)(er().mark(function e(n){var t;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:(t=e.sent)&&(0,ey.Di)((0,ey.ON)(t),"".concat(a.projectName,"-installation-").concat(n,".json"));case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return o?(0,el.jsxs)(eO,{children:[(0,el.jsx)(eE,{}),(0,el.jsx)(eb.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(eE,{}),(0,el.jsx)(eR,{children:"Installation JSONs"}),(0,el.jsx)("br",{}),(0,el.jsx)(em.ZP,{cols:3,children:(0,ew.Dy)(a).map(function(e){if("service-account"!==a.authType&&0===e.idps.length)return null;var n=e.idps.length>0?"(".concat(e.idps.map(function(e){return eC.S[e]}).join(", "),")"):"";return(0,el.jsxs)(ea.Fragment,{children:[(0,el.jsx)(em.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,el.jsx)(em.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,el.jsxs)(eD,{children:[e.display," ",n]})})}),(0,el.jsx)(em.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,el.jsxs)(em.ZP.Col,{span:3,children:[(0,el.jsx)("button",{className:"primary",onClick:function(){return u(e.name)},children:"Copy"}),"\xa0",(0,el.jsx)("button",{className:"primary",onClick:function(){return d(e.name)},children:"Download"}),"\xa0\xa0",(0,el.jsx)(ev.G,{color:"green",icon:eg.f8k,title:"Ready"}),"\xa0",(0,el.jsx)(eN,{children:"Ready"})]})}),(0,el.jsx)("br",{})]},e.name)})}),(0,el.jsxs)(eP.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client,"," ",(0,el.jsx)(ek.default,{href:"".concat(eI.UN,"/integrating-your-application/installation-json"),external:!0,children:"click to learn more on our wiki page"}),"."]})]})}),eF=t(35166),eA=ei.ZP.div(p||(p=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),eq=ei.ZP.span(h||(h=(0,en.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"])));(0,ei.ZP)(ev.G)(f||(f=(0,en.Z)(["\n  margin-right: 20px;\n"])));var eG=ei.ZP.div(x||(x=(0,en.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"])));ei.ZP.hr(v||(v=(0,en.Z)(["\n  background-color: black;\n"])));var eL=(0,eS.hU)(function(e){var n,t=e.selectedRequest,r=e.alert,a=(0,ea.useState)(null),i=a[0],s=a[1],o=(0,ew.Dy)(t),c=(0,ea.useState)(!1),l=c[0],u=c[1],d=function(e){s(e),u(!0)},p=(n=(0,ee.Z)(er().mark(function e(){var n,a,s,o,c,l;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ej.hU)(t.id,(null==i?void 0:i.name)||null);case 2:n=e.sent,s=(a=(0,ex.Z)(n,2))[0],c=(o=a[1])?"danger":"success",l=o?"Failed to regenerate secret":"Client Secret Successfully Updated",r.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(s,o);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),h=(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)(eG,{children:[(0,el.jsxs)("strong",{children:["You are about to change your client secret for your ",null==i?void 0:i.display," environment."]})," "]}),(0,el.jsx)("br",{}),(0,el.jsx)("p",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,el.jsx)("p",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]});return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(eA,{}),o.map(function(e){return(0,el.jsxs)(ea.Fragment,{children:[(0,el.jsxs)(eq,{children:[e.display,": "]}),!t.publicAccess&&(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("br",{}),(0,el.jsx)("button",{className:"primary",type:"button",onClick:function(){return d(e)},children:"Change your client secret"})]}),(0,el.jsx)("br",{}),(0,el.jsx)("br",{})]},e.name)})]}),(0,el.jsx)(eF.Z,{id:"confirm-new-secret",content:h,onConfirm:p,icon:eg.eHv,buttonStyle:"primary",title:"You are about to change your client secret",openModal:l,handleClose:function(){return u(!1)},closable:!0})]})}),eB=t(20070),eU=t.n(eB),eM=t(35124),ez=t(85330),eK=t(23157),eH=t(11915),e_=t(43590),eW=t.n(e_);function eV(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eY(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eV(Object(t),!0).forEach(function(n){(0,es.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eV(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e$=ei.ZP.table(g||(g=(0,en.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),eJ=ei.ZP.span(m||(m=(0,en.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),eQ=ei.ZP.div(b||(b=(0,en.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),eX=ei.ZP.div(j||(j=(0,en.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),e0=ei.ZP.div(y||(y=(0,en.Z)(["\n  color: #ff0000;\n"]))),e1={name:"",envs:["dev"]},e2=(0,ea.forwardRef)(function(e,n){var t,r=e.integrationId,a=e.environments,i=void 0===a?["dev"]:a,s=(0,ea.useState)(!1),o=s[0],c=s[1],l=(0,ea.useState)({}),u=l[0],d=l[1],p=(0,ea.useState)({}),h=p[0],f=p[1],x=(0,ea.useState)([e1]),v=x[0],g=x[1];(0,ea.useImperativeHandle)(n,function(){var e;return{submit:(e=(0,ee.Z)(er().mark(function e(){var n,t,a,i,s,l,p,h;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,o&&(n=[],eW()(u,function(e,t){n.push({name:t,envs:e})})),e.next=4,(0,ej.tK)({integrationId:r,roles:n});case 4:if(t=e.sent,i=(a=(0,ex.Z)(t,2))[0],!a[1]){e.next=10;break}return e.abrupt("return",[!0,!1]);case 10:return s={},l={},p=!1,h=!1,eW()(i,function(e){e.failure.length>0&&eW()(e.failure,function(n){s[n]||(s[n]=[]),s[n].push(e.env),p=!0}),e.duplicate.length>0&&eW()(e.duplicate,function(n){l[n]||(l[n]=[]),l[n].push(e.env),h=!0})}),d(s),f(l),c(!0),e.abrupt("return",[p,h]);case 19:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),reset:function(){g([e1]),d({}),f({}),c(!1)}}});var m=function(e){g(v.filter(function(n,t){return t!==e}))},b=function(e,n){g(v.map(function(t,r){return r===e?{name:n,envs:t.envs}:t}))},j=(t=(0,ee.Z)(er().mark(function e(n,t,r){return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g(v.map(function(e,r){return r===n?{name:e.name,envs:t.map(function(e){return e.value})}:e}));case 2:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),y=null;if(o){var w=null,Z=null;Object.keys(h).length>0&&(w=(0,el.jsx)("tr",{children:(0,el.jsx)("td",{colSpan:3,children:(0,el.jsxs)(eQ,{children:[(0,el.jsx)(eX,{children:(0,el.jsx)(ev.G,{icon:eg.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,el.jsx)(eX,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(u).length>0&&(Z=(0,el.jsx)("tr",{children:(0,el.jsx)("td",{colSpan:3,children:(0,el.jsxs)(eQ,{children:[(0,el.jsx)(eX,{children:(0,el.jsx)(ev.G,{icon:eg.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,el.jsxs)(eX,{children:["We were unable to save some of your changes.",(0,el.jsx)("br",{}),(0,el.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),y=(0,el.jsxs)(el.Fragment,{children:[w,Z]})}else y=(0,el.jsx)("tr",{children:(0,el.jsx)("td",{colSpan:3,children:v.length<20?(0,el.jsxs)(eJ,{onClick:function(){g(v.concat(e1))},children:[(0,el.jsx)(ev.G,{style:{color:"#006fc4"},icon:eg.KtF,title:"Add Role"}),(0,el.jsx)("span",{children:"Add another role"})]}):(0,el.jsx)(e0,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,el.jsx)("div",{children:(0,el.jsxs)(e$,{children:[(0,el.jsx)("thead",{children:(0,el.jsxs)("tr",{children:[(0,el.jsx)("th",{className:"role",children:"Role Name"}),(0,el.jsx)("th",{className:"env",children:"Environments"}),(0,el.jsx)("th",{})]})}),(0,el.jsxs)("tbody",{children:[v.length>0?v.map(function(e,n){var t=function(n,t){return u[e.name]&&u[e.name].includes(t.children)?eY(eY({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):h[e.name]&&h[e.name].includes(t.children)?eY(eY({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,el.jsxs)("tr",{children:[(0,el.jsx)("td",{className:"role",children:(0,el.jsx)(eH.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:o,onChange:function(e){return b(n,e.target.value)}})}),(0,el.jsx)("td",{className:"env",children:(0,el.jsx)(eK.ZP,{value:e.envs.map(function(e){return{value:e,label:e}}),options:i.map(function(e){return{value:e,label:e}}),isMulti:!0,isDisabled:o,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return j(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,el.jsx)("td",{children:!o&&v.length>1&&(0,el.jsx)(eJ,{onClick:function(){return m(n)},children:(0,el.jsx)(ev.G,{style:{color:"#FF0303"},icon:eg.uMC,title:"Remove Role"})})})]},n)}):(0,el.jsx)("tr",{children:(0,el.jsx)("td",{colSpan:3,children:"No roles added."})}),y]})]})})}),e3=t(30274),e5=t(78258),e4=t(29207),e7=ei.ZP.div(w||(w=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),e6=function(e){var n,t=e.integration,r=(0,ea.useRef)(eM.V),a=(0,ea.useState)("dev"),i=a[0],s=a[1],o=(0,ea.useState)(!1),c=o[0],l=o[1],u=(0,ea.useState)(0),d=u[0],p=u[1],h=(0,ea.useContext)(e4.SurveyContext);(0,ea.useEffect)(function(){s("dev"),l((0,e3.Yr)(t))},[t.id]);var f=(null==t?void 0:t.environments)||[];return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(e7,{}),(0,el.jsx)("button",{disabled:!c,className:"primary",onClick:function(){r.current.open()},"data-testid":"create-role-button",children:"+ Create a New Role"}),(0,el.jsx)(e7,{}),(0,el.jsxs)(ez.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,el.jsx)("br",{}),f.map(function(e){return(0,el.jsx)(ez.OK,{tab:eU()(e),children:(0,el.jsx)(e5.Z,{environment:e,integration:t},d)},e)})]}),(0,el.jsx)(eM.Z,{ref:r,title:"Create New Role",icon:null,onConfirm:(n=(0,ee.Z)(er().mark(function e(n){var t,a,i,s;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(t=e.sent,i=(a=(0,ex.Z)(t,2))[0],s=a[1],!i){e.next=11;break}return r.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!s){e.next=17;break}return r.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),p(function(e){return e+1}),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:p(function(e){return e+1}),null==h||h.setShowSurvey(!0,"createRole");case 21:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,el.jsx)(e2,{integrationId:t.id,environments:f})})]})},e8=t(27812),e9=t(29208),ne=t.n(e9),nn=t(93096),nt=t.n(nn),nr=t(34766),na=t.n(nr),ni=t(17762),ns=t(63916),no=t(94637),nc=t(10433),nl=(r=(0,ee.Z)(er().mark(function e(n){var t,r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,nc.e.post("bceid-webservice/idir/search",{field:t,search:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return r.apply(this,arguments)}),nu=(a=(0,ee.Z)(er().mark(function e(n){var t,r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,nc.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then(function(e){return e.data});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return a.apply(this,arguments)}),nd=[{value:"idir",label:"IDIR"}],np=[{value:"givenName",label:"First Name",allowed:["idir"]},{value:"surname",label:"Last Name",allowed:["idir"]},{value:"mail",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"mailNickname",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}],nh=(0,ea.forwardRef)(function(e,n){e.key;var t,r,a=e.idp,i=e.property,s=e.search,o=e.infoModalRef,c=e.parentModalRef,l=(0,ea.useState)(!1),u=(l[0],l[1]),d=(0,ea.useState)(!1),p=d[0],h=d[1],f=(0,ea.useState)([]),x=f[0],v=f[1],g=(0,ea.useState)(""),m=g[0],b=g[1],j=(0,ea.useState)(i),y=j[0],w=j[1],Z=(0,ea.useState)(s),S=Z[0],P=Z[1],C=(0,ea.useState)(!1),k=C[0],I=C[1];(0,ea.useEffect)(function(){b(a)},[a]),(0,ea.useEffect)(function(){if(m){var e=np.find(function(e){return e.value===y});if(null==e?void 0:e.allowed.includes(m))O(S,y);else{var n=np.find(function(e){return e.allowed.includes(m)});w((null==n?void 0:n.value)||""),P("")}}},[m]);var O=(t=(0,ee.Z)(er().mark(function e(n){var t,r,a,i,s=arguments;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:y,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return h(!0),v([]),u(!0),e.next=8,nl({field:t,search:n});case 8:r=e.sent,i=(a=(0,ex.Z)(r,2))[0],a[1],i&&v(i),h(!1);case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),D=(r=(0,ee.Z)(er().mark(function e(n){var t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),e.next=3,nu({guid:n.guid,userId:n.userId});case 3:t=e.sent,(r=(0,ex.Z)(t,2))[0],r[1]?I(!0):c.current.close({idp:m,guid:n.guid});case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(ni.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",headers:[{accessor:"firstName",Header:"First name"},{accessor:"lastName",Header:"Last Name"},{accessor:"email",Header:"Email"},{accessor:"idirUsername",Header:"IDIR username"},{accessor:"actions",Header:"",disableSortBy:!0}],rowSelectorKey:"guid",data:x.map(function(e){return{guid:e.guid,firstName:e.firstName,lastName:e.lastName,email:e.email,idirUsername:e.userId,actions:(0,el.jsxs)(ns.c4,{children:[(0,el.jsx)(ns.Kk,{icon:eg.Mdf,role:"button","aria-label":"view",onClick:function(){o.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,email:e.email,telephone:e.phone,company:e.company,department:e.department,title:e.jobTitle},_hash:c.current.getId()})},title:"View",size:"lg"}),(0,el.jsx)(ns.Kk,{icon:eg.q7m,role:"button","aria-label":"import",onClick:function(){return D(e)},title:"Import",size:"lg"})]})}}),colfilters:[{value:m,multiselect:!1,onChange:b,options:nd},{value:y,multiselect:!1,onChange:w,options:np.filter(function(e){return e.allowed.includes(m)})}],showFilters:!0,loading:p,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:S,searchLocation:"right",onSearch:O,onEnter:O,noDataFoundElement:(0,el.jsx)("p",{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}),k&&(0,el.jsx)("p",{className:"text-danger",children:"Failed to import the user. Please try again."})]})}),nf=t(11058);function nx(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nv(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nx(Object(t),!0).forEach(function(n){(0,es.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ng=ei.ZP.label(Z||(Z=(0,en.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),nm=ei.ZP.div(S||(S=(0,en.Z)(["\n  text-align: center;\n"]))),nb=ei.ZP.div(P||(P=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),nj=ei.ZP.div(C||(C=(0,en.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),ny=ei.ZP.div(k||(k=(0,en.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),nw=ei.ZP.div(I||(I=(0,en.Z)(["\n  text-align: center;\n"]))),nZ=function(){return(0,el.jsxs)(nm,{children:[(0,el.jsx)(nb,{}),(0,el.jsx)(eb.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},nS=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nP=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nC=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],nk={idir:nS,azureidir:nS,bceidbasic:nP,bceidbusiness:nP,bceidboth:nP,githubpublic:nC,githubbcgov:nC},nI=(0,eS.hU)(function(e){var n,t,r,a,i,s=e.selectedRequest,o=e.alert,c=(0,ea.useRef)(eM.V),l=(0,ea.useRef)(eM.V),u=(0,ea.useState)(!1),d=u[0],p=u[1],h=(0,ea.useState)(1),f=h[0],x=h[1],v=(0,ea.useState)(0),g=v[0],m=v[1],b=(0,ea.useState)(15),j=b[0],y=b[1],w=(0,ea.useState)(!1),Z=w[0],S=w[1],P=(0,ea.useState)(!1),C=P[0],k=P[1],I=(0,ea.useState)(!1),O=I[0],D=I[1],N=(0,ea.useState)(""),E=N[0],R=N[1],T=(0,ea.useState)([]),F=T[0],A=T[1],q=(0,ea.useState)([]),G=q[0],L=q[1],B=(0,ea.useState)([]),U=B[0],M=B[1],z=(0,ea.useState)([]),K=z[0],H=z[1],_=(0,ea.useState)("dev"),W=_[0],V=_[1],Y=(0,ea.useState)(s.devIdps[0]),$=Y[0],J=Y[1],Q=(0,ea.useState)(""),X=Q[0],en=Q[1],et=(0,ea.useState)(""),ei=et[0],es=et[1],eo=(0,ea.useState)(void 0),ec=eo[0],eu=eo[1],ed=(0,ea.useState)(!1),ep=ed[0],eh=ed[1],ef=(0,ea.useContext)(e4.SurveyContext),eb=(0,ea.useCallback)(nt()((n=(0,ee.Z)(er().mark(function e(n){var t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(!0);case 2:return R("Assigning role..."),eh(!1),e.next=6,(0,ej.$C)({environment:W,integrationId:s.id,username:ec,roleNames:n});case 6:if(t=e.sent,r=(0,ex.Z)(t,2)[1],D(!1),r){e.next=16;break}return R("Last saved at ".concat(new Date().toLocaleString())),null==ef||ef.setShowSurvey(!0,"addUserToRole"),e.abrupt("return",!0);case 16:return eh(!0),R("Failed to update roles."),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==s?void 0:s.id,W,ec,ef]),ey=(t=(0,ee.Z)(er().mark(function e(){var n,t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,S(!0);case 4:return e.next=6,(0,ej.gE)({environment:W,integrationId:s.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,ex.Z)(n,2))[0],t[1]&&o.show({variant:"danger",content:"Failed to fetch roles."}),L(null===r?[]:r.map(function(e){return e.name})),H(null===r?[]:r.map(function(e){return e.composite})),S(!1);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),ew=function(){A([]),M([]),x(1),m(0),eu(void 0),p(!1)},eZ=function(){if(es(""),V("dev"),s.devIdps){var e=s.devIdps.length>0?s.devIdps[0]:"";J(e);var n=nk[e]||[];n.length>0&&en(n[0].value)}},eS=(r=(0,ee.Z)(er().mark(function e(n){var t,r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!0);case 2:return e.next=4,(0,ej.nu)({environment:W,integrationId:s.id,username:n});case 4:if(t=e.sent,a=(r=(0,ex.Z)(t,2))[0],!r[1]){e.next=12;break}return o.show({variant:"danger",content:"Failed to fetch user roles."}),k(!1),e.abrupt("return");case 12:return e.next=14,M(a||[]);case 14:k(!1);case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});(0,ea.useEffect)(function(){ew(),eZ(),L([])},[s.id]),(0,ea.useEffect)(function(){eP(ei,void 0,f)},[f]),(0,ea.useEffect)(function(){eP(ei,void 0,1)},[j]),(0,ea.useEffect)(function(){ew(),ey(),s.devIdps&&J(s.devIdps.length>0?s.devIdps[0]:"")},[W]),(0,ea.useEffect)(function(){ew();var e=nk[$]||[];!e.find(function(e){return e.search&&e.value===X})&&e.length>0&&en(e[0].value)},[$]),(0,ea.useEffect)(function(){R(""),ec&&eS(ec)},[ec]);var eP=(a=(0,ee.Z)(er().mark(function e(n){var t,r,a,i,c,l=arguments;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>1&&void 0!==l[1]?l[1]:X,r=l.length>2&&void 0!==l[2]?l[2]:f,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return S(!0),es(n),x(r),en(t),A([]),M([]),eu(void 0),e.next=13,(0,ej.sp)({environment:W,idp:$,property:t,searchKey:n,integrationId:s.id||-1});case 13:if(a=e.sent,c=(i=(0,ex.Z)(a,2))[0],i[1]&&o.show({variant:"danger",content:"Failed to fetch users."}),c){var u;p(!0),A((u=r,c.rows.slice((u-1)*15,15*u))),m(c.count)}S(!1);case 20:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),ek=function(e){return eP(e,void 0,1)},eI=(i=(0,ee.Z)(er().mark(function e(n,t){var r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?U.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,e8.Z)(U.slice(0,-1)):[].concat((0,e8.Z)(U),[null===(a=t.option)||void 0===a?void 0:a.value])),!(r.length!==U.length)){e.next=7;break}return e.next=5,eb(r);case 5:e.sent&&M(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return i.apply(this,arguments)}),eO=null;C?eO=(0,el.jsx)(nZ,{}):ec&&(eO=(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(ng,{children:"2. Assign User to a Role"}),(0,el.jsx)(eK.ZP,{value:U.map(function(e){return{value:e,label:e}}),options:G.map(function(e,n){return{value:e,label:!0==K[n]?"".concat(e," (Composite role)"):e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:eI,"data-testid":"user-role-select"}),(0,el.jsx)(ez.Ad,{saving:O,content:E,variant:ep?"error":"success"})]}));var eD="idir"===$,eN=nk[$]||[],eE=eN.length>0?eN.filter(function(e){return e.result}):[],eR=null;d&&eD&&(eR=(0,el.jsxs)(el.Fragment,{children:[F.length>0&&(0,el.jsx)(ez.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,el.jsx)("button",{type:"button",className:"primary",style:{marginTop:"0.5rem"},"data-testid":"idim-search-button",onClick:function(){return l.current.open({key:new Date().getTime().toString(),idp:"idir",property:X,search:ei})},children:"Search in IDIM Web Service Lookup"})]}));var eT=(null==s?void 0:s.environments)||[],eF=(null==s?void 0:s.devIdps)||[],eA="guid"===X||null!=$&&$.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed",eq=function(e){var n=eN.find(function(n){return n.value===e});return null==n?void 0:n.label.toString()};return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(nb,{}),(0,el.jsx)(em.ZP,{cols:10,children:(0,el.jsxs)(em.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,el.jsxs)(em.ZP.Col,{span:6,children:[(0,el.jsxs)(ez.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,el.jsx)(nf.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,el.jsx)("div",{"data-testid":"role-search-table",children:(0,el.jsx)(ni.Z,{searchPlaceholder:"Enter search criteria",variant:"mini",rowSelectorKey:"username",headers:[{accessor:"firstName",Header:eq("firstName")||""},{accessor:"lastName",Header:eq("lastName")||""},{accessor:"email",Header:"Email"},{accessor:"actions",Header:"",disableSortBy:!0}],data:F.map(function(e){return{username:ne()(e,"username"),firstName:ne()(e,"firstName"),lastName:ne()(e,"lastName"),email:ne()(e,"email"),actions:(0,el.jsx)(ns.c4,{children:(0,el.jsx)(ns.Kk,{icon:eg.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),c.current.open({guid:e.username.split("@")[0],attributes:nv(nv({},na()(eE,function(n,t){return n[t.label]=ne()(e,t.value),n},{})),e.attributes)})},title:"View",size:"lg"})})}}),colfilters:[{key:"user-role-filter-env",value:W,multiselect:!1,onChange:V,options:eT.map(function(e){return{value:e,label:eU()(e)}})},{key:"user-role-filter-idp",value:$,multiselect:!1,onChange:J,options:eF.filter(function(e){return!["digitalcredential","bcservicescard"].includes(e)}).map(function(e){return{value:e,label:eC.S[e]}})},{key:"user-role-filter-prop",value:X,multiselect:!1,onChange:en,options:eN.filter(function(e){return e.search})}],showFilters:!0,loading:Z,totalColSpan:20,searchColSpan:10,headerAlign:"bottom",headerGutter:[5,0],searchKey:ei,searchLocation:"right",onSearch:ek,onEnter:ek,noDataFoundElement:d?(0,el.jsxs)(nj,{children:[(0,el.jsx)(ny,{children:(0,el.jsx)(ev.G,{icon:eg.RLE,color:"#D44331",title:"Edit",size:"lg"})}),eD?(0,el.jsx)(ny,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,el.jsx)(ny,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]}):(0,el.jsx)(nw,{children:"You have not searched for any users yet."}),pagination:!0,pageLimits:[15],onPage:x,rowCount:g,limit:j,onLimit:function(e){y(e)},activateRow:function(e){eu(e.original.username)},searchTooltip:eA})}),eR]}),(0,el.jsx)(em.ZP.Col,{span:4,children:eO})]})}),(0,el.jsx)(no.Z,{modalRef:c}),(0,el.jsx)(eM.Z,{ref:l,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){eP(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,el.jsx)(nh,{idp:e.idp,property:e.property,search:e.search,infoModalRef:c,parentModalRef:l},e.key):(0,el.jsx)(el.Fragment,{})}})]})}),nO=t(58292),nD=t(87414),nN=t(5845),nE=t(96270);function nR(e){var n,t=e.requestId,r=(0,ea.useState)(!1),a=r[0],i=r[1],s=(0,ea.useState)(!1),o=s[0],c=s[1],l=(0,ea.useState)([]),u=l[0],d=l[1],p=(n=(0,ee.Z)(er().mark(function e(){var n,r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,(0,nD.v)({requestId:t,eventCode:"request-update-success",clearNotifications:!0});case 5:n=e.sent,a=(r=(0,ex.Z)(n,2))[0],r[1]?c(!0):a&&d(a.rows),i(!1);case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return((0,ea.useEffect)(function(){p()},[t]),o)?(0,el.jsx)(ef,{variant:"warning",content:"Failed to load details."}):a?(0,el.jsx)(nN.Z,{}):(0,el.jsx)(el.Fragment,{children:(0,el.jsx)(nE.Z,{events:u})})}var nT=t(4136),nF=t(71431),nA=t.n(nF),nq=ei.ZP.ul(O||(O=(0,en.Z)(["\n  list-style-type: none;\n  margin: 0;\n  position: relative;\n\n  & li {\n    border-bottom: 1px solid #d4d4d4;\n    & svg.svg-inline--fa {\n      position: absolute;\n      right: 0;\n    }\n\n    & div.icon {\n      position: absolute;\n      right: 0;\n      bottom: 5px;\n    }\n  }\n"]))),nG=ei.ZP.div(D||(D=(0,en.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),nL=ei.ZP.div(N||(N=(0,en.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),nB="15px",nU=ei.ZP.div(E||(E=(0,en.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),nB,nB,nB,"0"),nM=ei.ZP.li(R||(R=(0,en.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]))),nz=function(){return(0,el.jsxs)(nL,{children:[(0,el.jsx)("div",{children:(0,el.jsx)(ev.G,{icon:eg.f8k,color:"#2E8540"})}),(0,el.jsx)("div",{children:(0,el.jsx)("span",{children:"Your integration is approved and available."})})]})};function nK(){return(0,el.jsx)(el.Fragment,{children:(0,el.jsxs)(nq,{children:[(0,el.jsxs)(nM,{children:["Requirements email sent to IDIM",(0,el.jsx)(ev.G,{icon:eg.f8k,color:"#00C45B"})]}),(0,el.jsxs)(nM,{children:[(0,el.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,el.jsx)(ek.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,el.jsx)(ev.G,{icon:eg.FU$,color:"#b3b3b3"})]}),(0,el.jsxs)(nM,{children:[(0,el.jsx)("p",{children:"Access to prod"}),(0,el.jsx)(nU,{})]})]})})}var nH=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasBceid,a=n.awaitingBceidProd,i=n.bceidApproved;if(!t||!r)return null;var s=null;return i?s=(0,el.jsx)(nz,{}):a&&(s=(0,el.jsx)(nK,{})),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("br",{}),(0,el.jsx)(nG,{children:"Access to BCeID Prod"}),(0,el.jsx)("br",{}),s]})};function n_(){return(0,el.jsx)(el.Fragment,{children:(0,el.jsxs)(nq,{children:[(0,el.jsxs)(nM,{children:["Requirements email sent to GCIO",(0,el.jsx)(ev.G,{icon:eg.f8k,color:"#00C45B"})]}),(0,el.jsxs)(nM,{children:[(0,el.jsx)("p",{children:"Access to prod"}),(0,el.jsx)(nU,{})]})]})})}var nW=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasGithub,a=n.awaitingGithubProd,i=n.githubApproved;if(!t||!r)return null;var s=null;return i?s=(0,el.jsx)(nz,{}):a&&(s=(0,el.jsx)(n_,{})),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("br",{}),(0,el.jsx)(nG,{children:"Access to GitHub Prod"}),(0,el.jsx)("br",{}),s]})},nV=t(67302),nY=t(64306),n$=t(34798),nJ=t.n(n$),nQ=ei.ZP.label(T||(T=(0,en.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"])));ei.ZP.div(F||(F=(0,en.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"});var nX=ei.ZP.div(A||(A=(0,en.Z)(["\n  text-align: center;\n"]))),n0=ei.ZP.div(q||(q=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),n1=function(){return(0,el.jsxs)(nX,{children:[(0,el.jsx)(n0,{}),(0,el.jsx)(eb.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},n2=(0,eS.hU)(function(e){var n,t,r,a,i=e.selectedRequest,s=e.alert,o=(0,ea.useState)(!1),c=(o[0],o[1]),l=(0,ea.useState)(!1),u=l[0],d=l[1],p=(0,ea.useState)(!1),h=p[0],f=p[1],x=(0,ea.useState)(""),v=x[0],g=x[1],m=(0,ea.useState)([]),b=m[0],j=m[1],y=(0,ea.useState)([]),w=y[0],Z=y[1],S=(0,ea.useState)(void 0),P=S[0];S[1];var C=(0,ea.useState)("dev"),k=C[0],I=C[1],O=(0,ea.useState)(!1),D=O[0],N=O[1],E=(null==i?void 0:i.environments)||[],R=(0,ea.useCallback)(nt()((n=(0,ee.Z)(er().mark(function e(n){var t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),g("Assigning role..."),N(!1),e.next=5,(0,ej.$C)({environment:k,integrationId:i.id,username:(0,nY.Sf)(i.clientId),roleNames:n});case 5:if(t=e.sent,r=(0,ex.Z)(t,2)[1],f(!1),!r){e.next=15;break}return N(!0),g("Failed to update roles."),e.abrupt("return",!1);case 15:return g("Last saved at ".concat(new Date().toLocaleString())),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),2e3,{trailing:!0}),[null==i?void 0:i.id,k,P]),T=(t=(0,ee.Z)(er().mark(function e(n,t){var r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"clear"===t.action||(r="remove-value"===t.action?w.filter(function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)}):"pop-value"===t.action?(0,e8.Z)(w.slice(0,-1)):[].concat((0,e8.Z)(w),[null===(a=t.option)||void 0===a?void 0:a.value])),!(w.length!==r.length)){e.next=7;break}return e.next=5,R(r);case 5:e.sent&&Z(r);case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),F=(r=(0,ee.Z)(er().mark(function e(){var n,t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(!0);case 4:return e.next=6,(0,ej.gE)({environment:k,integrationId:i.id,first:0,max:1e3});case 6:n=e.sent,r=(t=(0,ex.Z)(n,2))[0],t[1]&&s.show({variant:"danger",content:"Failed to fetch roles."}),j(null===r?[]:r.map(function(e){return e.name})),c(!1);case 14:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),A=(a=(0,ee.Z)(er().mark(function e(n){var t,r,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(!0);case 2:return e.next=4,(0,ej.nu)({environment:k,integrationId:i.id,username:n});case 4:if(t=e.sent,a=(r=(0,ex.Z)(t,2))[0],!r[1]){e.next=12;break}return s.show({variant:"danger",content:"Failed to fetch roles."}),d(!1),e.abrupt("return");case 12:return e.next=14,Z(a||[]);case 14:d(!1);case 15:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});return(0,ea.useEffect)(function(){F(),g(""),A((0,nY.Sf)(i.clientId))},[k]),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(nV.Z,{children:(0,el.jsx)(ez.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,el.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,el.jsx)(ek.default,{external:!0,href:(0,eI.eO)("Creating-a-Role#service-account-role-management"),children:"click to visit our wiki page"})]})})}),(0,el.jsxs)(ez.mQ,{onChange:function(e){I(e)},activeKey:k,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,el.jsx)("br",{}),E.map(function(e){return(0,el.jsx)(ez.OK,{tab:eU()(e),children:(0,el.jsx)(em.ZP,{cols:10,children:(0,el.jsxs)(em.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,el.jsx)(em.ZP.Col,{span:5,children:(0,el.jsx)(ni.Z,{headers:[{accessor:"projectName",Header:"Service Account"}],data:[{projectName:i.projectName}],colfilters:[],activateRow:nJ(),rowSelectorKey:"projectName"})}),(0,el.jsx)(em.ZP.Col,{span:5,children:u?(0,el.jsx)(n1,{}):(0,el.jsxs)("div",{children:[(0,el.jsx)(nQ,{children:"Assign Service Account to a Role"}),(0,el.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,el.jsx)(eK.ZP,{value:w.map(function(e){return{value:e,label:e}}),options:b.map(function(e){return{value:e,label:e}}),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:T})}),(0,el.jsx)(ez.Ad,{saving:h,content:v,variant:D?"error":"success"})]})})]})})},e)})]})]})});function n3(){return(0,el.jsx)(el.Fragment,{children:(0,el.jsxs)(nq,{children:[(0,el.jsxs)(nM,{children:["Requirements email sent to IDIM",(0,el.jsx)(ev.G,{icon:eg.f8k,color:"#00C45B"})]}),(0,el.jsxs)(nM,{children:[(0,el.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,el.jsx)(ek.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,el.jsx)(ev.G,{icon:eg.FU$,color:"#b3b3b3"})]}),(0,el.jsxs)(nM,{children:[(0,el.jsx)("p",{children:"Access to prod"}),(0,el.jsx)(nU,{})]})]})})}var n5=function(e){var n=e.approvalContext,t=n.hasProd,r=n.hasBcServicesCard,a=n.awaitingBcServicesCardProd,i=n.bcServicesCardApproved;if(!t||!r)return null;var s=null;return i?s=(0,el.jsx)(nz,{}):a&&(s=(0,el.jsx)(n3,{})),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("br",{}),(0,el.jsx)(nG,{children:"Access to BC Services Card Prod"}),(0,el.jsx)("br",{}),s]})},n4=t(29009),n7=t(41087),n6=t(14195),n8=t(3023),n9=t(75358),te=t(26050),tn=t(33558),tt=t(18242),tr=t(84642),ta=(i=(0,ee.Z)(er().mark(function e(n,t,r,a){var i;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nc.e.get("requests/".concat(n,"/metrics?env=").concat(t,"&fromDate=").concat(r,"&toDate=").concat(a)).then(function(e){return null==e?void 0:e.data});case 3:return i=e.sent,e.abrupt("return",[i,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r){return i.apply(this,arguments)}),ti=(s=(0,ee.Z)(er().mark(function e(n,t,r,a,i,s){var o;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,nc.e)({url:"requests/".concat(n,"/logs?env=").concat(t,"&start=").concat(r,"&end=").concat(a),responseType:"blob",onDownloadProgress:i,signal:null==s?void 0:s.signal}).then(function(e){return{data:null==e?void 0:e.data,message:null==e?void 0:e.headers["x-message"]}});case 3:return o=e.sent,e.abrupt("return",[o,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[null,e.t0]);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n,t,r,a,i){return s.apply(this,arguments)}),ts=t(9198),to=t.n(ts);t(459);var tc=t(31879);function tl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tu(e){return(0,el.jsx)(el.Fragment,{children:(0,el.jsx)(to(),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tl(Object(t),!0).forEach(function(n){(0,es.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({dateFormat:"yyyy-MM-dd",customInput:(0,el.jsx)(td,{label:e.label}),enableTabLoop:!1,popperPlacement:"bottom-start",maxDate:new Date},e))})}function td(e){var n=e.value,t=e.onClick,r=e.label;return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(tc.Z,{style:{fontWeight:"bold"},children:r}),(0,el.jsxs)("div",{className:"input-group",children:[(0,el.jsx)("input",{type:"text",className:"form-control",value:n,onClick:t,readOnly:!0}),(0,el.jsx)("div",{className:"input-group-append",children:(0,el.jsx)("span",{className:"input-group-text",style:{height:"100%"},children:(0,el.jsx)(ev.G,{icon:eg.fT7})})})]})]})}var tp=t(9206),th=ei.ZP.div(G||(G=(0,en.Z)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding-right: 15px;\n  & > * {\n    margin-left: 15px;\n  }\n"])));ei.ZP.label(L||(L=(0,en.Z)(["\n  margin-bottom: 2px;\n"])));var tf=ei.ZP.div(B||(B=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"])));ei.ZP.span(U||(U=(0,en.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),(0,ei.ZP)(ev.G)(M||(M=(0,en.Z)(["\n  margin-right: 20px;\n"]))),ei.ZP.div(z||(z=(0,en.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),ei.ZP.hr(K||(K=(0,en.Z)(["\n  background-color: black;\n"])));var tx=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},tv="December 01, 2023",tg=(0,eS.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,ea.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,ea.useState)([]),l=c[0],u=c[1],d=(0,ea.useState)(!1);d[0],d[1];var p=(0,ea.useState)((0,ew.F3)(14)),h=p[0],f=p[1],x=(0,ea.useState)(new Date),v=x[0],g=x[1],m=(0,ea.useContext)(e4.SurveyContext),b=function(e){f(e)},j=function(e){g(e)},y=(0,ea.useCallback)(nt()((n=(0,ee.Z)(er().mark(function e(n,a,i){var s,o,c;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(null==t?void 0:t.id,i,n,a);case 2:s=e.sent,c=(o=(0,ex.Z)(s,2))[0],o[1]?r.show({variant:"danger",content:"Failed to fetch metrics"}):(u(c),c.length>0&&(null==m||m.setShowSurvey(!0,"viewMetrics")));case 7:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})),[null==t?void 0:t.clientId,i,h,v]);return(0,ea.useEffect)(function(){y(tx(h),tx(v),i)},[null==t?void 0:t.clientId,i,h,v]),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(tf,{}),(0,el.jsx)("div",{children:(0,el.jsxs)(th,{children:[(0,el.jsx)(tu,{placeholderText:"Start Date",selected:new Date(h),onChange:function(e){return b(e)},minDate:new Date(tv),maxDate:v,label:"Start Date"}),(0,el.jsx)(tu,{placeholderText:"End Date",selected:new Date(v),onChange:function(e){return j(e)},minDate:h,label:"End Date"})]})}),(0,el.jsxs)(ez.mQ,{onChange:function(e){s(e)},activeKey:i,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,el.jsx)("br",{}),o.map(function(e){return(0,el.jsx)(ez.OK,{tab:eU()(e),children:(0,el.jsx)("div",{style:{width:"100%",height:300},children:(null==l?void 0:l.length)>0?(0,el.jsx)(n4.h,{children:(0,el.jsxs)(n7.v,{data:l,margin:{top:20,right:20,bottom:30,left:20},children:[(0,el.jsx)(n6.q,{strokeDasharray:"3 3"}),(0,el.jsx)(n8.K,{dataKey:"event",tick:{fontSize:10},label:{value:"Events",position:"insideBottomRight"}}),(0,el.jsx)(n9.B,{dataKey:"count",label:{value:"Count",angle:-90,position:"insideLeft"}}),(0,el.jsx)(te.u,{}),(0,el.jsx)(tn.D,{}),(0,el.jsx)(tt.$,{dataKey:"count",fill:"#0d6efd",barSize:30,label:{fill:"#0d6efd",fontSize:20,position:"top"},background:{fill:"#eee"}})]})}):(0,el.jsx)("div",{style:{textAlign:"center"},children:(0,el.jsx)(tr.x,{children:"No data available yet!"})})})},e)})]}),(0,el.jsxs)(eP.$,{children:["This tab was released ",tv,". Please refer to"," ",(0,el.jsx)(tp.rU,{href:"https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_administration_guide/auditing_and_events#event_types",external:!0,children:"Redhat's definition"})," ","for event type details."]})]})}),tm=ei.ZP.div(H||(H=(0,en.Z)(["\n  display: flex;\n  flex-direction: row;\n  column-gap: 1.5em;\n  justify-content: center;\n  min-width: 20em;\n  margin: 0;\n  padding: 0;\n"]))),tb=ei.ZP.form(_||(_=(0,en.Z)(["\n  display: flex;\n  flex-direction: column;\n  row-gap: 1.5em;\n\n  .header {\n    margin-top: 1em;\n    display: flex;\n    align-items: center;\n    p {\n      font-weight: bold;\n      padding-right: 0.4em;\n      margin: 0;\n      font-size: 18px;\n    }\n  }\n\n  .bold {\n    font-weight: bold;\n  }\n\n  .env-controls {\n    margin: 0;\n    legend {\n      font-size: unset;\n      font-weight: bold;\n    }\n\n    input {\n      margin-right: 0.2em;\n    }\n\n    label {\n      margin-right: 1em;\n    }\n  }\n\n  .date-picker-container {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    column-gap: 1em;\n  }\n\n  select {\n    margin-left: 0.5em;\n    width: 200px;\n  }\n\n  .button-container {\n    display: flex;\n    flex-diretion: row;\n    align-items: center;\n\n    p {\n      margin: 0;\n      margin-left: 1em;\n    }\n  }\n\n  .error-text {\n    font-size: 14px;\n    color: red;\n    margin: 0;\n    height: 1em;\n  }\n"]))),tj=function(e,n){var t=document.createElement("a");t.download=e,t.href=window.URL.createObjectURL(n),t.dataset.downloadurl=["text/json",t.download,t.href].join(":");var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(r),t.remove()},ty={dev:"Development",test:"Test",prod:"Production"},tw=new Date("February 13, 2024"),tZ=(0,eS.hU)(function(e){var n,t=e.integration,r=e.alert,a=(0,ea.useState)("dev"),i=a[0],s=a[1],o=(null==t?void 0:t.environments)||[],c=(0,ea.useState)(!1),l=c[0],u=c[1],d=(0,ea.useState)((0,ew.F3)(1)),p=d[0],h=d[1],f=(0,ea.useState)(new Date),x=f[0],v=f[1],g=(0,ea.useState)(""),m=g[0],b=g[1],j=(0,ea.useState)(0),y=j[0],w=j[1],Z=(0,ea.useState)(new Date),S=Z[0],P=Z[1],C=(0,ea.useState)(),k=C[0],I=C[1],O=(0,ea.useContext)(e4.SurveyContext),D=(0,ea.useState)(!1),N=D[0],E=D[1];(0,ea.useEffect)(function(){p&&(Date.now()-p.getTime()>1728e5?P(new Date(p.getTime()+1728e5)):P(new Date),x&&(x.getTime()<p.getTime()||x.getTime()-p.getTime()>1728e5)&&v(null))},[p]),(0,ea.useEffect)(function(){x&&p&&x.getTime()<p.getTime()&&b("Please ensure your end date is later than your start date.")},[x]);var R=function(e){b(""),h(e)},T=function(e){b(""),v(e)},F=function(e){if(void 0!==e.total&&void 0!==e.loaded){var n=Math.floor(e.loaded/Number(e.total)*100);n!==y&&w(n)}},A=function(){s("dev"),h((0,ew.F3)(1)),v(new Date)};(0,ea.useEffect)(function(){A()},[t.clientId]);var q=(n=(0,ee.Z)(er().mark(function e(n){var a,s,o,c,l,d,h;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),null==k||k.abort(),I(a=new AbortController),E(!0),e.prev=5,!(!p||!x)){e.next=9;break}return b("Please select a date range."),e.abrupt("return");case 9:return u(!0),e.next=12,ti(t.id,i,p,x,F,a);case 12:if(s=e.sent,c=(o=(0,ex.Z)(s,2))[0],!(l=o[1])){e.next=24;break}if("ERR_CANCELED"!==l.code){e.next=19;break}return e.abrupt("return");case 19:d="Error fetching logs.",(null==l?void 0:l.status)===429&&(d="Too many requests"),r.show({variant:"danger",fadeOut:1e4,closable:!0,content:d}),e.next=27;break;case 24:r.show({variant:"success",fadeOut:1e4,closable:!0,content:null!==(h=null==c?void 0:c.message)&&void 0!==h?h:"Downloaded logs."}),tj("".concat(t.clientId,"-").concat(p.toLocaleString(),"-").concat(x.toLocaleString(),".json"),c.data),null==O||O.setShowSurvey(!0,"downloadLogs");case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(5),console.error("Exception parsing file");case 32:return e.prev=32,u(!1),w(0),E(!1),e.finish(32);case 37:case"end":return e.stop()}},e,null,[[5,29,32,37]])})),function(e){return n.apply(this,arguments)}),G=function(e){s(e.target.value)};return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)(tb,{onSubmit:q,children:[(0,el.jsxs)("div",{className:"header",children:[(0,el.jsx)("p",{children:"Download Logs"}),(0,el.jsx)(nf.Z,{content:"You can download upto 25,000 logs at a time. Result will indicate if all logs in the selected time interval were retrieved or a smaller time interval is required."})]}),(0,el.jsxs)("fieldset",{className:"env-controls",disabled:l,children:[(0,el.jsx)("legend",{children:"Select an Environment"}),o.map(function(e){return(0,el.jsxs)("span",{children:[(0,el.jsx)("input",{id:"radio-".concat(e),type:"radio",name:"environmentSelection",value:e,checked:i===e,onChange:G}),(0,el.jsx)("label",{htmlFor:"radio-".concat(e),children:ty[e]})]},e)})]}),(0,el.jsxs)("div",{children:[(0,el.jsxs)("div",{className:"date-picker-container",children:[(0,el.jsx)(tu,{placeholderText:"Start Date",selected:p,onChange:function(e){return R(e)},minDate:tw,shouldCloseOnSelect:!1,label:"Start Date",showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l}),(0,el.jsx)(tu,{placeholderText:"End Date",selected:x,onChange:function(e){return T(e)},minDate:p,maxDate:S,label:"End Date",shouldCloseOnSelect:!1,showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",disabled:l})]}),(0,el.jsx)("p",{className:"error-text",children:m})]}),(0,el.jsx)("div",{className:"button-container",children:(0,el.jsx)("button",{className:"primary",type:"submit",disabled:!!m||!!l,children:"Download"})})]}),(0,el.jsx)(eF.Z,{id:"logs-modal",showConfirm:!1,title:"Downloading Logs",handleClose:function(){null==k||k.abort(),u(!1),w(0)},content:(0,el.jsxs)(tm,{children:[(0,el.jsx)(eb.rj,{color:"black",visible:l,height:25,width:25,wrapperStyle:{justifyContent:"center"}}),l&&0===y&&(0,el.jsx)("p",{children:"Querying logs..."}),l&&0!==y?(0,el.jsxs)("p",{children:[y,"% downloaded."]}):null]}),openModal:N})]})}),tS=ei.ZP.div(W||(W=(0,en.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),function(e){return e.short?"max-width: 800px;":""}),tP=ei.ZP.div(V||(V=(0,en.Z)(["\n  text-align: center;\n"]))),tC=ei.ZP.div(Y||(Y=(0,en.Z)(["\n  height: var(--field-top-spacing);\n"]))),tk=ei.ZP.div($||($=(0,en.Z)(["\n  margin-bottom: 60px;\n"]))),tI="tech-details",tO="role-management",tD="user-role-management",tN="service-account-role-management",tE="secret",tR="history",tT="metrics",tF="Logs",tA=function(e){var n=e.integration,t=e.children;return(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)("h2",{children:["Integration Details - ",nA()(String(n.id),8,"0")]}),(0,el.jsx)(ez.OC,{children:t})]})},tq=function(e){var n=e.integration,t=e.approvalContext;return(0,el.jsx)(ez.OK,{tab:"Technical Details",children:(0,el.jsx)(tS,{short:!1,children:(0,el.jsx)(em.ZP,{cols:15,children:(0,el.jsxs)(em.ZP.Row,{gutter:[],children:[(0,el.jsx)(em.ZP.Col,{span:7,children:(0,el.jsx)(eT,{integration:n})}),(0,el.jsx)(em.ZP.Col,{span:1}),(0,el.jsxs)(em.ZP.Col,{span:7,children:[(0,el.jsx)(nH,{approvalContext:t}),(0,el.jsx)(nW,{approvalContext:t}),(0,el.jsx)(n5,{approvalContext:t})]})]})})})},tI)},tG=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Role Management",children:(0,el.jsxs)(tS,{children:[(0,el.jsx)("br",{}),(0,el.jsxs)("div",{children:["Please visit our"," ",(0,el.jsx)(ek.default,{external:!0,href:(0,eI.eO)("Creating-a-Role"),children:"wiki page"})," ","for more information on roles."]}),(0,el.jsx)(e6,{integration:n})]})},tO)},tL=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Assign Users to Roles",children:(0,el.jsx)(tS,{children:(0,el.jsx)(nI,{selectedRequest:n})})},tD)},tB=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Assign Service Account to Roles",children:(0,el.jsx)(tS,{children:(0,el.jsx)(n2,{selectedRequest:n})})},tN)},tU=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Secrets",children:(0,el.jsx)(tS,{short:!0,children:(0,el.jsx)(eL,{selectedRequest:n})})},tE)},tM=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Metrics",children:(0,el.jsx)(tS,{short:!1,children:(0,el.jsx)(tg,{integration:n})})},tT)},tz=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Logs",children:(0,el.jsx)(tS,{short:!1,children:(0,el.jsx)(tZ,{integration:n})})},tF)},tK=function(e){var n=e.integration;return(0,el.jsx)(ez.OK,{tab:"Change History",children:(0,el.jsx)(tS,{short:!0,children:(0,el.jsx)(nR,{requestId:n.id})})},tR)},tH=function(e){var n,t,r=e.integration,a=(0,ea.useState)(tI),i=a[0],s=a[1];if(!r)return null;var o=r.status,c=r.environments,l=r.bceidApproved,u=void 0!==l&&l,d=r.githubApproved,p=void 0!==d&&d,h=(r.digitalCredentialApproved,r.bcServicesCardApproved),f=void 0!==h&&h,x=(0,nO.n)(o||"draft"),v=(void 0===c?[]:c).includes("prod"),g=(0,nT.Jx)(r),m=(0,nT.dV)(r),b=(0,nT.S3)(r),j=(0,nT.e$)(r),y=(0,ew.he)(r),w=(0,ew.R5)(r),Z=(0,ew.kF)(r),S="gold"===r.serviceType,P="service-account"!==r.authType,C="both"===r.authType;if("In Draft"===x)return(0,el.jsx)(tA,{integration:r,children:(0,el.jsxs)(ef,{variant:"info",children:[(0,el.jsx)("div",{children:(0,el.jsx)("strong",{children:"Your request has not been submitted."})}),(0,el.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var k=[],I=[],O=(null===(n=r.devIdps)||void 0===n?void 0:n.length)&&(null===(t=r.devIdps)||void 0===t?void 0:t.every(function(e){return["digitalcredential","bcservicescard"].includes(e)}));"Submitted"===x?["planFailed","applyFailed"].includes(r.status)?(k.push((0,el.jsx)(ez.OK,{tab:"Technical Details",children:(0,el.jsx)(tS,{short:!1,children:(0,el.jsx)("div",{style:{display:"inline-flex",margin:"20px 0 20px 0",background:"#FFCCCB",borderRadius:"5px"},children:(0,el.jsx)("div",{style:{padding:5},children:(0,el.jsxs)(eP.B,{children:["Your request for an integration could not be completed. Please"," ",(0,el.jsx)(ek.default,{external:!0,href:"mailto:bcgov.sso@gov.bc.ca",children:"contact the Pathfinder SSO Team"})]})})})})},tI)),I.push(tI)):(k.push((0,el.jsx)(ez.OK,{tab:"Technical Details",children:(0,el.jsx)(tS,{short:!1,children:(0,el.jsxs)(em.ZP,{cols:15,children:[(0,el.jsx)("br",{}),(0,el.jsxs)(tP,{children:[(0,el.jsx)(tC,{}),(0,el.jsx)(eb.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0}),(0,el.jsx)(tk,{})]})]})})},tI)),I.push(tI)):"Completed"===x&&(k.push(tq({integration:r,approvalContext:{hasProd:v,hasBceid:g,hasGithub:m,hasDigitalCredential:b,hasBcServicesCard:j,bceidApproved:u,githubApproved:p,bcServicesCardApproved:f,awaitingBceidProd:g&&v&&!u,awaitingGithubProd:m&&v&&!p,awaitingBcServicesCardProd:j&&v&&!f,bceidProdApplying:y,githubProdApplying:w,bcServicesCardProdApplying:Z}})),I.push(tI),O||(k.push(tG({integration:r})),I.push(tO)),S&&P&&!O&&(k.push(tL({integration:r})),I.push(tD)),S&&(!P||C)&&(k.push(tB({integration:r})),I.push(tN)),r.publicAccess||(k.push(tU({integration:r})),I.push(tE)),k.push(tK({integration:r})),I.push(tR),k.push(tM({integration:r})),I.push(tT),k.push(tz({integration:r})),I.push(tF));var D=i;return I.includes(i)||(D=I[0]),(0,el.jsx)(tA,{integration:r,children:(0,el.jsx)(ez.mQ,{activeKey:D,onChange:function(e){s(e)},tabBarGutter:30,destroyInactiveTabPane:!0,children:k})})},t_=t(11163),tW=t(27008),tV=t(35927),tY=t(24791),t$=ei.ZP.tr(J||(J=(0,en.Z)(["\n  float: right;\n  padding-right: 0.5em;\n"]))),tJ=ei.ZP.p(Q||(Q=(0,en.Z)(["\n  margin: 0;\n"])));function tQ(){return(0,el.jsx)("span",{style:{float:"right",paddingRight:"1em"},children:"Actions"})}var tX=function(e){return nA()(String(e),8,"0")},t0=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&(null==t?void 0:t.length)!=0?(0,el.jsx)("button",{"data-testid":"request-integration",onClick:n,className:"callout",children:"+ Request SSO Integration"}):(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("p",{children:(0,el.jsx)("b",{children:"To request an integration for a Standard Realm, youll need the following information:"})}),(0,el.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,el.jsxs)(em.ZP,{cols:2,style:{textAlign:"left"},children:[(0,el.jsxs)(em.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,el.jsxs)(em.ZP.Col,{span:1,children:[(0,el.jsx)(ez.wk,{number:1,title:"Project Information",children:null}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Project Name"]}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Project Team Members (Optional)"]}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Product Owner or Technical Contact"]})]}),(0,el.jsxs)(em.ZP.Col,{span:1,children:[(0,el.jsx)(ez.wk,{number:2,title:"Technical Info",children:null}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Client type (",(0,el.jsx)(ek.default,{href:(0,eI.eO)("Useful-References#client"),children:"Public or Confidential, learn more"}),")"]}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Environments (Development, Test, Production)"]}),(0,el.jsxs)(tJ,{children:[(0,el.jsx)(ev.G,{icon:eg.LEp})," Redirect URIs for selected environments"]})]})]}),(0,el.jsx)("p",{style:{marginTop:"1.25rem"},children:"*Youll be able to save and return your integration request, anytime throughout the request form."})]}),(0,el.jsx)("button",{"data-testid":"request-integration",onClick:n,className:"callout",children:"+ Request SSO Integration"})]})]})},t1=(0,eS.hU)(function(e){var n,t,r,a=e.setIntegration,i=e.setIntegrationCount,s=e.alert,o=(0,t_.useRouter)(),c=o.query.integr,l=(0,ea.useState)(!0),u=l[0],d=l[1],p=(0,ea.useState)(!1),h=p[0],f=p[1],x=(0,ea.useState)([]),v=x[0],g=x[1],m=(0,ea.useState)(c&&Number(c)||void 0),b=m[0],j=m[1],y=(n=(0,ee.Z)(er().mark(function e(){return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.push("/request");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),w=function(e){j(e.id),a(e)},Z=function(e){var n=e||[];if(g(n),i(n.length),b){var t=e.find(function(e){return(null==e?void 0:e.id)===b});t?w(t):(null==e?void 0:e.length)>0&&w(e[0])}else(null==e?void 0:e.length)>0&&w(e[0])},S=(t=(0,ee.Z)(er().mark(function e(){var n,t,r;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,tW.XJ)();case 3:n=e.sent,r=(t=(0,ex.Z)(n,2))[0],f(!!t[1]),Z(r||[]),d(!1);case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});(0,ea.useEffect)(function(){S(),o.replace("/my-dashboard/integrations")},[]),(0,ea.useEffect)(function(){return(0,ew.rn)(v||[])&&(clearInterval(r),r=setInterval((0,ee.Z)(er().mark(function e(){var n,t,a;return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,tW.XJ)();case 2:n=e.sent,a=(t=(0,ex.Z)(n,2))[0],t[1]?clearInterval(r):Z(a||[]);case 7:case"end":return e.stop()}},e)})),5e3)),function(){r&&clearInterval(r)}},[v,b]);var P=h?(0,el.jsx)(tY.q1,{}):v&&0!==v.length?(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("h2",{children:"Integrations"}),(0,el.jsx)(ni.Z,{headers:[{accessor:"id",Header:"Request ID"},{accessor:"projectName",Header:"Project Name"},{accessor:"status",Header:"Status"},{accessor:"authType",Header:"Usecase"},{accessor:"serviceType",Header:"Service Type"},{accessor:"actions",Header:(0,el.jsx)(tQ,{}),disableSortBy:!0}],data:null==v?void 0:v.map(function(e){return{id:tX(e.id),projectName:e.projectName,status:(0,nO.n)(e.status||"draft"),authType:tV.F[e.authType||"browser-login"],serviceType:"Gold",actions:(0,el.jsx)(t$,{children:(0,el.jsx)(ns.ZP,{request:e,onDelete:function(n,t){t?s.show({variant:"danger",content:"Failed to delete integration ".concat(e.projectName,".")}):S()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})}}),activateRow:function(e){var n=e.cells[0].value;v.forEach(function(e){e.id==n&&w(e)})},activeSelector:b&&tX(b),rowSelectorKey:"id",colfilters:[]})]}):(0,el.jsx)(tY.Vs,{message:"No Requests Submitted"});return u?(0,el.jsx)(nN.Z,{}):(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)("br",{}),(0,el.jsx)(t0,{handleNewIntegrationClick:y,integrations:v}),(0,el.jsx)("br",{}),(0,el.jsx)("br",{}),P]})}),t2=t(49936),t3=ei.ZP.div(X||(X=(0,en.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 1;\n"]))),t5=function(e){e.session;var n,t=(0,t_.useRouter)(),r=(0,ea.useState)(null),a=r[0],i=r[1],s=(0,ea.useState)(1),o=s[0],c=s[1],l=(0,ea.useState)(!1),u=l[0],d=l[1],p="integration-failed-modal",h=(n=(0,ee.Z)(er().mark(function e(){return er().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.location.hash=p);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),f=(0,ea.useState)(""),x=f[0],v=f[1];return(0,ea.useEffect)(function(){var e;v(t.query.requestId),(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.integrationFailedMessageModal)==="true"&&(d(!0),h())},[t.query.showModal]),(0,el.jsxs)(el.Fragment,{children:[(0,el.jsx)(t2.Z,{tab:"integrations",leftPanel:function(){return(0,el.jsx)(t1,{setIntegration:i,setIntegrationCount:c})},rightPanel:function(){return a&&(0,el.jsx)(tH,{integration:a})},showResizable:o>0}),(0,el.jsx)(eF.Z,{id:p,openModal:u,handleClose:function(){return d(!1)},title:"".concat(x," - Integration request failed"),content:(0,el.jsxs)("div",{children:[(0,el.jsx)("div",{children:(0,el.jsx)("p",{children:"The integration request could not be completed. Please contact the Pathfinder SSO Team."})}),(0,el.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[(0,el.jsx)(t3,{children:(0,el.jsx)("div",{children:(0,el.jsxs)("a",{href:"https://chat.developer.gov.bc.ca/channel/sso",target:"_blank",title:"Rocket Chat",style:{color:"#0d6efd"},children:[(0,el.jsx)(ev.G,{size:"1x",icon:eg.Z6I,color:"#0d6efd"})," Rocketchat"]})})}),(0,el.jsx)(t3,{children:(0,el.jsx)("div",{children:(0,el.jsxs)("a",{href:"mailto:bcgov.sso@gov.bc.ca",title:"Pathfinder SSO",style:{color:"#0d6efd"},children:[(0,el.jsx)(ev.G,{size:"1x",icon:eg.FU$,color:"#0d6efd"})," Email"]})})})]})]}),showCancel:!1,showConfirm:!1,skipCloseOnConfirm:!0,closable:!0})]})}},27008:function(e,n,t){"use strict";t.d(n,{A_:function(){return S},H0:function(){return C},Jl:function(){return D},OS:function(){return k},Uw:function(){return N},WN:function(){return O},XJ:function(){return P},hG:function(){return Z},zD:function(){return I}});var r,a,i,s,o,c,l,u,d,p=t(50029),h=t(87794),f=t.n(h),x=t(10433),v=t(75316),g=t.n(v),m=t(25751),b=t.n(m),j=t(76427),y=t.n(j),w=t(58766),Z=(r=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.post("requests",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,w.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)}),S=(a=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.post("request",{requestId:b()(n)?parseInt(n):n}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,w.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return a.apply(this,arguments)}),P=(i=(0,p.Z)(f().mark(function e(){var n,t,r=arguments;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={params:{include:r.length>0&&void 0!==r[0]?r[0]:"active"}},e.prev=2,e.next=5,x.e.get("requests",n).then(function(e){return e.data});case 5:return t=e.sent,t=g()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(w.UB),null]);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",(0,x.z)(e.t0));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(){return i.apply(this,arguments)}),C=(s=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.get("team-integrations/".concat(n)).then(function(e){return e.data});case 3:return t=e.sent,t=g()(t,["createdAt"],["desc"]),e.abrupt("return",[t.map(w.UB),null]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),k=(o=(0,p.Z)(f().mark(function e(n,t){var r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.post("requests/".concat(n,"/restore"),{email:t}).then(function(e){return e.data});case 3:return r=e.sent,e.abrupt("return",[(0,w.UB)(r),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return o.apply(this,arguments)}),I=(c=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.post("requests-all",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[{count:t.count,rows:t.rows.map(w.UB)},null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return c.apply(this,arguments)}),O=(l=(0,p.Z)(f().mark(function e(n){var t,r,a,i,s,o=arguments;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,i="requests",t&&(i="".concat(i,"?submit=true")),(n=y()(n,["user","lastChanges"])).devLoginTitle=n.devLoginTitle||"",n.testLoginTitle=n.testLoginTitle||"",n.prodLoginTitle=n.prodLoginTitle||"",n.additionalRoleAttribute=n.additionalRoleAttribute||"",n.clientId=n.clientId||"",n.primaryEndUsers=null!==(r=n.primaryEndUsers)&&void 0!==r?r:[],n.primaryEndUsersOther=null!==(a=n.primaryEndUsersOther)&&void 0!==a?a:"",e.next=14,x.e.put(i,n).then(function(e){return e.data});case 14:return s=e.sent,e.abrupt("return",[(0,w.UB)(s),null]);case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",(0,x.z)(e.t0));case 21:case"end":return e.stop()}},e,null,[[1,18]])})),function(e){return l.apply(this,arguments)}),D=(u=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.delete("requests",{params:{id:n}}).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return u.apply(this,arguments)}),N=(d=(0,p.Z)(f().mark(function e(n){var t;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.e.put("request-metadata",n).then(function(e){return e.data});case 3:return t=e.sent,e.abrupt("return",[(0,w.UB)(t),null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,x.z)(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return d.apply(this,arguments)})},9595:function(e,n,t){"use strict";t.d(n,{Di:function(){return i},ON:function(){return r},TE:function(){return a}});var r=function(e){return JSON.stringify(e,void 0,2)},a=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(e){return document.body.removeChild(n),!1}},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),a=document.createElement("a");a.href=r,a.setAttribute("download",n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(24104)}])}},function(e){e.O(0,[662,925,661,706,620,822,479,263,762,845,774,888,179],function(){return e(e.s=80382)}),_N_E=e.O()}]);