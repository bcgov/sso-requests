(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{71057:function(e,n,t){"use strict";var r=t(83024),i=t(63055),o={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(i.n5,";\n      ")},large:{button:"\n        font-size: ".concat(i.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(i.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},a=(0,r.applyTheme)(o,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=a},49910:function(e,n,t){"use strict";t.d(n,{FE:function(){return x}});var r,i,o=t(71383),a=t(67294),s=t(11163),c=t(64735),l=t(85444),u=t(85330),d=t(59912),p=t(60377),h=t(23130),f=t(85893),x=[{maxWidth:900,marginTop:0,marginLeft:10,marginRight:10,marginUnit:"px",horizontalAlign:"none"},{width:480,marginTop:0,marginLeft:2.5,marginRight:2.5,marginUnit:"rem",horizontalAlign:"none"}],v=l.default.div(r||(r=(0,o.Z)(["\n  overflow: auto;\n"]))),m=l.default.div(i||(i=(0,o.Z)(["\n  padding-top: 2px;\n"]))),g=a.createContext({});n.ZP=function(e){var n,t=e.tab,r=e.leftPanel,i=e.rightPanel,o=e.children,l=(0,s.useRouter)(),j=(0,a.useReducer)(p.Z,p.E),b=j[0],y=j[1],w=(0,a.useContext)(h.SessionContext)||{},Z=w.user,k=w.enableGold,C=null===Z||void 0===Z||null===(n=Z.integrations)||void 0===n?void 0:n.find((function(e){return"silver"===e.serviceType})),P=(0,a.useMemo)((function(){return{state:b,dispatch:y}}),[b,y]),I=(0,f.jsxs)(u.mQ,{onChange:function(e){l.replace("/my-dashboard/".concat(e))},activeKey:t,tabBarGutter:30,children:[(0,f.jsx)(u.OK,{tab:"My Projects"},"integrations"),(0,f.jsx)(u.OK,{tab:"My Teams"},"teams"),k&&C&&(0,f.jsx)(u.OK,{tab:"*New - Silver to Gold Upgrade"},"s2g")]});return(0,f.jsx)(d.Z,{rules:x,children:(0,f.jsx)(g.Provider,{value:P,children:o?(0,f.jsxs)(m,{children:[I,o]}):(0,f.jsx)(c.ZP,{cols:10,children:(0,f.jsxs)(c.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,f.jsx)(c.ZP.Col,{span:6,children:(0,f.jsxs)(v,{children:[I,r&&r(b,y)]})}),(0,f.jsx)(c.ZP.Col,{span:4,children:i&&i(b,y)})]})})})})}},6178:function(e,n,t){"use strict";var r,i=t(71383),o=t(67294),a=t(11163),s=t(46312),c=t(85444),l=t(85330),u=t(59912),d=t(60377),p=t(23130),h=t(49910),f=t(85893),x=c.default.div(r||(r=(0,i.Z)(["\n  height: 100%;\n  overflow: auto;\n"]))),v=o.createContext({});n.Z=function(e){var n,t=e.tab,r=e.leftPanel,i=e.rightPanel,c=e.showResizable,m=void 0===c||c,g=(e.children,(0,a.useRouter)()),j=(0,o.useReducer)(d.Z,d.E),b=j[0],y=j[1],w=(0,o.useContext)(p.SessionContext)||{},Z=w.user,k=w.enableGold,C=null===Z||void 0===Z||null===(n=Z.integrations)||void 0===n?void 0:n.find((function(e){return"silver"===e.serviceType})),P=(0,o.useMemo)((function(){return{state:b,dispatch:y}}),[b,y]),I=(0,f.jsxs)(l.mQ,{onChange:function(e){g.replace("/my-dashboard/".concat(e))},activeKey:t,tabBarGutter:30,children:[(0,f.jsx)(l.OK,{tab:"My Projects"},"integrations"),(0,f.jsx)(l.OK,{tab:"My Teams"},"teams"),k&&C&&(0,f.jsx)(l.OK,{tab:"*New - Silver to Gold Upgrade"},"s2g")]});return(0,f.jsx)(u.Z,{rules:h.FE,children:(0,f.jsxs)(v.Provider,{value:P,children:[I,m?(0,f.jsx)(s.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,f.jsx)(x,{children:r&&r(b,y)})}):r&&r(b,y),(0,f.jsx)("br",{}),i&&i(b,y)]})})}},59854:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return At}});var r=t(67294),i=t(71383),o=t(85444),a=t(92814),s=t(51436),c=t(59499),l=t(16530),u=t(69829),d=t(85893);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=(0,l._v)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),x=function(e){switch(e){case"success":return u.CheckCircle;case"info":return u.InfoCircle;case"warning":return u.ExclamationTriangle;default:return u.ExclamationCircle}};function v(e){return(0,d.jsxs)(f,h(h({},e),{},{children:[(0,d.jsx)(f.Group,{style:{marginTop:"1px"},children:(0,d.jsx)(u.FaSVG,{children:(0,d.jsx)("path",{fill:"currentColor",d:x(e.variant)})})}),(0,d.jsx)(f.Content,{children:e.content?e.content:e.children}),e.closable&&(0,d.jsx)(f.Group,{align:"right",children:(0,d.jsx)(f.Close,{children:"x"})})]}))}var m,g,j,b,y,w,Z,k,C,P,I,S,O,N,D=t(16835),E=t(50029),R=t(87794),B=t.n(R),F=t(64735),T=t(56839),z=t(21963),A=function(){var e=(0,E.Z)(B().mark((function e(n,t){var r;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.e.post("installation",{requestId:n,environment:t}).then((function(e){return e.data}));case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),G=function(){var e=(0,E.Z)(B().mark((function e(n,t){var r;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.e.put("installation",{requestId:n,environment:t}).then((function(e){return e.data}));case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),L=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.idp,i=n.property,o=n.searchKey,e.prev=1,e.next=4,z.e.post("keycloak/users",{environment:t,idp:r,property:i,searchKey:o}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.search,o=void 0===i?"":i,e.prev=1,e.next=4,z.e.post("keycloak/roles",{environment:t,integrationId:r,search:o}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,o=n.compositeRoleNames,e.prev=1,e.next=4,z.e.post("keycloak/set-composite-roles",{environment:t,integrationId:r,roleName:i,compositeRoleNames:o}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,z.e.post("keycloak/get-composite-roles",{environment:t,integrationId:r,roleName:i}).then((function(e){return e.data}));case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a,s,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,o=n.first,a=void 0===o?0:o,s=n.max,c=void 0===s?50:s,e.prev=1,e.next=4,z.e.post("keycloak/user-roles",{environment:t,integrationId:r,username:i,first:a,max:c}).then((function(e){return e.data}));case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,o=n.roleName,a=n.mode,e.prev=1,e.next=4,z.e.put("keycloak/user-role",{environment:t,integrationId:r,username:i,roleName:o,mode:a}).then((function(e){return e.data}));case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,o=n.roleNames,e.prev=1,e.next=4,z.e.put("keycloak/user-roles",{environment:t,integrationId:r,username:i,roleNames:o}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a,s,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,o=n.first,a=void 0===o?0:o,s=n.max,c=void 0===s?50:s,e.prev=1,e.next=4,z.e.post("keycloak/role-users",{environment:t,integrationId:r,roleName:i,first:a,max:c}).then((function(e){return e.data}));case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.integrationId,r=n.roles,e.prev=1,e.next=4,z.e.post("keycloak/bulk-roles",{integrationId:t,roles:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,z.e.post("keycloak/delete-role",{environment:t,integrationId:r,roleName:i}).then((function(e){return e.data}));case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),J=t(71057),Q=t(73923),X=t(31513),$=t(63055),ee=t(15812),ne=t(66886),te={idir:"IDIR",azureidir:"Azure IDIR",bceidbasic:"BCeID Basic",bceidbusiness:"BCeID Business",bceidboth:"BCeID Both"},re=t(74150),ie=o.default.div(m||(m=(0,i.Z)(["\n  text-align: center;\n"]))),oe=o.default.div(g||(g=(0,i.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),$.n5),ae=o.default.span(j||(j=(0,i.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),se=o.default.div(b||(b=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),ce=o.default.div(y||(y=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),le=(0,ee.hU)((function(e){var n=e.integration,t=e.alert,i=(0,r.useState)(!1),o=i[0],c=i[1],l=function(){var e=(0,E.Z)(B().mark((function e(t){var r,i,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,A(n.id,t);case 3:return r=e.sent,i=(0,D.Z)(r,1),o=i[0],c(!1),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,E.Z)(B().mark((function e(n){var r,i,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:r=e.sent,(0,Q.TE)((0,Q.ON)(r)),i=r?"success":"danger",o=r?"Installation copied to clipboard":"Failed to download installation",t.show({variant:i,fadeOut:1e4,closable:!0,content:o});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,E.Z)(B().mark((function e(t){var r;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:r=e.sent,(0,Q.Di)((0,Q.ON)(r),"".concat(n.projectName,"-installation-").concat(t,".json"));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o?(0,d.jsxs)(ie,{children:[(0,d.jsx)(se,{}),(0,d.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(se,{}),(0,d.jsx)(ce,{children:"Installation JSONs"}),(0,d.jsx)("br",{}),(0,d.jsx)(F.ZP,{cols:3,children:(0,X.Dy)(n).map((function(e){if("service-account"!==n.authType&&0===e.idps.length)return null;var t=e.idps.length>0?"(".concat(e.idps.map((function(e){return te[e]})).join(", "),")"):"";return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(F.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,d.jsx)(F.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,d.jsxs)(oe,{children:[e.display," ",t]})})}),(0,d.jsx)(F.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,d.jsxs)(F.ZP.Col,{span:3,children:[(0,d.jsx)(J.Z,{size:"medium",variant:"grey",onClick:function(){return u(e.name)},children:"Copy"}),"\xa0",(0,d.jsx)(J.Z,{size:"medium",variant:"grey",onClick:function(){return p(e.name)},children:"Download"}),"\xa0\xa0",(0,d.jsx)(a.G,{color:"green",icon:s.f8k,title:"Ready"}),"\xa0",(0,d.jsx)(ae,{children:"Ready"})]})}),(0,d.jsx)("br",{})]},e.name)}))}),(0,d.jsxs)(ne.Z,{children:["For more information on how to use these details, or for the public endpoints associated to your client, see"," ",(0,d.jsx)(re.ZP,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#setting-up-your-keycloak-client",external:!0,children:"here"}),"."]})]})})),ue=t(4826),de=t(61165),pe=o.default.div(w||(w=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),he=o.default.span(Z||(Z=(0,i.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),fe=(0,o.default)(a.G)(k||(k=(0,i.Z)(["\n  margin-right: 20px;\n"]))),xe=o.default.div(C||(C=(0,i.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),ve=o.default.hr(P||(P=(0,i.Z)(["\n  background-color: black;\n"]))),me=(0,ee.hU)((function(e){var n=e.selectedRequest,t=e.alert,i=(0,r.useState)(null),o=i[0],a=i[1],c=(0,X.Dy)(n),l=function(){var e=(0,E.Z)(B().mark((function e(){var r,i,a,s,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(n.id,(null===o||void 0===o?void 0:o.name)||null);case 2:r=e.sent,i=(0,D.Z)(r,2),a=i[0],s=i[1],c=s?"danger":"success",l=s?"Failed to regenerate secret":"Client Secret Successfully Updated",t.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(a,s);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(xe,{children:[(0,d.jsx)(fe,{icon:s.eHv,color:"black",title:"Warning",size:"2x"}),(0,d.jsxs)("strong",{children:["You're About to Change Your Client Secret for Your ",null===o||void 0===o?void 0:o.display," Environment."]})," "]}),(0,d.jsx)(ve,{}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,d.jsx)("li",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]})]});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(pe,{}),c.map((function(e){return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsxs)(he,{children:[e.display,": "]}),!n.publicAccess&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(ue.ZP,{type:"button",onClick:function(){return function(e){a(e),window.location.hash="confirm-new-secret"}(e)},children:"Change your client secret"})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]},e.name)}))]}),(0,d.jsx)(de.Z,{id:"confirm-new-secret",content:u,onConfirm:l,icon:s.eHv,title:"You're About to Change Your Client Secret",closable:!0})]})})),ge=t(27168),je=t(96486),be=t(246),ye=t.n(be),we=t(11915),Ze=t(69696),ke=t(85330);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie,Se=(0,o.default)(Ze.ZP)(I||(I=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  text-align: left !important;\n\n  & .pg-modal-main {\n    margin: auto;\n    box-shadow: 5px 5px 10px black;\n  }\n"]))),Oe=(0,o.default)(Ze.ZP.Header)(S||(S=(0,i.Z)(["\n  font-size: 1.5em;\n  padding: 0.75em;\n  background: #38598a;\n  color: #fff;\n  & a {\n    float: right;\n  }\n"]))),Ne=(0,o.default)(a.G)(O||(O=(0,i.Z)(["\n  margin-right: 5px;\n  height: 30px;\n"]))),De=o.default.div(N||(N=(0,i.Z)(["\n  min-width: 350px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: "," & button {\n    min-width: 150px;\n    display: inline-block;\n  }\n"])),(function(e){return"none"===e.buttonAlign?"space-between;":"".concat(e.buttonAlign,";")})),Ee={open:je.noop,close:je.noop,updateConfig:je.noop,getId:function(){return 1}},Re=function(e,n){var t=e.id,i=void 0===t?(new Date).getTime().toString():t,o=e.title,c=void 0===o?"":o,l=e.onConfirm,u=void 0===l?function(e,n){return!0}:l,p=e.onCancel,h=void 0===p?je.noop:p,f=e.onClose,x=void 0===f?je.noop:f,v=e.closable,m=void 0===v||v,g=e.children,j=e.icon,b=void 0===j?s.eHv:j,y=e.confirmButtonText,w=void 0===y?"Confirm":y,Z=e.cancelButtonText,k=void 0===Z?"Cancel":Z,C=e.confirmButtonVariant,P=void 0===C?"bcPrimary":C,I=e.cancelButtonVariant,S=void 0===I?"bcSecondary":I,O=e.showConfirmButton,N=void 0===O||O,D=e.showCancelButton,R=void 0===D||D,F=e.buttonAlign,z=void 0===F?"none":F,A=e.style,G=void 0===A?{}:A,L={confirmButtonText:w,cancelButtonText:k,confirmButtonVariant:P,cancelButtonVariant:S,showConfirmButton:N,showCancelButton:R,buttonAlign:z},K=(0,r.useRef)(),M=(0,r.useState)(!1),U=M[0],q=M[1],V=(0,r.useState)(null),Y=V[0],_=V[1],H=(0,r.useState)(L),W=H[0],J=H[1];(0,r.useImperativeHandle)(n,(function(){return{open:function(e){_(e),window.location.hash=i},close:function(e){J(Pe({},L)),x(K,Y,e),window.location.hash=(null===e||void 0===e?void 0:e._hash)||(null===Y||void 0===Y?void 0:Y._hash)||"#"},updateConfig:function(e){J(Pe(Pe({},W),e))},getId:function(){return i}}}));var Q=function(){var e=(0,E.Z)(B().mark((function e(){var n;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,u(K,Y);case 3:n=e.sent,q(!1),!1!==n&&(J(Pe({},L)),window.location.hash=(null===Y||void 0===Y?void 0:Y._hash)||"#");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,E.Z)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(K,Y),J(Pe({},L)),window.location.hash=(null===Y||void 0===Y?void 0:Y._hash)||"#";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"function"===typeof g&&(g=g(Y));var $=[];return"object"===typeof g&&(Array.isArray(g)?$=g:$.push(g)),$=r.Children.map($,(function(e,n){return(0,r.cloneElement)(e,{ref:K})})),(0,d.jsxs)(Se,{id:i,children:[(0,d.jsxs)(Oe,{title:c,as:"div",children:[b&&(0,d.jsx)(Ne,{icon:b,title:"Information",size:"2x",style:{paddingRight:"10px"}}),c,m&&(0,d.jsx)(Ze.ZP.Close,{onClick:X,title:"cancel",children:(0,d.jsx)(a.G,{icon:s.NBC,size:"lg"})})]}),(0,d.jsxs)(Ze.ZP.Content,{style:G,children:[$,(0,d.jsxs)(De,{buttonAlign:W.buttonAlign,children:[W.showCancelButton&&(0,d.jsx)(ke.zx,{variant:W.cancelButtonVariant,onClick:X,type:"button",children:W.cancelButtonText}),W.showConfirmButton&&(0,d.jsx)(ke.zx,{onClick:Q,variant:W.confirmButtonVariant,type:"button",className:"text-center",children:U?(0,d.jsx)(T.rj,{color:"#FFF",height:18,width:50,wrapperClass:"d-block",visible:U}):W.confirmButtonText})]})]})]})},Be=(0,r.forwardRef)(Re),Fe=t(76691),Te=t(96807),ze=o.default.div(Ie||(Ie=(0,i.Z)(["\n  text-align: center;\n"]))),Ae=[{value:5,text:"5 per page"},{value:10,text:"10 per page"},{value:15,text:"15 per page"},{value:30,text:"30 per page"},{value:50,text:"50 per page"},{value:100,text:"100 per page"}];function Ge(e){var n=e.variant,t=e.headers,i=e.children,o=void 0===i?function(){return(0,d.jsx)(d.Fragment,{})}:i,a=e.pagination,s=void 0===a||a,c=e.pageLimits,l=void 0===c?Ae:c,u=e.searchKey,p=e.searchPlaceholder,h=e.filters,f=void 0===h?[]:h,x=e.searchLocation,v=e.totalColSpan,m=e.searchColSpan,g=e.filterColSpan,j=e.showFilters,b=void 0===j||j,y=e.showContent,w=void 0===y||y,Z=e.headerAlign,k=e.headerGutter,C=e.onSearch,P=e.onEnter,I=e.loading,S=e.rows,O=void 0===S?[]:S,N=e.rowPlaceholder,D=void 0===N?"No records found.":N,E=(0,r.useState)(l[0]),R=E[0],B=E[1],F=(0,r.useState)(1),T=F[0],z=F[1],A=(0,r.useMemo)((function(){var e=R.value,n=(T-1)*e;return O.slice(n,n+e)}),[O,T,R]);return(0,d.jsx)(Te.Z,{variant:n,headers:t,pagination:s,pageLimits:l,searchKey:u,searchPlaceholder:p,filters:f,page:T,limit:R.value,rowCount:O.length,onSearch:C,onEnter:P,loading:I,onLimit:function(e){z(1),B(l.find((function(n){return n.value===e}))||l[0])},onPrev:function(e){z(e)},onNext:function(e){z(e)},searchLocation:x,totalColSpan:v,searchColSpan:m,filterColSpan:g,showFilters:b,showContent:w,headerAlign:Z,headerGutter:k,children:O.length>0?A.map(o):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:t.length,children:(0,d.jsx)(ze,{children:D})})})})}var Le,Ke,Me,Ue,qe,Ve=(0,r.memo)(Ge),Ye=t(88742);function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function He(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var We=o.default.table(Le||(Le=(0,i.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),Je=o.default.span(Ke||(Ke=(0,i.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),Qe=o.default.div(Me||(Me=(0,i.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),Xe=o.default.div(Ue||(Ue=(0,i.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),$e=o.default.div(qe||(qe=(0,i.Z)(["\n  color: #ff0000;\n"]))),en={name:"",envs:["dev"]};function nn(e,n){var t=e.integrationId,i=e.environments,o=void 0===i?["dev"]:i,c=(0,r.useState)(!1),l=c[0],u=c[1],p=(0,r.useState)({}),h=p[0],f=p[1],x=(0,r.useState)([en]),v=x[0],m=x[1];(0,r.useImperativeHandle)(n,(function(){return{submit:function(){var e=(0,E.Z)(B().mark((function e(){var n,r,i,o,a,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,l&&(n=[],(0,je.forEach)(h,(function(e,t){n.push({name:t,envs:e})}))),e.next=4,H({integrationId:t,roles:n});case 4:return r=e.sent,i=(0,D.Z)(r,2),o=i[0],i[1],a={},s=!1,(0,je.forEach)(o,(function(e){e.failure.length>0&&(0,je.forEach)(e.failure,(function(n){a[n]||(a[n]=[]),a[n].push(e.env),s=!0}))})),f(a),u(!0),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),reset:function(){m([en]),f({}),u(!1)}}}));var g=function(){var e=(0,E.Z)(B().mark((function e(n,t,r){var i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=v.map((function(e,r){return r===n?{name:e.name,envs:t.map((function(e){return e.value}))}:e})),m(i);case 2:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();return(0,d.jsx)("div",{children:(0,d.jsxs)(We,{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"role",children:"Role Name"}),(0,d.jsx)("th",{className:"env",children:"Environments"}),(0,d.jsx)("th",{})]})}),(0,d.jsxs)("tbody",{children:[v.length>0?v.map((function(e,n){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"role",children:(0,d.jsx)(we.ZP,{size:"small",minLength:"2",maxLength:"100",value:e.name,disabled:l,onChange:function(e){return function(e,n){var t=v.map((function(t,r){return r===e?{name:n,envs:t.envs}:t}));m(t)}(n,e.target.value)}})}),(0,d.jsx)("td",{className:"env",children:(0,d.jsx)(ge.ZP,{value:e.envs.map((function(e){return{value:e,label:e}})),options:o.map((function(e){return{value:e,label:e}})),isMulti:!0,isDisabled:l,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return g(n,e,t)},styles:{multiValue:function(n,t){return h[e.name]&&h[e.name].includes(t.children)?He(He({},n),{},{backgroundColor:"#F1BFBF"}):n}}})}),(0,d.jsx)("td",{children:!l&&v.length>1&&(0,d.jsx)(Je,{onClick:function(){return function(e){m(v.filter((function(n,t){return t!==e})))}(n)},children:(0,d.jsx)(a.G,{style:{color:"#FF0303"},icon:s.uMC,title:"Remove Role"})})})]})})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:3,children:"No roles added."})}),(0,d.jsx)("tr",{children:l?(0,d.jsx)("td",{colSpan:3,children:(0,d.jsxs)(Qe,{children:[(0,d.jsx)(Xe,{children:(0,d.jsx)(a.G,{icon:s.RLE,color:"#D44331",title:"Edit",size:"lg"})}),(0,d.jsxs)(Xe,{children:["We were unable to save some of your changes.",(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})}):(0,d.jsx)("td",{colSpan:3,children:v.length<20?(0,d.jsxs)(Je,{onClick:function(){m(v.concat(en))},children:[(0,d.jsx)(a.G,{style:{color:"#006fc4"},icon:s.KtF,title:"Add Role"}),(0,d.jsx)("span",{children:"Add another role"})]}):(0,d.jsx)($e,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})})]})]})})}var tn,rn,on,an,sn,cn=(0,r.forwardRef)(nn),ln=((0,o.default)(we.ZP)(tn||(tn=(0,i.Z)(["\n  display: inline-block;\n  input {\n    min-width: 200px;\n    height: 40px;\n  }\n"]))),o.default.label(rn||(rn=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"])))),un=ye(),dn=o.default.div(on||(on=(0,i.Z)(["\n  text-align: center;\n"]))),pn=o.default.div(an||(an=(0,i.Z)(["\n  text-align: right;\n"]))),hn=o.default.div(sn||(sn=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),fn=["Users","Composite Roles"],xn=function(e){return{label:e,value:e}},vn=function(){return(0,d.jsxs)(dn,{children:[(0,d.jsx)(hn,{}),(0,d.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},mn=(0,ee.hU)((function(e){var n=e.integration,t=e.alert,i=(0,r.useRef)(Ee),o=(0,r.useRef)(Ee),c=(0,r.useRef)(Ee),l=(0,r.useState)("dev"),u=l[0],p=l[1],h=(0,r.useState)(!1),f=h[0],x=h[1],v=(0,r.useState)(!1),m=v[0],g=v[1],j=(0,r.useState)(!1),b=j[0],y=j[1],w=(0,r.useState)(!1),Z=w[0],k=w[1],C=(0,r.useState)(""),P=C[0],I=C[1],S=(0,r.useState)(""),O=S[0],N=S[1],R=(0,r.useState)(0),T=R[0],z=R[1],A=(0,r.useState)(20),G=A[0],L=(A[1],(0,r.useState)(!0)),q=L[0],Y=L[1],H=(0,r.useState)([]),J=H[0],Q=H[1],X=(0,r.useState)([]),$=X[0],ee=X[1],ne=(0,r.useState)(null),te=ne[0],re=ne[1],ie=(0,r.useState)([]),oe=ie[0],ae=ie[1],se=(0,r.useState)(fn[0]),ce=se[0],le=se[1],ue=(0,r.useCallback)((0,je.throttle)(function(){var e=(0,E.Z)(B().mark((function e(t){var r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k(!0);case 4:return e.next=6,M({environment:u,integrationId:n.id,roleName:te,compositeRoleNames:t.map((function(e){return e.value}))});case 6:return r=e.sent,i=(0,D.Z)(r,2),i[1]||I("Last saved at ".concat((new Date).toLocaleString())),e.next=12,k(!1);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),2e3,{trailing:!0}),[null===n||void 0===n?void 0:n.id,te]),de=function(){he(),ee([]),Q([]),re(null)};(0,r.useEffect)((function(){p("dev"),de()}),[n.id]),(0,r.useEffect)((function(){de()}),[u]),(0,r.useEffect)((function(){te&&(fe(!0,te),xe(te),k(!1),I(""))}),[te]);var pe=(0,r.useMemo)((function(){return J.map(xn)}),[J]),he=function(){var e=(0,E.Z)(B().mark((function e(){var r,i,o,a,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return x(!0),e.next=5,K({environment:u,integrationId:n.id,search:O});case 5:r=e.sent,i=(0,D.Z)(r,2),o=i[0],a=i[1],s=o||[],!a&&o||t.show({variant:"danger",fadeOut:5e3,closable:!0,content:(null===a||void 0===a?void 0:a.message)||"failed to fetch roles"}),Q(s),x(!1),1===s.length&&re(s[0]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,E.Z)(B().mark((function e(t,r){var i,o,a,s,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:if(!(r.length<2)){e.next=4;break}return e.abrupt("return");case 4:return i=0,o=[],g(!0),t?z(i):(i=T,o=$),e.next=10,_({environment:u,integrationId:n.id,roleName:r,first:i,max:G});case 10:a=e.sent,s=(0,D.Z)(a,2),c=s[0],s[1],Y((l=c||[]).length===G),ee(o.concat(l)),z(i+G),re(r),g(!1);case 20:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,E.Z)(B().mark((function e(r){var i,o,a,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.next=5,U({environment:u,integrationId:n.id,roleName:r});case 5:if(i=e.sent,o=(0,D.Z)(i,2),a=o[0],!(s=o[1])&&a){e.next=12;break}return t.show({variant:"danger",fadeOut:5e3,closable:!0,content:s||"failed to fetch composite roles"}),e.abrupt("return");case 12:ae(a.map((function(e){return{label:e,value:e}}))),y(!1);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=(0,E.Z)(B().mark((function e(n){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.current.open(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),me=null;0===T&&m?me=(0,d.jsx)(vn,{}):te&&(me="Users"===ce?(0,d.jsxs)(ke.iA,{variant:"mini",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"First Name"}),(0,d.jsx)("th",{children:"Last Name"}),(0,d.jsx)("th",{children:"Email"}),(0,d.jsx)("th",{children:"Username"}),(0,d.jsx)("th",{className:"text-center",children:"Actions"})]})}),$.length>0?(0,d.jsx)(un,{element:"tbody",loadMore:function(){return fe(!1,te)},hasMore:q,loader:(0,d.jsx)(vn,{}),children:$.map((function(e){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.firstName}),(0,d.jsx)("td",{children:e.lastName}),(0,d.jsx)("td",{children:e.email}),(0,d.jsx)("td",{children:e.username}),(0,d.jsx)("td",{className:"text-center",children:(0,d.jsx)("span",{onClick:function(){return c.current.open(e)},children:(0,d.jsx)(a.G,{style:{color:"#FF0303"},icon:s.uMC,title:"Remove User"})})})]})}))}):(0,d.jsx)("tbody",{children:(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:5,children:"No users found."})})})]}):b?(0,d.jsx)(vn,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(ln,{children:["Select the roles to be nested under the Parent role"," ",(0,d.jsx)(Ye.Z,{content:"Composite roles associate (nest) one or more additional roles within it."})]}),(0,d.jsx)(ge.ZP,{value:oe,options:pe.filter((function(e){return e.value!==te})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:function(e){ae(e),ue(e)}}),(0,d.jsx)(ke.Ad,{saving:Z,content:P})]}));var be=(0,d.jsx)(Ve,{rows:J,headers:[{name:"Request ID"}],showFilters:!1,rowPlaceholder:"No roles found.",children:function(e){return(0,d.jsxs)("tr",{className:te===e?"active":"",onClick:function(){re(e)},children:[(0,d.jsx)("td",{children:e}),(0,d.jsx)("td",{children:(0,d.jsx)(pn,{children:(0,d.jsx)(Fe.Kk,{icon:s.$aW,role:"button","aria-label":"delete",onClick:function(n){n.stopPropagation(),ve(e)},title:"Delete",size:"lg",style:{marginRight:"1rem"}})})})]},e)}}),ye=(null===n||void 0===n?void 0:n.environments)||[];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(hn,{}),(0,d.jsx)(ke.zx,{size:"medium",variant:"primary",onClick:function(){i.current.open()},children:"+ Create a New Role"}),(0,d.jsx)(hn,{}),(0,d.jsx)(ke.mQ,{onChange:function(e){p(e)},activeKey:u,tabBarGutter:30,children:ye.map((function(e){return(0,d.jsx)(ke.OK,{tab:(0,je.startCase)(e)},e)}))}),(0,d.jsx)("br",{}),(0,d.jsx)(F.ZP,{cols:10,children:(0,d.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,d.jsx)(F.ZP.Col,{span:4,children:(0,d.jsxs)("div",{style:{display:"flex",float:"left"},children:[(0,d.jsx)(ke.E1,{type:"text",maxLength:"1000",placeholder:"Search existing roles",value:O,onChange:function(e){N(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&he()}}),(0,d.jsx)(ke.zx,{type:"button",size:"small",variant:"bcPrimary",onClick:he,children:"Search"})]})}),(0,d.jsx)(F.ZP.Col,{span:6,children:te&&(0,d.jsx)(ke.mQ,{onChange:function(e){le(e)},activeKey:ce,tabBarGutter:30,children:fn.map((function(e){return(0,d.jsx)(ke.OK,{tab:e},e)}))})})]})}),(0,d.jsx)(hn,{}),f?(0,d.jsx)(vn,{}):(0,d.jsx)(F.ZP,{cols:10,children:(0,d.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,d.jsx)(F.ZP.Col,{span:4,children:be}),(0,d.jsx)(F.ZP.Col,{span:6,children:me})]})}),(0,d.jsx)(Be,{ref:i,title:"Create New Role",icon:null,onConfirm:function(){var e=(0,E.Z)(B().mark((function e(n){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(e.sent){e.next=9;break}return e.next=6,n.current.reset();case 6:de(),e.next=11;break;case 9:return i.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,d.jsx)(cn,{integrationId:n.id,environments:ye})}),(0,d.jsx)(Be,{ref:o,title:"Delete Role",icon:s.eHv,onConfirm:function(){var e=(0,E.Z)(B().mark((function e(t,r){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({environment:u,integrationId:n.id,roleName:r});case 2:return e.next=4,de();case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),confirmButtonText:"Delete",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,d.jsx)("div",{children:"Are you sure you want to delete this role?"})}),(0,d.jsx)(Be,{id:"remove-user",ref:c,title:"Remove User from Role",icon:s.eHv,onConfirm:function(){var e=(0,E.Z)(B().mark((function e(r,i){var o,a,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V({environment:u,integrationId:n.id,username:i.username,roleName:te,mode:"del"});case 4:o=e.sent,a=(0,D.Z)(o,2),(s=a[1])&&t.show({variant:"danger",fadeOut:5e3,closable:!0,content:s}),fe(!0,te);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,d.jsx)("div",{children:"Are you sure you want to remove this user from this role?"})})]})})),gn=t(27812),jn=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,z.e.post("bceid-webservice/idir/search",{field:t,search:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),bn=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,z.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),yn=[{value:"idir",label:"IDIR"}],wn=[{value:"firstName",label:"First Name",allowed:["idir"]},{value:"lastName",label:"Last Name",allowed:["idir"]},{value:"email",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"userId",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}];function Zn(e,n){var t=e.key,i=e.idp,o=e.property,a=e.search,c=e.infoModalRef,l=e.parentModalRef,u=(0,r.useState)(!1),p=u[0],h=u[1],f=(0,r.useState)(!1),x=f[0],v=f[1],m=(0,r.useState)([]),g=m[0],j=m[1],b=(0,r.useState)(""),y=b[0],w=b[1],Z=(0,r.useState)(o),k=Z[0],C=Z[1],P=(0,r.useState)(a),I=P[0],S=P[1];(0,r.useEffect)((function(){w(i)}),[i]),(0,r.useEffect)((function(){if(y){var e=wn.find((function(e){return e.value===k}));if(null===e||void 0===e?void 0:e.allowed.includes(y))O(I,k);else{var n=wn.find((function(e){return e.allowed.includes(y)}));C((null===n||void 0===n?void 0:n.value)||""),S("")}}}),[y]);var O=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a=arguments;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>1&&void 0!==a[1]?a[1]:k,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return v(!0),j([]),h(!0),e.next=8,jn({field:t,search:n});case 8:r=e.sent,i=(0,D.Z)(r,2),o=i[0],i[1],o&&j(o),v(!1);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,E.Z)(B().mark((function e(n){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn({guid:n.guid,userId:n.userId});case 2:l.current.close({idp:y,guid:n.guid});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=null;return R=p?g.length>0?g.map((function(e){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.individualIdentity.name.firstname}),(0,d.jsx)("td",{children:e.individualIdentity.name.surname}),(0,d.jsx)("td",{children:e.contact.email}),(0,d.jsx)("td",{children:e.userId}),(0,d.jsx)("td",{children:(0,d.jsxs)(Fe.c4,{children:[(0,d.jsx)(Fe.Kk,{icon:s.Mdf,role:"button","aria-label":"view",onClick:function(){c.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.individualIdentity.name.firstname,middleName:e.individualIdentity.name.middleName,lastName:e.individualIdentity.name.surname,initials:e.individualIdentity.name.initials,email:e.contact.email,telephone:e.contact.telephone,company:e.internalIdentity.company,department:e.internalIdentity.department,title:e.internalIdentity.title},_hash:l.current.getId()})},title:"View",size:"lg"}),(0,d.jsx)(Fe.Kk,{icon:s.q7m,role:"button","aria-label":"import",onClick:function(){return N(e)},title:"Import",size:"lg"})]})})]},e.guid)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:10,className:"text-center",children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:10,className:"text-center",children:"You have not searched for any users yet."})}),(0,d.jsx)(Te.Z,{variant:"mini",searchLocation:"right",filters:[{value:y,multiselect:!1,onChange:w,options:yn},{value:k,multiselect:!1,onChange:C,options:wn.filter((function(e){return e.allowed.includes(y)}))}],headers:[{name:"First name"},{name:"Last Name"},{name:"Email"},{name:"IDIR username"}],searchKey:I,searchPlaceholder:"Enter search criteria",onSearch:O,onEnter:O,loading:x,totalColSpan:20,searchColSpan:10,filterColSpan:10,children:R},"".concat(t,"-").concat(I))}var kn,Cn,Pn,In,Sn,On,Nn,Dn,En,Rn=(0,r.forwardRef)(Zn);function Bn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Fn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Bn(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Tn=o.default.label(kn||(kn=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),zn=o.default.div(Cn||(Cn=(0,i.Z)(["\n  display: flex;\n  & > div:first-child {\n    margin-right: 20px;\n  }\n"]))),An=o.default.div(Pn||(Pn=(0,i.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),Gn=o.default.div(In||(In=(0,i.Z)(["\n  font-size: 0.9rem;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),Ln=function(e){var n=e.children,t=e.width;return(0,d.jsx)(An,{width:t,children:(0,d.jsx)(F.ZP,{cols:6,children:(0,d.jsxs)(F.ZP.Row,{gutter:[],children:[(0,d.jsx)(F.ZP.Col,{span:5,children:n}),(0,d.jsx)(F.ZP.Col,{span:1,style:{textAlign:"right"},children:(0,d.jsx)(a.G,{icon:s.byT,color:"#9F9F9F",size:"lg"})})]})})})},Kn=o.default.div(Sn||(Sn=(0,i.Z)(["\n  text-align: center;\n"]))),Mn=o.default.div(On||(On=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),Un=o.default.div(Nn||(Nn=(0,i.Z)(["\n  text-align: center;\n"]))),qn=o.default.div(Dn||(Dn=(0,i.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),Vn=o.default.div(En||(En=(0,i.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),Yn=function(){return(0,d.jsxs)(Kn,{children:[(0,d.jsx)(Mn,{}),(0,d.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},_n=function(e,n){return n.slice(15*(e-1),15*e)},Hn={idir:"IDIR",azureidir:"Azure IDIR",bceidbasic:"BCeID Basic",bceidbusiness:"BCeID Business",bceidboth:"BCeID Both"},Wn=[{value:"lastName",label:"Last Name",allowed:["idir","azureidir"]},{value:"firstName",label:"First Name",allowed:["idir","azureidir"]},{value:"email",label:"Email",allowed:["idir","azureidir"]},{value:"guid",label:"IDP GUID",allowed:["idir","azureidir","bceidbasic","bceidbusiness","bceidboth"]}],Jn=(0,ee.hU)((function(e){var n=e.selectedRequest,t=(e.alert,(0,r.useRef)(Ee)),i=(0,r.useRef)(Ee),o=(0,r.useState)(!1),c=o[0],l=o[1],u=(0,r.useState)(1),p=u[0],h=u[1],f=(0,r.useState)(0),x=f[0],v=f[1],m=(0,r.useState)(!1),g=m[0],j=m[1],b=(0,r.useState)(!1),y=b[0],w=b[1],Z=(0,r.useState)(!1),k=Z[0],C=Z[1],P=(0,r.useState)(""),I=P[0],S=P[1],O=(0,r.useState)([]),N=O[0],R=O[1],T=(0,r.useState)([]),z=T[0],A=T[1],G=(0,r.useState)([]),M=G[0],U=G[1],V=(0,r.useState)("dev"),_=V[0],H=V[1],W=(0,r.useState)(""),J=W[0],Q=W[1],X=(0,r.useState)(""),$=X[0],ee=X[1],ne=(0,r.useState)(""),te=ne[0],re=ne[1],ie=(0,r.useState)(void 0),oe=ie[0],ae=ie[1],se=[{value:15,text:"".concat(15," per page")}],ce=(0,r.useCallback)((0,je.throttle)(function(){var e=(0,E.Z)(B().mark((function e(t){var r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(!0);case 2:return e.next=4,Y({environment:_,integrationId:n.id,username:oe,roleNames:t});case 4:return r=e.sent,i=(0,D.Z)(r,2),i[1]||S("Last saved at ".concat((new Date).toLocaleString())),e.next=10,C(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),2e3,{trailing:!0}),[null===n||void 0===n?void 0:n.id,_,oe]),le=function(){var e=(0,E.Z)(B().mark((function e(){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j(!0);case 4:return e.next=6,K({environment:_,integrationId:n.id,first:0,max:1e3});case 6:t=e.sent,r=(0,D.Z)(t,2),i=r[0],r[1],A(i||[]),j(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){R([]),U([]),h(1),v(0),ae(void 0),l(!1)},pe=function(){var e=(0,E.Z)(B().mark((function e(t){var r,i,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(!0);case 2:return e.next=4,q({environment:_,integrationId:n.id,username:t});case 4:return r=e.sent,i=(0,D.Z)(r,2),o=i[0],i[1],e.next=10,U(o||[]);case 10:w(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){de(),function(){if(re(""),H("dev"),n.devIdps){var e=n.devIdps.length>0?n.devIdps[0]:"";Q(e);var t=Wn.find((function(n){return n.allowed.includes(e)}));ee((null===t||void 0===t?void 0:t.value)||"")}}(),A([])}),[n.id]),(0,r.useEffect)((function(){he(te,void 0,p)}),[p]),(0,r.useEffect)((function(){de(),le(),n.devIdps&&Q(n.devIdps.length>0?n.devIdps[0]:"")}),[_]),(0,r.useEffect)((function(){de();var e=Wn.find((function(e){return e.value===$}));if(!(null===e||void 0===e?void 0:e.allowed.includes(J))){var n=Wn.find((function(e){return e.allowed.includes(J)}));ee((null===n||void 0===n?void 0:n.value)||"")}}),[J]),(0,r.useEffect)((function(){S(""),oe&&pe(oe)}),[oe]);var he=function(){var e=(0,E.Z)(B().mark((function e(n){var t,r,i,o,a,s=arguments;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:$,r=s.length>2&&void 0!==s[2]?s[2]:p,!(n.length<2)){e.next=4;break}return e.abrupt("return");case 4:return j(!0),re(n),h(r),ee(t),R([]),U([]),ae(void 0),l(!0),e.next=14,L({environment:_,idp:J,property:t,searchKey:n});case 14:i=e.sent,o=(0,D.Z)(i,2),a=o[0],o[1],a&&(R(_n(r,a.rows)),v(a.count),1===a.count&&ae(a.rows[0].username)),j(!1);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fe=function(e){return he(e,void 0,1)},xe=function(){var e=(0,E.Z)(B().mark((function e(n,t){var r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],r="remove-value"===t.action?M.filter((function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)})):[].concat((0,gn.Z)(M),[null===(i=t.option)||void 0===i?void 0:i.value]),ce(r),U(r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ve=null;y?ve=(0,d.jsx)(Yn,{}):oe&&(ve=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Tn,{children:"2. Assign User to a Role"}),(0,d.jsx)(ge.ZP,{value:M.map((function(e){return{value:e,label:e}})),options:z.map((function(e){return{value:e,label:e}})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:xe}),(0,d.jsx)(ke.Ad,{saving:k,content:I})]}));var me="idir"===J,be=null;be=c?N.length>0?N.map((function(e){return(0,d.jsxs)("tr",{className:oe===e.username?"active":"",onClick:function(){ae(e.username)},children:[(0,d.jsx)("td",{children:e.firstName}),(0,d.jsx)("td",{children:e.lastName}),(0,d.jsx)("td",{children:e.email}),(0,d.jsx)("td",{children:(0,d.jsx)(Fe.c4,{children:(0,d.jsx)(Fe.Kk,{icon:s.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),t.current.open({guid:e.username.split("@")[0],attributes:Fn({firstName:e.firstName,lastName:e.lastName,email:e.email},e.attributes)})},title:"View",size:"lg"})})})]},e.username)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:10,children:(0,d.jsxs)(qn,{children:[(0,d.jsx)(Vn,{children:(0,d.jsx)(a.G,{icon:s.RLE,color:"#D44331",title:"Edit",size:"lg"})}),me?(0,d.jsx)(Vn,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,d.jsx)(Vn,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]})})}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:10,children:(0,d.jsx)(Un,{children:"You have not searched for any users yet."})})});var ye=null;c&&me&&(ye=(0,d.jsxs)(d.Fragment,{children:[N.length>0&&(0,d.jsx)(ke.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,d.jsx)(ue.ZP,{type:"button",size:"small",onClick:function(){return i.current.open({key:(new Date).getTime().toString(),idp:"idir",property:$,search:te})},children:"Search in IDIM Web Service Lookup"})]}));var we=(null===n||void 0===n?void 0:n.environments)||[],Ze=(null===n||void 0===n?void 0:n.devIdps)||[];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Mn,{}),(0,d.jsx)(F.ZP,{cols:10,children:(0,d.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,d.jsxs)(F.ZP.Col,{span:6,children:[(0,d.jsxs)(ke.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,d.jsx)(Ye.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,d.jsx)(Te.Z,{variant:"mini",searchLocation:"right",filters:[{key:"user-role-filter-env",value:_,multiselect:!1,onChange:H,options:we.map((function(e){return{value:e,label:(0,je.startCase)(e)}}))},{key:"user-role-filter-idp",value:J,multiselect:!1,onChange:Q,options:Ze.map((function(e){return{value:e,label:Hn[e]}}))},{key:"user-role-filter-prop",value:$,multiselect:!1,onChange:ee,options:Wn.filter((function(e){return e.allowed.includes(J)}))}],headers:[{name:"First name"},{name:"Last Name",style:{minWidth:"170px"}},{name:"Email",style:{minWidth:"170px"}}],pagination:!0,pageLimits:se,limit:15,page:p,searchKey:te,searchPlaceholder:"Enter search criteria",onSearch:fe,onEnter:fe,loading:g,rowCount:x,onPrev:h,onNext:h,totalColSpan:20,searchColSpan:8,filterColSpan:12,children:be},te),ye]}),(0,d.jsx)(F.ZP.Col,{span:4,children:ve})]})}),(0,d.jsx)(Be,{ref:t,id:"additiona-user-info",title:"Additional User Info",icon:null,cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){if(!e)return(0,d.jsx)(d.Fragment,{});var n=(0,je.omitBy)(e.attributes,je.isEmpty);return(0,d.jsxs)("div",{children:[(0,d.jsx)(Tn,{children:"GUID"}),(0,d.jsx)(Ln,{width:"400px",children:e.guid}),(0,d.jsx)("br",{}),(0,d.jsx)(Tn,{children:"Attributes"}),(0,d.jsxs)(zn,{children:[(0,d.jsx)(Gn,{width:"200px",children:"Key"}),(0,d.jsx)(Gn,{width:"700px",children:"Value"})]}),(0,je.map)(n,(function(e,n){return(0,d.jsxs)(zn,{children:[(0,d.jsx)(Ln,{width:"200px",children:(0,je.startCase)(n)}),(0,d.jsx)(Ln,{width:"700px",children:e})]})}))]})}}),(0,d.jsx)(Be,{ref:i,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){he(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,d.jsx)(Rn,{idp:e.idp,property:e.property,search:e.search,infoModalRef:t,parentModalRef:i},e.key):(0,d.jsx)(d.Fragment,{})}})]})})),Qn=t(62248),Xn=t(12059),$n=t(76944),et=t(31637),nt=t(83333);function tt(e){var n=e.requestId,t=(0,r.useState)(!1),i=t[0],o=t[1],a=(0,r.useState)(!1),s=a[0],c=a[1],l=(0,r.useState)([]),u=l[0],p=l[1],h=function(){var e=(0,E.Z)(B().mark((function e(){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return o(!0),e.next=5,(0,$n.v)({requestId:n,eventCode:"request-update-success",clearNotifications:!0});case 5:t=e.sent,r=(0,D.Z)(t,2),i=r[0],r[1]?c(!0):i&&p(i.rows),o(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h()}),[n]),s?(0,d.jsx)(v,{variant:"warning",content:"Failed to load details."}):i?(0,d.jsx)(et.Z,{}):(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(nt.Z,{events:u})})}var rt,it,ot=t(39550),at="15px",st=o.default.div(rt||(rt=(0,i.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),at,at,at,"0"),ct=o.default.li(it||(it=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"])));function lt(e){e.integration;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(ot.Z,{children:[(0,d.jsxs)(ct,{children:["Requirements email sent to IDIM",(0,d.jsx)(a.G,{icon:s.f8k,color:"#00C45B"})]}),(0,d.jsxs)(ct,{children:[(0,d.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,d.jsx)(re.ZP,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,d.jsx)(a.G,{icon:s.FU$,color:"#b3b3b3"})]}),(0,d.jsxs)(ct,{children:[(0,d.jsx)("p",{children:"Access to prod"}),(0,d.jsx)(st,{})]})]})})}var ut,dt,pt,ht,ft=o.default.div(ut||(ut=(0,i.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),(function(e){return e.short?"max-width: 800px;":""})),xt=o.default.div(dt||(dt=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),vt=o.default.div(pt||(pt=(0,i.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),mt=o.default.div(ht||(ht=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"]))),gt=function(e){var n=e.integration,t=e.children;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(ke.h4,{variant:"primary",size:"lg",children:["INTEGRATION DETAILS - ",(0,je.padStart)(String(n.id),8,"0")]}),(0,d.jsx)(ke.OC,{children:t})]})};var jt,bt,yt,wt,Zt,kt=function(e){var n=e.integration,t=e.state,r=e.dispatch,i=t.panelTab;if(!n)return null;var o=n.status,c=n.environments,l=void 0===c?[]:c,u=n.bceidApproved,p=(0,Qn.n)(o||"draft"),h=(0,X.Jx)(n)&&l.includes("prod")&&!u,f=(0,X.he)(n),x="gold"===n.serviceType,m="service-account"!==n.authType;if("In Draft"===p)return(0,d.jsx)(gt,{integration:n,children:(0,d.jsxs)(v,{variant:"info",children:[(0,d.jsx)("div",{children:(0,d.jsx)("strong",{children:"Your request has not been submitted."})}),(0,d.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var g=[];return"Submitted"===p?f?g.push(function(e){var n=e.integration;return(0,d.jsx)(ke.OK,{tab:"Technical Details",children:(0,d.jsx)(ft,{short:!1,children:(0,d.jsx)(F.ZP,{cols:15,children:(0,d.jsxs)(F.ZP.Row,{gutter:[],children:[(0,d.jsx)(F.ZP.Col,{span:7,children:(0,d.jsx)(le,{integration:n})}),(0,d.jsx)(F.ZP.Col,{span:1}),(0,d.jsxs)(F.ZP.Col,{span:7,align:"center",children:[(0,d.jsx)("br",{}),(0,d.jsx)(xt,{children:"Access to BCeID Prod"}),(0,d.jsx)("br",{}),(0,d.jsxs)(vt,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(a.G,{icon:s.f8k,color:"#2E8540"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"Your integration has been approved. Please wait approx. 10 min to get access to your installation information access again."}),(0,d.jsx)(xt,{children:"Progress Update"}),(0,d.jsx)(Xn.s,{integration:n})]})]})]})]})})})},"installation-json")}({integration:n})):g.push(function(e){var n=e.integration,t=e.awaitingBceidProd;return(0,d.jsx)(ke.OK,{tab:"Technical Details",children:(0,d.jsx)(ft,{short:!1,children:(0,d.jsxs)(F.ZP,{cols:15,children:[(0,d.jsx)("br",{}),(0,d.jsxs)(F.ZP.Row,{gutter:[],children:[(0,d.jsxs)(F.ZP.Col,{span:7,align:"center",children:[n.requester&&(0,d.jsxs)(mt,{children:["Submitted by: ",n.requester]}),(0,d.jsx)(xt,{children:"Access to environment(s) will be provided in approx 20 min"}),(0,d.jsx)(Xn.Z,{integration:n})]}),(0,d.jsx)(F.ZP.Col,{span:1}),(0,d.jsx)(F.ZP.Col,{span:7,align:"center",children:t&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(xt,{children:"Access to BCeID Prod"}),(0,d.jsx)("br",{}),(0,d.jsx)(lt,{integration:n})]})})]})]})})},"installation-json")}({integration:n,awaitingBceidProd:h})):"Completed"===p&&(g.push(function(e){var n=e.integration,t=e.awaitingBceidProd,r=n.bceidApproved,i=r||t;return(0,d.jsx)(ke.OK,{tab:"Technical Details",children:(0,d.jsx)(ft,{short:!1,children:(0,d.jsx)(F.ZP,{cols:15,children:(0,d.jsxs)(F.ZP.Row,{gutter:[],children:[(0,d.jsx)(F.ZP.Col,{span:7,children:(0,d.jsx)(le,{integration:n})}),(0,d.jsx)(F.ZP.Col,{span:1}),(0,d.jsx)(F.ZP.Col,{span:7,children:i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(xt,{children:"Access to BCeID Prod"}),(0,d.jsx)("br",{}),r?(0,d.jsxs)(vt,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(a.G,{icon:s.f8k,color:"#2E8540"})}),(0,d.jsx)("div",{children:(0,d.jsx)("span",{children:"Your integration is approved and available."})})]}):(0,d.jsx)(lt,{integration:n})]})})]})})})},"installation-json")}({integration:n,awaitingBceidProd:h})),x&&m&&g.push(function(e){var n=e.integration;return(0,d.jsx)(ke.OK,{tab:"Role Management",children:(0,d.jsxs)(ft,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{children:["Please visit our"," ",(0,d.jsx)(re.ZP,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/Creating-a-Role",children:"wiki page"})," ","for more information on roles."]}),(0,d.jsx)(mn,{integration:n})]})},"client-roles")}({integration:n}),function(e){var n=e.integration;return(0,d.jsx)(ke.OK,{tab:"Assign Users to Roles",children:(0,d.jsx)(ft,{children:(0,d.jsx)(Jn,{selectedRequest:n})})},"user-roles")}({integration:n})),n.publicAccess||g.push(function(e){var n=e.integration;return(0,d.jsx)(ke.OK,{tab:"Secrets",children:(0,d.jsx)(ft,{short:!0,children:(0,d.jsx)(me,{selectedRequest:n})})},"secret")}({integration:n})),g.push(function(e){var n=e.integration;return(0,d.jsx)(ke.OK,{tab:"Change History",children:(0,d.jsx)(ft,{short:!0,children:(0,d.jsx)(tt,{requestId:n.id})})},"history")}({integration:n}))),(0,d.jsx)(gt,{integration:n,children:(0,d.jsx)(ke.mQ,{activeKey:i,onChange:function(e){return r({type:"setPanelTab",payload:e})},tabBarGutter:30,destroyInactiveTabPane:!0,children:g})})},Ct=t(11163),Pt=t(37226),It=t(77740),St=o.default.th(jt||(jt=(0,i.Z)(["\n  text-align: right;\n  min-width: 100px;\n"]))),Ot=o.default.td(bt||(bt=(0,i.Z)(["\n  float: right;\n"]))),Nt=o.default.p(yt||(yt=(0,i.Z)(["\n  margin: 0;\n"]))),Dt=o.default.div(wt||(wt=(0,i.Z)(["\n  color: #a12622;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f2dede;\n"]))),Et=o.default.div(Zt||(Zt=(0,i.Z)(["\n  color: #006fc4;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f8f8f8;\n"]))),Rt=(0,d.jsxs)(Dt,{children:[(0,d.jsx)(a.G,{icon:s.RLE,title:"Unavailable"}),"\xa0 The system is unavailable at this moment. please refresh the page."]}),Bt=function(e){var n=e.message;return(0,d.jsxs)(Et,{children:[(0,d.jsx)(a.G,{icon:s.sqG,title:"Information"}),"\xa0 ",n]})},Ft=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&0!=(null===t||void 0===t?void 0:t.length)?(0,d.jsx)(ke.zx,{size:"medium",onClick:n,variant:"callout",children:"+ Request SSO Integration"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:(0,d.jsx)("b",{children:"To request an integration for a Standard Realm, you\u2019ll need the following information:"})}),(0,d.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,d.jsxs)(F.ZP,{cols:2,style:{textAlign:"left"},children:[(0,d.jsxs)(F.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,d.jsxs)(F.ZP.Col,{span:1,children:[(0,d.jsx)(ke.wk,{number:1,title:"Project Information",children:null}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Project Name"]}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Project Team Members (Optional)"]}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Product Owner or Technical Contact"]})]}),(0,d.jsxs)(F.ZP.Col,{span:1,children:[(0,d.jsx)(ke.wk,{number:2,title:"Technical Info",children:null}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Client type (",(0,d.jsx)(re.ZP,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"Public or Confidential, learn more"}),")"]}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Environments (Development, Test, Production)"]}),(0,d.jsxs)(Nt,{children:[(0,d.jsx)(a.G,{icon:s.LEp})," Redirect URIs for selected environments"]})]})]}),(0,d.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You\u2019ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,d.jsx)(ke.zx,{size:"medium",onClick:n,variant:"callout",children:"+ Request SSO Integration"})]})]})};function Tt(e){var n,t=e.setIntegration,i=e.setIntegrationCount,o=e.state,a=e.dispatch,s=(0,Ct.useRouter)(),c=s.query.integr,l=(0,r.useState)(!0),u=l[0],p=l[1],h=(0,r.useState)([]),f=h[0],x=h[1],v=(0,r.useState)(null),m=(v[0],v[1]),g=(0,r.useState)(c&&Number(c)||void 0),j=g[0],b=g[1],y=o.downloadError,w=function(){var e=(0,E.Z)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.push("/request");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){m(e),b(e.id),t(e)},k=function(e){var n=e||[];if(x(n),i(n.length),j){var t=e.find((function(e){return(null===e||void 0===e?void 0:e.id)===j}));t?Z(t):(null===e||void 0===e?void 0:e.length)>0&&Z(e[0])}else(null===e||void 0===e?void 0:e.length)>0&&Z(e[0])},C=function(){var e=(0,E.Z)(B().mark((function e(){var n,t,r;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,(0,Pt.XJ)();case 3:n=e.sent,t=(0,D.Z)(n,2),r=t[0],t[1]?a({type:"setDownloadError",payload:!0}):k(r||[]),p(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){C(),s.replace("/my-dashboard/integrations")}),[]),(0,r.useEffect)((function(){return(0,X.rn)(f||[])&&(clearInterval(n),n=setInterval((0,E.Z)(B().mark((function e(){var t,r,i;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Pt.XJ)();case 2:t=e.sent,r=(0,D.Z)(t,2),i=r[0],r[1]?clearInterval(n):k(i||[]);case 7:case"end":return e.stop()}}),e)}))),5e3)),function(){n&&clearInterval(n)}}),[f,j]);var P=y?Rt:f&&0!==f.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ke.h4,{size:"lg",children:"INTEGRATIONS"}),(0,d.jsxs)(ke.iA,{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Request ID"}),(0,d.jsx)("th",{children:"Project Name"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Usecase"}),(0,d.jsx)("th",{children:"Service Type"}),(0,d.jsx)(St,{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:null===f||void 0===f?void 0:f.map((function(e){return(0,d.jsxs)("tr",{className:j===e.id?"active":"",onClick:function(){return Z(e)},children:[(0,d.jsx)("td",{children:(0,je.padStart)(String(e.id),8,"0")}),(0,d.jsx)("td",{children:e.projectName}),(0,d.jsx)("td",{children:(0,Qn.n)(e.status||"draft")}),(0,d.jsx)("td",{children:It.F[e.authType||"browser-login"]}),(0,d.jsx)("td",{children:"gold"===e.serviceType?"Gold":"Silver"}),(0,d.jsx)("td",{children:(0,d.jsx)(Ot,{children:(0,d.jsx)(Fe.ZP,{request:e,onDelete:function(){C()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})})]},e.id)}))})]})]}):(0,d.jsx)(Bt,{message:"No Requests Submitted"});return u?(0,d.jsx)(et.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(Ft,{handleNewIntegrationClick:w,integrations:f}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),P]})}var zt=t(6178);var At=function(){var e=(0,r.useState)(null),n=e[0],t=e[1],i=(0,r.useState)(1),o=i[0],a=i[1];return(0,d.jsx)(zt.Z,{tab:"integrations",leftPanel:function(e,n){return(0,d.jsx)(Tt,{setIntegration:t,setIntegrationCount:a,state:e,dispatch:n})},rightPanel:function(e,t){return n&&(0,d.jsx)(kt,{integration:n,state:e,dispatch:t})},showResizable:o>0})}},60377:function(e,n,t){"use strict";t.d(n,{E:function(){return a}});var r=t(59499);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var a={};n.Z=function(e,n){switch(n.type){case"setPanelTab":return o(o({},e),{},{panelTab:n.payload});case"setDownloadError":return o(o({},e),{},{downloadError:n.payload});default:return e}}},73923:function(e,n,t){"use strict";t.d(n,{Di:function(){return o},ON:function(){return r},TE:function(){return i}});var r=function(e){return JSON.stringify(e,void 0,2)},i=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(t){return document.body.removeChild(n),!1}},o=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(59854)}])}},function(e){e.O(0,[935,770,752,391,734,774,888,179],(function(){return n=80382,e(e.s=n);var n}));var n=e.O();_N_E=n}]);