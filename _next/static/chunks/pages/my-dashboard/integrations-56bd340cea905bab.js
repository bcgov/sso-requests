(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{36200:function(e,n,t){"use strict";var r=t(83024),i=t(64575),a={shared:{button:"\n      border-radius: 0.222em;\n      border-width: 0;\n      padding: 0.6em 1.1em;\n      text-align: center;\n      text-decoration: none;\n      font-weight: 700;\n      letter-spacing: 1px;\n      display: inline-block;\n      cursor: pointer;\n      box-shadow: 0px 0px 0px 2px transparent inset, 0px 0em 0px 0px rgba(34, 36, 38, 0.15) inset;\n    "},size:{xsmall:{button:"\n        font-size: 0.7rem;\n      "},small:{button:"\n        font-size: 0.8rem;\n      "},medium:{button:"\n        font-size: ".concat(i.n5,";\n      ")},large:{button:"\n        font-size: ".concat(i.zA,";\n      ")}},variant:{primary:{button:"\n        background-color: #D5EDFF;\n        box-shadow: 0px 0px 0px 2px #D5EDFF inset !important;\n        color: #3E3E3E;\n\n        &:hover {\n          text-decoration: underline;\n          background-color: #FFF7D5;\n          box-shadow: 0px 0px 0px 2px #FFF7D5 inset !important;\n          opacity: 0.80;\n        }\n\n        &:active {\n          opacity: 1;\n        }\n      "},grey:{button:"\n        background-color: #B2B2B2;\n        box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        color: #F8F8F8;\n        min-width: 110px;\n\n        &:hover {\n          background-color: ".concat(i.TU,";\n          box-shadow: 0px 0px 0px 1px #707070 inset !important;\n        }\n      ")}}},o=(0,r.applyTheme)(a,{defaultProps:{variant:"primary",size:"medium"},breakProps:[],staticProps:["fullHeight","fullWidth"]});n.Z=o},69768:function(e,n,t){"use strict";t.d(n,{V:function(){return h},q:function(){return p}});var r,i,a=t(71383),o=t(85444),s=t(99603),c=t(59417),l=t(85893),u=o.default.div(r||(r=(0,a.Z)(["\n  color: #a12622;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f2dede;\n"]))),d=o.default.div(i||(i=(0,a.Z)(["\n  color: #006fc4;\n  height: 60px;\n  padding-left: 20px;\n  padding-top: 16px;\n  padding-bottom: 22px;\n  weight: 700;\n  background-color: #f8f8f8;\n"]))),p=function(){return(0,l.jsxs)(u,{children:[(0,l.jsx)(s.G,{icon:c.RLE,title:"Unavailable"}),"\xa0 The system is unavailable at this moment. please refresh the page."]})},h=function(e){var n=e.message;return(0,l.jsxs)(d,{children:[(0,l.jsx)(s.G,{icon:c.sqG,title:"Information"}),"\xa0 ",n]})}},2531:function(e,n,t){"use strict";var r,i=t(71383),a=t(67294),o=t(11163),s=t(46312),c=t(85444),l=t(85330),u=t(17933),d=t(77945),p=t(77506),h=t(85893),f=c.default.div(r||(r=(0,i.Z)(["\n  height: 100%;\n  overflow: auto;\n"])));n.Z=function(e){var n,t=e.tab,r=e.leftPanel,i=e.rightPanel,c=e.showResizable,x=void 0===c||c,v=(e.children,(0,o.useRouter)()),m=(0,a.useContext)(d.SessionContext)||{},g=m.user,j=m.enableGold,b=null===g||void 0===g||null===(n=g.integrations)||void 0===n?void 0:n.find((function(e){return"silver"===e.serviceType})),y=(0,h.jsxs)(l.mQ,{onChange:function(e){v.replace("/my-dashboard/".concat(e))},activeKey:t,tabBarGutter:30,children:[(0,h.jsx)(l.OK,{tab:"My Projects"},"integrations"),(0,h.jsx)(l.OK,{tab:"My Teams"},"teams"),j&&b&&(0,h.jsx)(l.OK,{tab:"*New - Silver to Gold Upgrade"},"s2g")]});return(0,h.jsxs)(u.Z,{rules:p.F,children:[y,x?(0,h.jsx)(s.e,{style:{paddingTop:"2px",borderBottom:"3px solid black"},defaultSize:{width:"100%",height:.4*window.innerHeight},enable:{bottom:!0},handleStyles:{bottom:{bottom:0}},children:(0,h.jsx)(f,{children:r&&r()})}):r&&r(),(0,h.jsx)("br",{}),i&&i()]})}},85545:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Lr}});var r=t(67294),i=t(71383),a=t(85444),o=t(59499),s=t(16530),c=t(69829),l=t(85893);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=(0,s.applyTheme)({shared:{container:"\n      line-height: 1.5em;\n      border: 1px solid transparent;\n      border-radius: 0.2222em;\n      padding: 1em 0.5em;\n\n      & a {\n        text-decoration: underline;\n      }\n\n      & .pg-notification-content>svg {\n        overflow: initial;\n      }\n    ",close:"\n      cursor: pointer !important;\n      text-align: center;\n      text-decoration: none;\n      border-radius: 0.2222em;\n      padding: 0.4em 0.5em;\n      margin-right: 20px;\n    "},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}},variant:{success:{container:"\n        background-color: #dff0d8;\n        border-color: #d6e9c6;\n        color: #2d4821;\n\n        & a {\n          color: #2b542c;\n        }\n      ",content:"\n        color: #2d4821;\n      ",close:"\n        color: #2d4821;\n        border: 1px solid #2d4821;\n\n        &:hover {\n          background: #2d4821;\n          color: #fff;\n        }\n      ",group:"\n        color: #2d4821;\n      "},info:{container:"\n        background-color: #d9eaf7;\n        border-color: #afd3ee;\n        color: #313132;\n\n        & a {\n          color: #1a5a96;\n        }\n      ",content:"\n        color: #313132;\n      ",close:"\n        color: #313132;\n        border: 1px solid #313132;\n\n        &:hover {\n          background: #313132;\n          color: #fff;\n        }\n      ",group:"\n        color: #313132;\n      "},warning:{container:"\n        background-color: #f9f1c6;\n        border-color: #faebcc;\n        color: #6c4a00;\n\n        & a {\n          color: #66512c;\n        }\n      ",content:"\n        color: #66512c;\n      ",close:"\n        color: #66512c;\n        border: 1px solid #66512c;\n\n        &:hover {\n          background: #66512c;\n          color: #fff;\n        }\n      ",group:"\n        color: #66512c;\n      "},danger:{container:"\n        background-color: #f2dede;\n        border-color: #ebccd1;\n        color: #a12622;\n\n        & a {\n          color: #843534;\n        }\n      ",content:"\n        color: #a12622;\n      ",close:"\n        color: #a12622;\n        border: 1px solid #a12622;\n\n        &:hover {\n          background: #a12622;\n          color: #fff;\n        }\n      ",group:"\n        color: #a12622;\n      "}},flex:{container:"\n      display: flex;\n    ",group:"\n      margin: auto 0.5rem;\n    "}},{defaultProps:{variant:"info",size:"medium",flex:!0},staticProps:[]},{group:{align:{left:"\n        margin-right: auto;\n    ",right:"\n        margin-left: auto;\n    "}}}),h=function(e){switch(e){case"success":return c.CheckCircle;case"info":return c.InfoCircle;case"warning":return c.ExclamationTriangle;default:return c.ExclamationCircle}};function f(e){return(0,l.jsxs)(p,d(d({},e),{},{children:[(0,l.jsx)(p.Group,{style:{marginTop:"1px"},children:(0,l.jsx)(c.FaSVG,{children:(0,l.jsx)("path",{fill:"currentColor",d:h(e.variant)})})}),(0,l.jsx)(p.Content,{children:e.content?e.content:e.children}),e.closable&&(0,l.jsx)(p.Group,{align:"right",children:(0,l.jsx)(p.Close,{children:"x"})})]}))}var x,v,m,g,j,b,y,w,k,Z,C,S,P,I,O=t(16835),N=t(50029),R=t(87794),D=t.n(R),E=t(99603),A=t(59417),F=t(64735),T=t(56839),B=t(62297),z=function(){var e=(0,N.Z)(D().mark((function e(n,t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.e.post("installation",{requestId:n,environment:t}).then((function(e){return e.data}));case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),G=function(){var e=(0,N.Z)(D().mark((function e(n,t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.e.put("installation",{requestId:n,environment:t}).then((function(e){return e.data}));case 3:return r=e.sent,e.abrupt("return",[r,null]);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),L=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.idp,i=n.property,a=n.searchKey,o=n.integrationId,e.prev=1,e.next=4,B.e.post("keycloak/users",{environment:t,idp:r,property:i,searchKey:a,integrationId:o}).then((function(e){return e.data}));case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.search,a=void 0===i?"":i,e.prev=1,e.next=4,B.e.post("keycloak/roles",{environment:t,integrationId:r,search:a}).then((function(e){return e.data}));case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,a=n.compositeRoleNames,e.prev=1,e.next=4,B.e.post("keycloak/set-composite-roles",{environment:t,integrationId:r,roleName:i,compositeRoleNames:a}).then((function(e){return e.data}));case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,B.e.post("keycloak/get-composite-roles",{environment:t,integrationId:r,roleName:i}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o,s,c,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,a=n.first,o=void 0===a?0:a,s=n.max,c=void 0===s?50:s,e.prev=1,e.next=4,B.e.post("keycloak/user-roles",{environment:t,integrationId:r,username:i,first:o,max:c}).then((function(e){return e.data}));case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,a=n.roleName,o=n.mode,e.prev=1,e.next=4,B.e.put("keycloak/user-role",{environment:t,integrationId:r,username:i,roleName:a,mode:o}).then((function(e){return e.data}));case 4:return s=e.sent,e.abrupt("return",[s,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.username,a=n.roleNames,e.prev=1,e.next=4,B.e.put("keycloak/user-roles",{environment:t,integrationId:r,username:i,roleNames:a}).then((function(e){return e.data}));case 4:return o=e.sent,e.abrupt("return",[o,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o,s,c,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,a=n.first,o=void 0===a?0:a,s=n.max,c=void 0===s?50:s,e.prev=1,e.next=4,B.e.post("keycloak/role-users",{environment:t,integrationId:r,roleName:i,first:o,max:c}).then((function(e){return e.data}));case 4:return l=e.sent,e.abrupt("return",[l,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.integrationId,r=n.roles,e.prev=1,e.next=4,B.e.post("keycloak/bulk-roles",{integrationId:t,roles:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environment,r=n.integrationId,i=n.roleName,e.prev=1,e.next=4,B.e.post("keycloak/delete-role",{environment:t,integrationId:r,roleName:i}).then((function(e){return e.data}));case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),J=t(36200),Q=t(91929),X=t(23761),$=t(64575),ee=t(7541),ne=t(28471),te=t(76554),re=t(74150),ie=a.default.div(x||(x=(0,i.Z)(["\n  text-align: center;\n"]))),ae=a.default.div(v||(v=(0,i.Z)(["\n  color: #000;\n  font-size: ",";\n  font-weight: bold;\n"])),$.n5),oe=a.default.span(m||(m=(0,i.Z)(["\n  color: #3e3e3e;\n  font-size: 14px;\n  font-weight: 700;\n"]))),se=a.default.div(g||(g=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),ce=a.default.div(j||(j=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),le=(0,ee.hU)((function(e){var n=e.integration,t=e.alert,i=(0,r.useState)(!1),a=i[0],o=i[1],s=function(){var e=(0,N.Z)(D().mark((function e(t){var r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,z(n.id,t);case 3:return r=e.sent,i=(0,O.Z)(r,1),a=i[0],o(!1),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,N.Z)(D().mark((function e(n){var r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:r=e.sent,(0,Q.TE)((0,Q.ON)(r)),i=r?"success":"danger",a=r?"Installation copied to clipboard":"Failed to download installation",t.show({variant:i,fadeOut:1e4,closable:!0,content:a});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,N.Z)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:r=e.sent,(0,Q.Di)((0,Q.ON)(r),"".concat(n.projectName,"-installation-").concat(t,".json"));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a?(0,l.jsxs)(ie,{children:[(0,l.jsx)(se,{}),(0,l.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(se,{}),(0,l.jsx)(ce,{children:"Installation JSONs"}),(0,l.jsx)("br",{}),(0,l.jsx)(F.ZP,{cols:3,children:(0,X.Dy)(n).map((function(e){if("service-account"!==n.authType&&0===e.idps.length)return null;var t=e.idps.length>0?"(".concat(e.idps.map((function(e){return te.Sk[e]})).join(", "),")"):"";return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(F.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,l.jsx)(F.ZP.Col,{span:1,style:{width:"100%",height:"30px"},children:(0,l.jsxs)(ae,{children:[e.display," ",t]})})}),(0,l.jsx)(F.ZP.Row,{collapse:"992",gutter:[],align:"center",children:(0,l.jsxs)(F.ZP.Col,{span:3,children:[(0,l.jsx)(J.Z,{size:"medium",variant:"grey",onClick:function(){return c(e.name)},children:"Copy"}),"\xa0",(0,l.jsx)(J.Z,{size:"medium",variant:"grey",onClick:function(){return u(e.name)},children:"Download"}),"\xa0\xa0",(0,l.jsx)(E.G,{color:"green",icon:A.f8k,title:"Ready"}),"\xa0",(0,l.jsx)(oe,{children:"Ready"})]})}),(0,l.jsx)("br",{})]},e.name)}))}),(0,l.jsxs)(ne.$,{children:["For more information on how to use these details, or for the public endpoints associated to your client, see"," ",(0,l.jsx)(re.default,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#setting-up-your-keycloak-client",external:!0,children:"here"}),"."]})]})})),ue=t(4826),de=t(63537),pe=a.default.div(b||(b=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),he=a.default.span(y||(y=(0,i.Z)(["\n  color: #000;\n  font-size: 1.1rem;\n  font-weight: bold;\n"]))),fe=(0,a.default)(E.G)(w||(w=(0,i.Z)(["\n  margin-right: 20px;\n"]))),xe=a.default.div(k||(k=(0,i.Z)(["\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n"]))),ve=a.default.hr(Z||(Z=(0,i.Z)(["\n  background-color: black;\n"]))),me=(0,ee.hU)((function(e){var n=e.selectedRequest,t=e.alert,i=(0,r.useState)(null),a=i[0],o=i[1],s=(0,X.Dy)(n),c=function(){var e=(0,N.Z)(D().mark((function e(){var r,i,o,s,c,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(n.id,(null===a||void 0===a?void 0:a.name)||null);case 2:r=e.sent,i=(0,O.Z)(r,2),o=i[0],s=i[1],c=s?"danger":"success",l=s?"Failed to regenerate secret":"Client Secret Successfully Updated",t.show({variant:c,fadeOut:1e4,closable:!0,content:l}),window.location.hash="#",console.error(o,s);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(xe,{children:[(0,l.jsx)(fe,{icon:A.eHv,color:"black",title:"Warning",size:"2x"}),(0,l.jsxs)("strong",{children:["You're About to Change Your Client Secret for Your ",null===a||void 0===a?void 0:a.display," Environment."]})," "]}),(0,l.jsx)(ve,{}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Once you change your secret, your previous secret will no longer be valid for any applications using it."}),(0,l.jsx)("li",{children:"This means you will need to update any applications using this client with the new JSON details before they are functional again."})]})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(pe,{}),s.map((function(e){return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)(he,{children:[e.display,": "]}),!n.publicAccess&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(ue.default,{type:"button",onClick:function(){return function(e){o(e),window.location.hash="confirm-new-secret"}(e)},children:"Change your client secret"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]},e.name)}))]}),(0,l.jsx)(de.Z,{id:"confirm-new-secret",content:u,onConfirm:c,icon:A.eHv,title:"You're About to Change Your Client Secret",closable:!0})]})})),ge=t(20070),je=t.n(ge),be=t(69696),ye=t(34798),we=t.n(ye),ke=t(85330);function Ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Se,Pe,Ie,Oe,Ne,Re=(0,a.default)(be.ZP)(C||(C=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  text-align: left !important;\n\n  & .pg-modal-main {\n    margin: auto;\n    box-shadow: 5px 5px 10px black;\n  }\n"]))),De=(0,a.default)(be.ZP.Header)(S||(S=(0,i.Z)(["\n  font-size: 1.5em;\n  padding: 0.75em;\n  background: #38598a;\n  color: #fff;\n  & a {\n    float: right;\n  }\n"]))),Ee=(0,a.default)(E.G)(P||(P=(0,i.Z)(["\n  margin-right: 5px;\n  height: 30px;\n"]))),Ae=a.default.div(I||(I=(0,i.Z)(["\n  min-width: 350px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: "," & button {\n    min-width: 150px;\n    display: inline-block;\n  }\n"])),(function(e){return"none"===e.buttonAlign?"space-between;":"".concat(e.buttonAlign,";")})),Fe={open:we(),close:we(),updateConfig:we(),getId:function(){return 1}},Te=function(e,n){var t=e.id,i=void 0===t?(new Date).getTime().toString():t,a=e.title,o=void 0===a?"":a,s=e.onConfirm,c=void 0===s?function(e,n){return!0}:s,u=e.onCancel,d=void 0===u?we():u,p=e.onClose,h=void 0===p?we():p,f=e.closable,x=void 0===f||f,v=e.children,m=e.icon,g=void 0===m?A.eHv:m,j=e.confirmButtonText,b=void 0===j?"Confirm":j,y=e.cancelButtonText,w=void 0===y?"Cancel":y,k=e.confirmButtonVariant,Z=void 0===k?"bcPrimary":k,C=e.cancelButtonVariant,S=void 0===C?"bcSecondary":C,P=e.showConfirmButton,I=void 0===P||P,O=e.showCancelButton,R=void 0===O||O,F=e.buttonAlign,B=void 0===F?"none":F,z=e.style,G=void 0===z?{}:z,L={id:i,confirmButtonText:b,cancelButtonText:w,confirmButtonVariant:Z,cancelButtonVariant:S,showConfirmButton:I,showCancelButton:R,buttonAlign:B},U=(0,r.useRef)(),M=(0,r.useState)(!1),K=M[0],q=M[1],V=(0,r.useState)(null),W=V[0],Y=V[1],_=(0,r.useState)(L),H=_[0],J=_[1];(0,r.useImperativeHandle)(n,(function(){return{open:function(e){Y(e),window.location.hash=i},close:function(e){J(Ce({},L)),h(U,W,e),window.location.hash=(null===e||void 0===e?void 0:e._hash)||(null===W||void 0===W?void 0:W._hash)||"#"},updateConfig:function(e){J(Ce(Ce({},H),e))},getId:function(){return i}}}));var Q=function(){var e=(0,N.Z)(D().mark((function e(){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,c(U,W);case 3:n=e.sent,q(!1),!1!==n&&(J(Ce({},L)),window.location.hash=(null===W||void 0===W?void 0:W._hash)||"#");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,N.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(U,W),J(Ce({},L)),window.location.hash=(null===W||void 0===W?void 0:W._hash)||"#";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"function"===typeof v&&(v=v(W));var $=[];return"object"===typeof v&&(Array.isArray(v)?$=v:$.push(v)),$=r.Children.map($,(function(e,n){return(0,r.cloneElement)(e,{ref:U})})),(0,l.jsxs)(Re,{id:i,children:[(0,l.jsxs)(De,{title:o,as:"div",children:[g&&(0,l.jsx)(Ee,{icon:g,title:"Information",size:"2x",style:{paddingRight:"10px"}}),o,x&&(0,l.jsx)(be.ZP.Close,{onClick:X,title:"cancel",children:(0,l.jsx)(E.G,{icon:A.NBC,size:"lg"})})]}),(0,l.jsxs)(be.ZP.Content,{style:G,children:[$,(0,l.jsxs)(Ae,{buttonAlign:H.buttonAlign,children:[H.showCancelButton&&(0,l.jsx)(ke.zx,{variant:H.cancelButtonVariant,onClick:X,type:"button","data-testid":"modal-cancel-btn-".concat(H.id),children:H.cancelButtonText}),H.showConfirmButton&&(0,l.jsx)(ke.zx,{onClick:Q,variant:H.confirmButtonVariant,type:"button",className:"text-center","data-testid":"modal-confirm-btn-".concat(H.id),children:K?(0,l.jsx)(T.rj,{color:"#FFF",height:18,width:50,wrapperClass:"d-block",visible:K}):H.confirmButtonText})]})]})]})},Be=(0,r.forwardRef)(Te),ze=t(8846),Ge=t(11915),Le=t(43590),Ue=t.n(Le);function Me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Me(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=a.default.table(Se||(Se=(0,i.Z)(["\n  .env {\n    width: 300px;\n  }\n"]))),Ve=a.default.span(Pe||(Pe=(0,i.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n  & span {\n    margin-left: 5px;\n  }\n"]))),We=a.default.div(Ie||(Ie=(0,i.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),Ye=a.default.div(Oe||(Oe=(0,i.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),_e=a.default.div(Ne||(Ne=(0,i.Z)(["\n  color: #ff0000;\n"]))),He={name:"",envs:["dev"]};function Je(e,n){var t=e.integrationId,i=e.environments,a=void 0===i?["dev"]:i,o=(0,r.useState)(!1),s=o[0],c=o[1],u=(0,r.useState)({}),d=u[0],p=u[1],h=(0,r.useState)({}),f=h[0],x=h[1],v=(0,r.useState)([He]),m=v[0],g=v[1];(0,r.useImperativeHandle)(n,(function(){return{submit:function(){var e=(0,N.Z)(D().mark((function e(){var n,r,i,a,o,l,u,h;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m,s&&(n=[],Ue()(d,(function(e,t){n.push({name:t,envs:e})}))),e.next=4,_({integrationId:t,roles:n});case 4:return r=e.sent,i=(0,O.Z)(r,2),a=i[0],i[1],o={},l={},u=!1,h=!1,Ue()(a,(function(e){e.failure.length>0&&Ue()(e.failure,(function(n){o[n]||(o[n]=[]),o[n].push(e.env),u=!0})),e.duplicate.length>0&&Ue()(e.duplicate,(function(n){l[n]||(l[n]=[]),l[n].push(e.env),h=!0}))})),p(o),x(l),c(!0),e.abrupt("return",[u,h]);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),reset:function(){g([He]),p({}),x({}),c(!1)}}}));var j=function(){var e=(0,N.Z)(D().mark((function e(n,t,r){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m.map((function(e,r){return r===n?{name:e.name,envs:t.map((function(e){return e.value}))}:e})),g(i);case 2:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),b=null;if(s){var y=null,w=null;Object.keys(f).length>0&&(y=(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:(0,l.jsxs)(We,{children:[(0,l.jsx)(Ye,{children:(0,l.jsx)(E.G,{icon:A.sqG,color:"#17a2b8",title:"duplicated roles",size:"lg"})}),(0,l.jsx)(Ye,{children:"There are duplicated roles and we've skipped adding them."})]})})})),Object.keys(d).length>0&&(w=(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:(0,l.jsxs)(We,{children:[(0,l.jsx)(Ye,{children:(0,l.jsx)(E.G,{icon:A.eHv,color:"#dc3545",title:"failed roles",size:"lg"})}),(0,l.jsxs)(Ye,{children:["We were unable to save some of your changes.",(0,l.jsx)("br",{}),(0,l.jsx)("div",{className:"fw-bold",children:"Please try submitting again."})]})]})})})),b=(0,l.jsxs)(l.Fragment,{children:[y,w]})}else b=(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:m.length<20?(0,l.jsxs)(Ve,{onClick:function(){g(m.concat(He))},children:[(0,l.jsx)(E.G,{style:{color:"#006fc4"},icon:A.KtF,title:"Add Role"}),(0,l.jsx)("span",{children:"Add another role"})]}):(0,l.jsx)(_e,{children:"You can only create 20 roles at a time. Please save before creating any new roles."})})});return(0,l.jsx)("div",{children:(0,l.jsxs)(qe,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"role",children:"Role Name"}),(0,l.jsx)("th",{className:"env",children:"Environments"}),(0,l.jsx)("th",{})]})}),(0,l.jsxs)("tbody",{children:[m.length>0?m.map((function(e,n){var t=function(n,t){return d[e.name]&&d[e.name].includes(t.children)?Ke(Ke({},n),{},{color:"#fff",backgroundColor:"#dc3545"}):f[e.name]&&f[e.name].includes(t.children)?Ke(Ke({},n),{},{color:"#fff",backgroundColor:"#17a2b8"}):n};return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"role",children:(0,l.jsx)(Ge.default,{size:"small","data-testid":"role-name-input-field",minLength:"2",maxLength:"100",value:e.name,disabled:s,onChange:function(e){return function(e,n){var t=m.map((function(t,r){return r===e?{name:n,envs:t.envs}:t}));g(t)}(n,e.target.value)}})}),(0,l.jsx)("td",{className:"env",children:(0,l.jsx)(ze.ZP,{value:e.envs.map((function(e){return{value:e,label:e}})),options:a.map((function(e){return{value:e,label:e}})),isMulti:!0,isDisabled:s,placeholder:"Select...",noOptionsMessage:function(){return"You selected all environments"},onChange:function(e,t){return j(n,e,t)},styles:{multiValueLabel:t,multiValue:t}})}),(0,l.jsx)("td",{children:!s&&m.length>1&&(0,l.jsx)(Ve,{onClick:function(){return function(e){g(m.filter((function(n,t){return t!==e})))}(n)},children:(0,l.jsx)(E.G,{style:{color:"#FF0303"},icon:A.uMC,title:"Remove Role"})})})]})})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:"No roles added."})}),b]})]})})}var Qe,Xe=(0,r.forwardRef)(Je),$e=t(50334),en=t(27812),nn=t(93096),tn=t.n(nn),rn=t(29208),an=t.n(rn),on=t(34766),sn=t.n(on),cn=t(246),ln=t.n(cn),un=t(9392),dn=t(15338),pn=a.default.div(Qe||(Qe=(0,i.Z)(["\n  text-align: center;\n"]))),hn=[{value:5,text:"5 per page"},{value:10,text:"10 per page"},{value:15,text:"15 per page"},{value:30,text:"30 per page"},{value:50,text:"50 per page"},{value:100,text:"100 per page"}];function fn(e){var n=e.variant,t=e.headers,i=e.children,a=void 0===i?function(){return(0,l.jsx)(l.Fragment,{})}:i,o=e.pagination,s=void 0===o||o,c=e.pageLimits,u=void 0===c?hn:c,d=e.searchKey,p=e.searchPlaceholder,h=e.filters,f=void 0===h?[]:h,x=e.searchLocation,v=e.totalColSpan,m=e.searchColSpan,g=e.filterColSpan,j=e.showFilters,b=void 0===j||j,y=e.showContent,w=void 0===y||y,k=e.headerAlign,Z=e.headerGutter,C=e.onSearch,S=e.onEnter,P=e.loading,I=e.rows,O=void 0===I?[]:I,N=e.rowPlaceholder,R=void 0===N?"No records found.":N,D=(0,r.useState)(u[0]),E=D[0],A=D[1],F=(0,r.useState)(1),T=F[0],B=F[1],z=(0,r.useMemo)((function(){var e=E.value,n=(T-1)*e;return O.slice(n,n+e)}),[O,T,E]);return(0,l.jsx)(dn.Z,{variant:n,headers:t,pagination:s,pageLimits:u,searchKey:d,searchPlaceholder:p,filters:f,page:T,limit:E.value,rowCount:O.length,onSearch:C,onEnter:S,loading:P,onLimit:function(e){B(1),A(u.find((function(n){return n.value===e}))||u[0])},onPrev:function(e){B(e)},onNext:function(e){B(e)},searchLocation:x,totalColSpan:v,searchColSpan:m,filterColSpan:g,showFilters:b,showContent:w,headerAlign:k,headerGutter:Z,children:O.length>0?z.map(a):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:t.length,children:(0,l.jsx)(pn,{children:R})})})})}var xn,vn,mn,gn,jn,bn,yn,wn,kn=(0,r.memo)(fn),Zn=t(25542),Cn=t(80820),Sn=t.n(Cn),Pn=t(99503),In=t.n(Pn),On=t(99245),Nn=t.n(On),Rn=t(96486),Dn=a.default.label(xn||(xn=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),En=a.default.div(vn||(vn=(0,i.Z)(["\n  display: flex;\n  & > div:first-child {\n    margin-right: 20px;\n  }\n"]))),An=a.default.div(mn||(mn=(0,i.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),Fn=a.default.div(gn||(gn=(0,i.Z)(["\n  font-size: 0.9rem;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),Tn=function(e){var n=e.children,t=e.width;return(0,l.jsx)(An,{width:t,children:(0,l.jsx)(F.ZP,{cols:6,children:(0,l.jsxs)(F.ZP.Row,{gutter:[],children:[(0,l.jsx)(F.ZP.Col,{span:5,children:n}),(0,l.jsx)(F.ZP.Col,{span:1,style:{textAlign:"right"},children:(0,l.jsx)(E.G,{icon:A.byT,color:"#9F9F9F",size:"lg"})})]})})})},Bn=function(e){var n=e.modalRef;return(0,l.jsx)(Be,{ref:n,id:"additiona-user-info",title:"Additional User Info",icon:null,cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){if(!e)return(0,l.jsx)(l.Fragment,{});var n=In()(e.attributes,Nn());return n=(0,Rn.mapKeys)(n,(function(e,n){return je()(n)})),(0,l.jsxs)("div",{children:[(0,l.jsx)(Dn,{children:"GUID"}),(0,l.jsx)(Tn,{width:"400px",children:e.guid}),(0,l.jsx)("br",{}),(0,l.jsx)(Dn,{children:"Attributes"}),(0,l.jsxs)(En,{children:[(0,l.jsx)(Fn,{width:"200px",children:"Key"}),(0,l.jsx)(Fn,{width:"700px",children:"Value"})]}),Sn()(n,(function(e,n){return(0,l.jsxs)(En,{children:[(0,l.jsx)(Tn,{width:"200px",children:n}),(0,l.jsx)(Tn,{width:"700px",children:e})]})}))]})}})},zn=t(89704),Gn=function(e){return e.startsWith("service-account-")},Ln=function(e){return"service-account-".concat(e)},Un=function(e){return e.filter((function(e){return e.username.startsWith("service-account-")}))};function Mn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Kn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Mn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qn,Vn=a.default.label(jn||(jn=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),Wn=ln(),Yn=a.default.div(bn||(bn=(0,i.Z)(["\n  text-align: center;\n"]))),_n=a.default.div(yn||(yn=(0,i.Z)(["\n  text-align: right;\n"]))),Hn=a.default.div(wn||(wn=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),Jn=[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"}],Qn=[{value:"firstName",label:"Display Name"},{value:"lastName",label:"Username"},{value:"email",label:"Email"}],Xn=[{value:"firstName",label:"Name"},{value:"lastName",label:"Login"},{value:"email",label:"Email"}],$n={idir:Jn,azureidir:Jn,bceidbasic:Qn,bceidbusiness:Qn,bceidboth:Qn,githubpublic:Xn,githubbcgov:Xn},et=function(e){return{label:e,value:e}},nt=function(){return(0,l.jsxs)(Yn,{children:[(0,l.jsx)(Hn,{}),(0,l.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},tt=(0,ee.hU)((function(e){var n=e.environment,t=e.integration,i=e.alert,a=(0,r.useRef)(Fe),o=(0,r.useRef)(Fe),s=(0,r.useRef)(Fe),c=(0,r.useRef)(Fe),u=(0,r.useState)(!1),d=u[0],p=u[1],h=(0,r.useState)(!1),f=h[0],x=h[1],v=(0,r.useState)(!1),m=v[0],g=v[1],j=(0,r.useState)(!1),b=j[0],y=j[1],w=(0,r.useState)(""),k=w[0],Z=w[1],C=(0,r.useState)(""),S=C[0],P=C[1],I=(0,r.useState)(0),R=I[0],T=I[1],B=(0,r.useState)(20),z=B[0],G=(B[1],(0,r.useState)(!0)),L=G[0],q=G[1],W=(0,r.useState)([]),_=W[0],J=W[1],Q=(0,r.useState)([]),X=Q[0],$=Q[1],ee=(0,r.useState)(null),ne=ee[0],re=ee[1],ie=(0,r.useState)([]),ae=ie[0],oe=ie[1],se=(0,r.useState)([]),ce=se[0],le=se[1],ue=(0,r.useState)(),de=ue[0],pe=ue[1],he=(0,r.useState)(!1),fe=he[0],xe=he[1],ve=(0,r.useState)(""),me=ve[0],ge=ve[1],je=(0,r.useState)([]),be=je[0],ye=je[1],we=(0,r.useCallback)(tn()(function(){var e=(0,N.Z)(D().mark((function e(r){var i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y(!0);case 4:return e.next=6,M({environment:n,integrationId:t.id,roleName:ne,compositeRoleNames:r.map((function(e){return e.value}))});case 6:return i=e.sent,a=(0,O.Z)(i,2),a[1]||Z("Last saved at ".concat((new Date).toLocaleString())),e.next=12,y(!1);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),2e3,{trailing:!0}),[ne]),Ze=function(){Se(),$([]),J([]),re(null),xe((0,$e.Yr)(t))};(0,r.useEffect)((function(){ye([]),"service-account"===t.authType?(le(["Service Accounts","Composite Roles"]),ge("Service Accounts")):"browser-login"===t.authType?(le(["Users","Composite Roles"]),ge("Users")):(le(["Users","Service Accounts","Composite Roles"]),ge("Users")),pe(t.id),t.id!==de&&Ze()}),[t]),(0,r.useEffect)((function(){ye([]),ne&&(Pe(!0,ne),Ie(ne),y(!1),Z(""))}),[ne]);var Ce=(0,r.useMemo)((function(){return _.map(et)}),[_]),Se=function(){var e=(0,N.Z)(D().mark((function e(){var r,a,o,s,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,U({environment:n,integrationId:t.id,search:S});case 5:r=e.sent,a=(0,O.Z)(r,2),o=a[0],s=a[1],c=o||[],!s&&o||i.show({variant:"danger",fadeOut:5e3,closable:!0,content:(null===s||void 0===s?void 0:s.message)||"failed to fetch roles"}),J(c),p(!1),1===c.length&&re(c[0]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,N.Z)(D().mark((function e(r,i){var a,o,s,c,l,u;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:if(!(i.length<2)){e.next=4;break}return e.abrupt("return");case 4:return a=0,o=[],x(!0),r?T(a):(a=R,o=X),e.next=10,Y({environment:n,integrationId:t.id,roleName:i,first:a,max:z});case 10:s=e.sent,c=(0,O.Z)(s,2),l=c[0],c[1],(u=l||[]).length>0?u.map(function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Gn(n.username)){e.next=8;break}return t=n.username.split("-"),e.next=4,(0,zn.A_)(t[t.length-1]);case 4:r=e.sent,i=(0,O.Z)(r,1),a=i[0],ye([].concat((0,en.Z)(be),[{username:n.username,integration:a}]));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()):ye([]),q(u.length===z),$(o.concat(u)),T(a+z),re(i),x(!1);case 21:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,N.Z)(D().mark((function e(r){var a,o,s,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,K({environment:n,integrationId:t.id,roleName:r});case 5:if(a=e.sent,o=(0,O.Z)(a,2),s=o[0],!(c=o[1])&&s){e.next=12;break}return i.show({variant:"danger",fadeOut:5e3,closable:!0,content:c||"failed to fetch composite roles"}),e.abrupt("return");case 12:oe(s.map((function(e){return{label:e,value:e}}))),g(!1);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,N.Z)(D().mark((function e(n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.current.open(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=null;0===R&&f?Ne=(0,l.jsx)(nt,{}):ne&&(Ne="Users"===me?(0,l.jsxs)(ke.iA,{variant:"mini",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"IDP"}),(0,l.jsx)("th",{children:"GUID"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{className:"text-center",children:"Actions"})]})}),X.filter((function(e){return!e.username.startsWith("service-account-")})).length>0?(0,l.jsx)(Wn,{element:"tbody",loadMore:function(){return Pe(!1,ne)},hasMore:L,loader:(0,l.jsx)(nt,{}),children:X.map((function(e){var n=e.username.split("@");if(n.length<2)return null;var t=(0,O.Z)(n,2),r=t[0],i=t[1],o=$n[i];return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:te.Sk[i]}),(0,l.jsx)("td",{children:r}),(0,l.jsx)("td",{children:e.email}),(0,l.jsxs)("td",{className:"text-center",children:[(0,l.jsx)("span",{onClick:function(n){n.stopPropagation(),a.current.open({guid:e.username.split("@")[0],attributes:Kn(Kn({},sn()(o,(function(n,t){return n[t.label]=an()(e,t.value),n}),{})),e.attributes)})},children:(0,l.jsx)(E.G,{style:{color:"#000"},icon:A.Mdf,size:"lg",title:"User Detail"})}),"\xa0\xa0",(0,l.jsx)("span",{onClick:function(){return s.current.open(e)},children:(0,l.jsx)(E.G,{style:{color:"#FF0303"},icon:A.uMC,size:"lg",title:"Remove User"})})]})]},r)}))}):(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,children:"No users found."})})})]}):"Service Accounts"===me?(0,l.jsxs)(ke.iA,{variant:"mini",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Project Name"}),(0,l.jsx)("th",{className:"text-right",children:"Actions"})]})}),Un(X).length>0?(0,l.jsx)(Wn,{element:"tbody",loadMore:function(){return Pe(!1,ne)},hasMore:L,loader:(0,l.jsx)(nt,{}),children:X.map((function(e){var n,t;return Gn(e.username)?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:null===(n=be.find((function(n){return n.username==e.username})))||void 0===n||null===(t=n.integration)||void 0===t?void 0:t.projectName}),(0,l.jsx)("td",{className:"text-right",children:(0,l.jsx)("span",{onClick:function(){return c.current.open(e)},children:(0,l.jsx)(E.G,{style:{color:"#FF0303"},icon:A.uMC,size:"lg",title:"Remove Service Account"})})})]},e.username):null}))}):(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,children:"No service accounts found."})})})]}):m?(0,l.jsx)(nt,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Vn,{children:["Select the roles to be nested under the Parent role"," ",(0,l.jsx)(Zn.Z,{content:"Composite roles associate (nest) one or more additional roles within it."})]}),(0,l.jsx)(ze.ZP,{value:ae,options:Ce.filter((function(e){return e.value!==ne})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:function(e){oe(e),we(e)},isDisabled:!fe}),(0,l.jsx)(ke.Ad,{saving:b,content:k})]}));var Re=(0,l.jsx)(kn,{rows:_,headers:[{label:"Role Name"}],showFilters:!1,rowPlaceholder:"No roles found.",children:function(e){return(0,l.jsxs)("tr",{className:ne===e?"active":"",onClick:function(){re(e)},children:[(0,l.jsx)("td",{children:e}),(0,l.jsx)("td",{children:(0,l.jsx)(_n,{children:(0,l.jsx)(un.Kk,{disabled:!fe,icon:A.$aW,role:"button","aria-label":"delete",onClick:function(n){fe&&(n.stopPropagation(),Oe(e))},title:"Delete",size:"lg",style:{marginRight:"1rem"}})})})]},e)}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.ZP,{cols:10,children:(0,l.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,l.jsx)(F.ZP.Col,{span:4,children:(0,l.jsxs)("div",{style:{display:"flex",float:"left"},children:[(0,l.jsx)(ke.E1,{type:"text",maxLength:"1000",placeholder:"Search existing roles",value:S,onChange:function(e){P(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&Se()}}),(0,l.jsx)(ke.zx,{type:"button",size:"small",variant:"bcPrimary",onClick:Se,children:"Search"})]})}),(0,l.jsx)(F.ZP.Col,{span:6,children:ne&&(0,l.jsx)(ke.mQ,{onChange:function(e){ge(e)},activeKey:me,tabBarGutter:30,children:ce.map((function(e){return(0,l.jsx)(ke.OK,{tab:e},e)}))})})]})}),(0,l.jsx)(Hn,{}),d?(0,l.jsx)(nt,{}):(0,l.jsx)(F.ZP,{cols:10,children:(0,l.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,l.jsx)(F.ZP.Col,{span:4,children:Re}),(0,l.jsx)(F.ZP.Col,{span:6,children:Ne})]})}),(0,l.jsx)(Be,{ref:o,title:"Delete Role",icon:A.eHv,onConfirm:function(){var e=(0,N.Z)(D().mark((function e(r,i){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({environment:n,integrationId:t.id,roleName:i});case 2:return e.next=4,Ze();case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),confirmButtonText:"Delete",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,l.jsx)("div",{children:"Are you sure you want to delete this role?"})}),(0,l.jsx)(Be,{id:"remove-user",ref:s,title:"Remove User from Role",icon:A.eHv,onConfirm:function(){var e=(0,N.Z)(D().mark((function e(r,a){var o,s,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V({environment:n,integrationId:t.id,username:a.username,roleName:ne,mode:"del"});case 4:o=e.sent,s=(0,O.Z)(o,2),(c=s[1])&&i.show({variant:"danger",fadeOut:5e3,closable:!0,content:c}),Pe(!0,ne);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,l.jsx)("div",{children:"Are you sure you want to remove this user from this role?"})}),(0,l.jsx)(Be,{id:"remove-service-account",ref:c,title:"Remove Service Account from Role",icon:A.eHv,onConfirm:function(){var e=(0,N.Z)(D().mark((function e(r,a){var o,s,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V({environment:n,integrationId:t.id,username:a.username,roleName:ne,mode:"del"});case 4:o=e.sent,s=(0,O.Z)(o,2),(c=s[1])&&i.show({variant:"danger",fadeOut:5e3,closable:!0,content:c}),Pe(!0,ne);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),confirmButtonText:"Remove",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",children:(0,l.jsx)("div",{children:"Are you sure you want to remove this service account from this role?"})}),(0,l.jsx)(Bn,{modalRef:a})]})})),rt=a.default.div(qn||(qn=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),it=function(e){var n=e.integration,t=(0,r.useRef)(Fe),i=(0,r.useState)("dev"),a=i[0],o=i[1],s=(0,r.useState)(!1),c=s[0],u=s[1],d=(0,r.useState)(0),p=d[0],h=d[1];(0,r.useEffect)((function(){o("dev"),u((0,$e.Yr)(n))}),[n.id]);var f=(null===n||void 0===n?void 0:n.environments)||[];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(rt,{}),(0,l.jsx)(ke.zx,{disabled:!c,size:"medium",variant:"primary",onClick:function(){t.current.open()},children:"+ Create a New Role"}),(0,l.jsx)(rt,{}),(0,l.jsxs)(ke.mQ,{onChange:function(e){o(e)},activeKey:a,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,l.jsx)("br",{}),f.map((function(e){return(0,l.jsx)(ke.OK,{tab:je()(e),children:(0,l.jsx)(tt,{environment:e,integration:n},p)},e)}))]}),(0,l.jsx)(Be,{ref:t,title:"Create New Role",icon:null,onConfirm:function(){var e=(0,N.Z)(D().mark((function e(n){var r,i,a,o;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current.submit();case 2:if(r=e.sent,i=(0,O.Z)(r,2),a=i[0],o=i[1],!a){e.next=11;break}return t.current.updateConfig({confirmButtonText:"Try Again"}),e.abrupt("return",!1);case 11:if(!o){e.next=17;break}return t.current.updateConfig({showConfirmButton:!1,cancelButtonText:"Close",buttonAlign:"right"}),h((function(e){return e+1})),e.abrupt("return",!1);case 17:return e.next=19,n.current.reset();case 19:h((function(e){return e+1}));case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onCancel:function(e){e.current.reset()},confirmButtonText:"Save",confirmButtonVariant:"primary",cancelButtonVariant:"secondary",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:(0,l.jsx)(Xe,{integrationId:n.id,environments:f})})]})},at=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.field,r=n.search,e.prev=1,e.next=4,B.e.post("bceid-webservice/idir/search",{field:t,search:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),ot=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.guid,r=n.userId,e.prev=1,e.next=4,B.e.post("bceid-webservice/idir/import",{guid:t,userId:r}).then((function(e){return e.data}));case 4:return i=e.sent,e.abrupt("return",[i,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),st=[{value:"idir",label:"IDIR"}],ct=[{value:"firstName",label:"First Name",allowed:["idir"]},{value:"lastName",label:"Last Name",allowed:["idir"]},{value:"email",label:"Email",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"userId",label:"Username",allowed:["idir","bceidbasic","bceidbusiness"]},{value:"guid",label:"IDP GUID",allowed:["bceidbasic","bceidbusiness"]}];function lt(e,n){var t=e.key,i=e.idp,a=e.property,o=e.search,s=e.infoModalRef,c=e.parentModalRef,u=(0,r.useState)(!1),d=u[0],p=u[1],h=(0,r.useState)(!1),f=h[0],x=h[1],v=(0,r.useState)([]),m=v[0],g=v[1],j=(0,r.useState)(""),b=j[0],y=j[1],w=(0,r.useState)(a),k=w[0],Z=w[1],C=(0,r.useState)(o),S=C[0],P=C[1];(0,r.useEffect)((function(){y(i)}),[i]),(0,r.useEffect)((function(){if(b){var e=ct.find((function(e){return e.value===k}));if(null===e||void 0===e?void 0:e.allowed.includes(b))I(S,k);else{var n=ct.find((function(e){return e.allowed.includes(b)}));Z((null===n||void 0===n?void 0:n.value)||""),P("")}}}),[b]);var I=function(){var e=(0,N.Z)(D().mark((function e(n){var t,r,i,a,o=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:k,!(n.length<2)){e.next=3;break}return e.abrupt("return");case 3:return x(!0),g([]),p(!0),e.next=8,at({field:t,search:n});case 8:r=e.sent,i=(0,O.Z)(r,2),a=i[0],i[1],a&&g(a),x(!1);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=(0,N.Z)(D().mark((function e(n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot({guid:n.guid,userId:n.userId});case 2:c.current.close({idp:b,guid:n.guid});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=null;return E=d?m.length>0?m.map((function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.individualIdentity.name.firstname}),(0,l.jsx)("td",{children:e.individualIdentity.name.surname}),(0,l.jsx)("td",{children:e.contact.email}),(0,l.jsx)("td",{children:e.userId}),(0,l.jsx)("td",{children:(0,l.jsxs)(un.c4,{children:[(0,l.jsx)(un.Kk,{icon:A.Mdf,role:"button","aria-label":"view",onClick:function(){s.current.open({guid:e.guid,attributes:{username:e.userId,displayName:e.displayName,firstName:e.individualIdentity.name.firstname,middleName:e.individualIdentity.name.middleName,lastName:e.individualIdentity.name.surname,initials:e.individualIdentity.name.initials,email:e.contact.email,telephone:e.contact.telephone,company:e.internalIdentity.company,department:e.internalIdentity.department,title:e.internalIdentity.title},_hash:c.current.getId()})},title:"View",size:"lg"}),(0,l.jsx)(un.Kk,{icon:A.q7m,role:"button","aria-label":"import",onClick:function(){return R(e)},title:"Import",size:"lg"})]})})]},e.guid)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:10,className:"text-center",children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:10,className:"text-center",children:"You have not searched for any users yet."})}),(0,l.jsx)(dn.Z,{variant:"mini",searchLocation:"right",filters:[{value:b,multiselect:!1,onChange:y,options:st},{value:k,multiselect:!1,onChange:Z,options:ct.filter((function(e){return e.allowed.includes(b)}))}],headers:[{label:"First name"},{label:"Last Name"},{label:"Email"},{label:"IDIR username"}],searchKey:S,searchPlaceholder:"Enter search criteria",onSearch:I,onEnter:I,loading:f,totalColSpan:20,searchColSpan:10,filterColSpan:10,children:E},"".concat(t,"-").concat(S))}var ut,dt,pt,ht,ft,xt,vt,mt,gt,jt=(0,r.forwardRef)(lt);function bt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function yt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?bt(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var wt=a.default.label(ut||(ut=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),kt=(a.default.div(dt||(dt=(0,i.Z)(["\n  display: flex;\n  & > div:first-child {\n    margin-right: 20px;\n  }\n"]))),a.default.div(pt||(pt=(0,i.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),a.default.div(ht||(ht=(0,i.Z)(["\n  font-size: 0.9rem;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),a.default.div(ft||(ft=(0,i.Z)(["\n  text-align: center;\n"])))),Zt=a.default.div(xt||(xt=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),Ct=a.default.div(vt||(vt=(0,i.Z)(["\n  text-align: center;\n"]))),St=a.default.div(mt||(mt=(0,i.Z)(["\n  display: flex;\n  & > * {\n    padding-right: 0.5rem;\n  }\n"]))),Pt=a.default.div(gt||(gt=(0,i.Z)(["\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]))),It=function(){return(0,l.jsxs)(kt,{children:[(0,l.jsx)(Zt,{}),(0,l.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},Ot=function(e,n){return n.slice(15*(e-1),15*e)},Nt=[{value:"firstName",label:"First Name",search:!0,result:!0},{value:"lastName",label:"Last Name",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],Rt=[{value:"firstName",label:"Display Name",search:!0,result:!0},{value:"lastName",label:"Username",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],Dt=[{value:"firstName",label:"Name",search:!0,result:!0},{value:"lastName",label:"Login",search:!0,result:!0,style:{minWidth:"170px"}},{value:"email",label:"Email",search:!0,result:!0,style:{minWidth:"170px"}},{value:"guid",label:"IDP GUID",search:!0,result:!1}],Et={idir:Nt,azureidir:Nt,bceidbasic:Rt,bceidbusiness:Rt,bceidboth:Rt,githubpublic:Dt,githubbcgov:Dt},At=(0,ee.hU)((function(e){var n=e.selectedRequest,t=(e.alert,(0,r.useRef)(Fe)),i=(0,r.useRef)(Fe),a=(0,r.useState)(!1),o=a[0],s=a[1],c=(0,r.useState)(1),u=c[0],d=c[1],p=(0,r.useState)(0),h=p[0],f=p[1],x=(0,r.useState)(!1),v=x[0],m=x[1],g=(0,r.useState)(!1),j=g[0],b=g[1],y=(0,r.useState)(!1),w=y[0],k=y[1],Z=(0,r.useState)(""),C=Z[0],S=Z[1],P=(0,r.useState)([]),I=P[0],R=P[1],T=(0,r.useState)([]),B=T[0],z=T[1],G=(0,r.useState)([]),M=G[0],K=G[1],V=(0,r.useState)("dev"),Y=V[0],_=V[1],H=(0,r.useState)(""),J=H[0],Q=H[1],X=(0,r.useState)(""),$=X[0],ee=X[1],ne=(0,r.useState)(""),re=ne[0],ie=ne[1],ae=(0,r.useState)(void 0),oe=ae[0],se=ae[1],ce=[{value:15,text:"".concat(15," per page")}],le=(0,r.useCallback)(tn()(function(){var e=(0,N.Z)(D().mark((function e(t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!0);case 2:return e.next=4,W({environment:Y,integrationId:n.id,username:oe,roleNames:t});case 4:return r=e.sent,i=(0,O.Z)(r,2),i[1]||S("Last saved at ".concat((new Date).toLocaleString())),e.next=10,k(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),2e3,{trailing:!0}),[null===n||void 0===n?void 0:n.id,Y,oe]),de=function(){var e=(0,N.Z)(D().mark((function e(){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m(!0);case 4:return e.next=6,U({environment:Y,integrationId:n.id,first:0,max:1e3});case 6:t=e.sent,r=(0,O.Z)(t,2),i=r[0],r[1],z(i||[]),m(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){R([]),K([]),d(1),f(0),se(void 0),s(!1)},he=function(){var e=(0,N.Z)(D().mark((function e(t){var r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(!0);case 2:return e.next=4,q({environment:Y,integrationId:n.id,username:t});case 4:return r=e.sent,i=(0,O.Z)(r,2),a=i[0],i[1],e.next=10,K(a||[]);case 10:b(!1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){pe(),function(){if(ie(""),_("dev"),n.devIdps){var e=n.devIdps.length>0?n.devIdps[0]:"";Q(e);var t=Et[e]||[];t.length>0&&ee(t[0].value)}}(),z([])}),[n.id]),(0,r.useEffect)((function(){fe(re,void 0,u)}),[u]),(0,r.useEffect)((function(){pe(),de(),n.devIdps&&Q(n.devIdps.length>0?n.devIdps[0]:"")}),[Y]),(0,r.useEffect)((function(){pe();var e=Et[J]||[];e.find((function(e){return e.search&&e.value===$}))||e.length>0&&ee(e[0].value)}),[J]),(0,r.useEffect)((function(){S(""),oe&&he(oe)}),[oe]);var fe=function(){var e=(0,N.Z)(D().mark((function e(t){var r,i,a,o,c,l=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:$,i=l.length>2&&void 0!==l[2]?l[2]:u,!(t.length<2)){e.next=4;break}return e.abrupt("return");case 4:return m(!0),ie(t),d(i),ee(r),R([]),K([]),se(void 0),s(!0),e.next=14,L({environment:Y,idp:J,property:r,searchKey:t,integrationId:n.id||-1});case 14:a=e.sent,o=(0,O.Z)(a,2),c=o[0],o[1],c&&(R(Ot(i,c.rows)),f(c.count),1===c.count&&se(c.rows[0].username)),m(!1);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),xe=function(e){return fe(e,void 0,1)},ve=function(){var e=(0,N.Z)(D().mark((function e(n,t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],"clear"===t.action||(r="remove-value"===t.action?M.filter((function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)})):[].concat((0,en.Z)(M),[null===(i=t.option)||void 0===i?void 0:i.value])),le(r),K(r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),me=null;j?me=(0,l.jsx)(It,{}):oe&&(me=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(wt,{children:"2. Assign User to a Role"}),(0,l.jsx)(ze.ZP,{value:M.map((function(e){return{value:e,label:e}})),options:B.map((function(e){return{value:e,label:e}})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:ve}),(0,l.jsx)(ke.Ad,{saving:w,content:C})]}));var ge="idir"===J,be=Et[J]||[],ye=be.length>0?be.filter((function(e){return e.result})):[],we=null;we=o?I.length>0?I.map((function(e){return(0,l.jsxs)("tr",{className:oe===e.username?"active":"",onClick:function(){se(e.username)},children:[ye.map((function(n){return(0,l.jsx)("td",{children:an()(e,n.value)})})),(0,l.jsx)("td",{children:(0,l.jsx)(un.c4,{children:(0,l.jsx)(un.Kk,{icon:A.Mdf,role:"button","aria-label":"view",onClick:function(n){n.stopPropagation(),t.current.open({guid:e.username.split("@")[0],attributes:yt(yt({},sn()(ye,(function(n,t){return n[t.label]=an()(e,t.value),n}),{})),e.attributes)})},title:"View",size:"lg"})})})]},e.username)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:10,children:(0,l.jsxs)(St,{children:[(0,l.jsx)(Pt,{children:(0,l.jsx)(E.G,{icon:A.RLE,color:"#D44331",title:"Edit",size:"lg"})}),ge?(0,l.jsx)(Pt,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria or try using our IDIM Web Service Lookup tool."}):(0,l.jsx)(Pt,{children:"The user you searched for does not exist. Please try again, by entering the full search criteria."})]})})}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:10,children:(0,l.jsx)(Ct,{children:"You have not searched for any users yet."})})});var Ze=null;o&&ge&&(Ze=(0,l.jsxs)(l.Fragment,{children:[I.length>0&&(0,l.jsx)(ke.XU,{italic:!0,children:"If you did not find the user you were looking for, you can try searching for the user in our IDIM Web Service Lookup tool. This tool uses a webservice to find IDIR users. so you will need to import the user that is found."}),(0,l.jsx)(ue.default,{type:"button",size:"small",onClick:function(){return i.current.open({key:(new Date).getTime().toString(),idp:"idir",property:$,search:re})},children:"Search in IDIM Web Service Lookup"})]}));var Ce=(null===n||void 0===n?void 0:n.environments)||[],Se=(null===n||void 0===n?void 0:n.devIdps)||[],Pe="guid"===$||J.startsWith("bceid")?"Exact text match results will be displayed":"Partial text match results will be displayed";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Zt,{}),(0,l.jsx)(F.ZP,{cols:10,children:(0,l.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,l.jsxs)(F.ZP.Col,{span:6,children:[(0,l.jsxs)(ke.h4,{variant:"dark",size:"sm",children:["1. Search for a user based on the selection criteria below \xa0",(0,l.jsx)(Zn.Z,{title:"",content:"When searching BCeID GUID, please ensure your end users has logged in via your app (and indirectly our IDP) for this search to be successful.",hide:200})]}),(0,l.jsx)(dn.Z,{variant:"mini",searchLocation:"right",filters:[{key:"user-role-filter-env",value:Y,multiselect:!1,onChange:_,options:Ce.map((function(e){return{value:e,label:je()(e)}}))},{key:"user-role-filter-idp",value:J,multiselect:!1,onChange:Q,options:Se.map((function(e){return{value:e,label:te.Sk[e]}}))},{key:"user-role-filter-prop",value:$,multiselect:!1,onChange:ee,options:be.filter((function(e){return e.search}))}],headers:ye,pagination:!0,pageLimits:ce,limit:15,page:u,searchKey:re,searchPlaceholder:"Enter search criteria",searchTooltip:Pe,onSearch:xe,onEnter:xe,loading:v,rowCount:h,onPrev:d,onNext:d,totalColSpan:20,searchColSpan:8,filterColSpan:12,children:we},re),Ze]}),(0,l.jsx)(F.ZP.Col,{span:4,children:me})]})}),(0,l.jsx)(Bn,{modalRef:t}),(0,l.jsx)(Be,{ref:i,id:"idim-webservice-lookup",title:"IDIM Web Service Lookup",icon:null,onClose:function(e,n,t){fe(t.guid,"guid",1)},cancelButtonText:"Close",cancelButtonVariant:"primary",showConfirmButton:!1,buttonAlign:"right",style:{minWidth:"800px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:function(e){return e?(0,l.jsx)(jt,{idp:e.idp,property:e.property,search:e.search,infoModalRef:t,parentModalRef:i},e.key):(0,l.jsx)(l.Fragment,{})}})]})})),Ft=t(56381),Tt=t(91832),Bt=t(69413),zt=t(29845),Gt=t(45349);function Lt(e){var n=e.requestId,t=(0,r.useState)(!1),i=t[0],a=t[1],o=(0,r.useState)(!1),s=o[0],c=o[1],u=(0,r.useState)([]),d=u[0],p=u[1],h=function(){var e=(0,N.Z)(D().mark((function e(){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return a(!0),e.next=5,(0,Bt.v)({requestId:n,eventCode:"request-update-success",clearNotifications:!0});case 5:t=e.sent,r=(0,O.Z)(t,2),i=r[0],r[1]?c(!0):i&&p(i.rows),a(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h()}),[n]),s?(0,l.jsx)(f,{variant:"warning",content:"Failed to load details."}):i?(0,l.jsx)(zt.Z,{}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Gt.Z,{events:d})})}var Ut,Mt,Kt,qt,Vt=t(77757),Wt=t(71431),Yt=t.n(Wt),_t=a.default.div(Ut||(Ut=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  border-bottom: 1px solid gray;\n"]))),Ht=a.default.div(Mt||(Mt=(0,i.Z)(["\n  display: flex;\n  justify-content: flex-start;\n\n  & > *:nth-child(1) {\n    margin-right: 5px;\n  }\n"]))),Jt="15px",Qt=a.default.div(Kt||(Kt=(0,i.Z)(["\n  height: ",";\n  width: ",";\n  border-radius: ",";\n  margin: ",";\n  margin-left: 0;\n  border: 2px solid #b3b3b3;\n"])),Jt,Jt,Jt,"0"),Xt=a.default.li(qt||(qt=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0;\n\n  & p {\n    max-width: 90%;\n    margin: 5px 0;\n  }\n"]))),$t=function(e){var n=e.integration;return(0,l.jsxs)(Ht,{children:[(0,l.jsx)("div",{children:(0,l.jsx)(E.G,{icon:A.f8k,color:"#2E8540"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"Your integration has been approved. Please wait approx. 10 min to get access to your installation information access again."}),(0,l.jsx)(_t,{children:"Progress Update"}),(0,l.jsx)(Tt.s,{integration:n})]})]})},er=function(){return(0,l.jsxs)(Ht,{children:[(0,l.jsx)("div",{children:(0,l.jsx)(E.G,{icon:A.f8k,color:"#2E8540"})}),(0,l.jsx)("div",{children:(0,l.jsx)("span",{children:"Your integration is approved and available."})})]})},nr=t(44832);function tr(e){e.integration;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(nr.Z,{children:[(0,l.jsxs)(Xt,{children:["Requirements email sent to IDIM",(0,l.jsx)(E.G,{icon:A.f8k,color:"#00C45B"})]}),(0,l.jsxs)(Xt,{children:[(0,l.jsxs)("p",{children:["Please reach out to IDIM if you do not hear back within the next 2-3 business days (",(0,l.jsx)(re.default,{href:"mailto:IDIM.Consulting@gov.bc.ca",children:"IDIM.Consulting@gov.bc.ca"}),")"]}),(0,l.jsx)(E.G,{icon:A.FU$,color:"#b3b3b3"})]}),(0,l.jsxs)(Xt,{children:[(0,l.jsx)("p",{children:"Access to prod"}),(0,l.jsx)(Qt,{})]})]})})}var rr=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,i=t.hasBceid,a=t.awaitingBceidProd,o=t.bceidProdApplying,s=t.bceidApproved;if(!r||!i)return null;var c=null;return o?c=(0,l.jsx)($t,{integration:n}):s?c=(0,l.jsx)(er,{}):a&&(c=(0,l.jsx)(tr,{integration:n})),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(_t,{children:"Access to BCeID Prod"}),(0,l.jsx)("br",{}),c]})};function ir(e){e.integration;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(nr.Z,{children:[(0,l.jsxs)(Xt,{children:["Requirements email sent to GCIO",(0,l.jsx)(E.G,{icon:A.f8k,color:"#00C45B"})]}),(0,l.jsxs)(Xt,{children:[(0,l.jsx)("p",{children:"Access to prod"}),(0,l.jsx)(Qt,{})]})]})})}var ar,or,sr,cr,lr,ur,dr=function(e){var n=e.integration,t=e.approvalContext,r=t.hasProd,i=t.hasGithub,a=t.awaitingGithubProd,o=t.githubProdApplying,s=t.githubApproved;if(!r||!i)return null;var c=null;return o?c=(0,l.jsx)($t,{integration:n}):s?c=(0,l.jsx)(er,{}):a&&(c=(0,l.jsx)(ir,{integration:n})),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(_t,{children:"Access to GitHub Prod"}),(0,l.jsx)("br",{}),c]})},pr=t(89816),hr=a.default.label(ar||(ar=(0,i.Z)(["\n  font-weight: bold;\n  margin-bottom: 2px;\n"]))),fr=(a.default.div(or||(or=(0,i.Z)(["\n  background-color: #f1f1f1;\n  margin: 2px 0 2px 0;\n  padding: 4px 6px;\n  ","\n"])),(function(e){return e.width?"width: ".concat(e.width,";"):"width: 300px;"})),a.default.div(sr||(sr=(0,i.Z)(["\n  text-align: center;\n"])))),xr=a.default.div(cr||(cr=(0,i.Z)(["\n  height: var(--field-top-spacing);\n"]))),vr=function(){return(0,l.jsxs)(fr,{children:[(0,l.jsx)(xr,{}),(0,l.jsx)(T.rj,{color:"#000",height:45,width:45,wrapperClass:"d-block",visible:!0})]})},mr=(0,ee.hU)((function(e){var n=e.selectedRequest,t=(e.alert,(0,r.useState)(!1)),i=(t[0],t[1]),a=(0,r.useState)(!1),o=a[0],s=a[1],c=(0,r.useState)(!1),u=c[0],d=c[1],p=(0,r.useState)(""),h=p[0],f=p[1],x=(0,r.useState)([]),v=x[0],m=x[1],g=(0,r.useState)([]),j=g[0],b=g[1],y=(0,r.useState)(void 0),w=y[0],k=(y[1],(0,r.useState)("dev")),Z=k[0],C=k[1],S=(null===n||void 0===n?void 0:n.environments)||[],P=(0,r.useCallback)(tn()(function(){var e=(0,N.Z)(D().mark((function e(t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(!0);case 2:return e.next=4,W({environment:Z,integrationId:n.id,username:Ln(n.clientId),roleNames:t});case 4:return r=e.sent,i=(0,O.Z)(r,2),i[1]||f("Last saved at ".concat((new Date).toLocaleString())),e.next=10,d(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),2e3,{trailing:!0}),[null===n||void 0===n?void 0:n.id,Z,w]),I=function(){var e=(0,N.Z)(D().mark((function e(n,t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],"clear"===t.action||(r="remove-value"===t.action?j.filter((function(e){var n;return e!==(null===(n=t.removedValue)||void 0===n?void 0:n.value)})):[].concat((0,en.Z)(j),[null===(i=t.option)||void 0===i?void 0:i.value])),P(r),b(r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),R=function(){var e=(0,N.Z)(D().mark((function e(){var t,r,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i(!0);case 4:return e.next=6,U({environment:Z,integrationId:n.id,first:0,max:1e3});case 6:t=e.sent,r=(0,O.Z)(t,2),a=r[0],r[1],m(a||[]),i(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,N.Z)(D().mark((function e(t){var r,i,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(!0);case 2:return e.next=4,q({environment:Z,integrationId:n.id,username:t});case 4:return r=e.sent,i=(0,O.Z)(r,1),a=i[0],e.next=9,b(a||[]);case 9:s(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){R(),f(""),E(Ln(n.clientId))}),[Z]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(pr.Z,{children:(0,l.jsx)(ke.bZ,{variant:"info",closable:!1,"data-testid":"assign-svc-acct-role-risk-alert",children:(0,l.jsxs)("span",{className:"normal",children:["There may be a security risk if you rely on client roles of a service account,"," ",(0,l.jsx)(re.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/Creating-a-Role#service-account-role-management",children:"learn more"})]})})}),(0,l.jsxs)(ke.mQ,{onChange:function(e){C(e)},activeKey:Z,tabBarGutter:30,destroyInactiveTabPane:!0,children:[(0,l.jsx)("br",{}),S.map((function(e){return(0,l.jsx)(ke.OK,{tab:je()(e),children:(0,l.jsx)(F.ZP,{cols:10,children:(0,l.jsxs)(F.ZP.Row,{collapse:"1100",gutter:[15,2],children:[(0,l.jsx)(F.ZP.Col,{span:5,children:(0,l.jsxs)(ke.iA,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Service Account"})})}),(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{className:"active",children:(0,l.jsx)("td",{children:n.projectName})})})]})}),(0,l.jsx)(F.ZP.Col,{span:5,children:o?(0,l.jsx)(vr,{}):(0,l.jsxs)("div",{children:[(0,l.jsx)(hr,{children:"Assign Service Account to a Role"}),(0,l.jsx)("div",{"data-testid":"assign-svc-acct-to-role-select",children:(0,l.jsx)(ze.ZP,{value:j.map((function(e){return{value:e,label:e}})),options:v.map((function(e){return{value:e,label:e}})),isMulti:!0,placeholder:"Select...",noOptionsMessage:function(){return"No roles"},onChange:I})}),(0,l.jsx)(ke.Ad,{saving:u,content:h})]})})]})})},e)}))]})]})})),gr=a.default.div(lr||(lr=(0,i.Z)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  ","\n"])),(function(e){return e.short?"max-width: 800px;":""})),jr=a.default.div(ur||(ur=(0,i.Z)(["\n  font-size: 18px;\n  font-weight: bold;\n  color: #000;\n  margin-bottom: 1rem;\n"]))),br="tech-details",yr="role-management",wr="user-role-management",kr="service-account-role-management",Zr="secret",Cr="history",Sr=function(e){var n=e.integration,t=e.children;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ke.h4,{variant:"primary",size:"lg",children:["INTEGRATION DETAILS - ",Yt()(String(n.id),8,"0")]}),(0,l.jsx)(ke.OC,{children:t})]})};var Pr,Ir,Or,Nr=function(e){var n=e.integration,t=(0,r.useState)(br),i=t[0],a=t[1];if(!n)return null;var o=n.status,s=n.environments,c=void 0===s?[]:s,u=n.bceidApproved,d=void 0!==u&&u,p=n.githubApproved,h=void 0!==p&&p,x=(0,Ft.n)(o||"draft"),v=c.includes("prod"),m=(0,Vt.Jx)(n),g=(0,Vt.dV)(n),j=m&&v&&!d,b=g&&v&&!h,y=(0,X.he)(n),w=(0,X.R5)(n),k={hasProd:v,hasBceid:m,hasGithub:g,bceidApproved:d,githubApproved:h,awaitingBceidProd:j,awaitingGithubProd:b,bceidProdApplying:y,githubProdApplying:w},Z="gold"===n.serviceType,C="service-account"!==n.authType,S="both"===n.authType;if("In Draft"===x)return(0,l.jsx)(Sr,{integration:n,children:(0,l.jsxs)(f,{variant:"info",children:[(0,l.jsx)("div",{children:(0,l.jsx)("strong",{children:"Your request has not been submitted."})}),(0,l.jsx)("div",{children:'To complete your request, click "Edit" button.'})]})});var P=[],I=[];"Submitted"===x?y||w?(P.push(function(e){var n=e.integration,t=e.approvalContext;return(0,l.jsx)(ke.OK,{tab:"Technical Details",children:(0,l.jsx)(gr,{short:!1,children:(0,l.jsx)(F.ZP,{cols:15,children:(0,l.jsxs)(F.ZP.Row,{gutter:[],children:[(0,l.jsx)(F.ZP.Col,{span:7,children:(0,l.jsx)(le,{integration:n})}),(0,l.jsx)(F.ZP.Col,{span:1}),(0,l.jsxs)(F.ZP.Col,{span:7,align:"center",children:[(0,l.jsx)(rr,{integration:n,approvalContext:t}),(0,l.jsx)(dr,{integration:n,approvalContext:t})]})]})})})},br)}({integration:n,approvalContext:k})),I.push(br)):(P.push(function(e){var n=e.integration,t=e.approvalContext;return(0,l.jsx)(ke.OK,{tab:"Technical Details",children:(0,l.jsx)(gr,{short:!1,children:(0,l.jsxs)(F.ZP,{cols:15,children:[(0,l.jsx)("br",{}),(0,l.jsxs)(F.ZP.Row,{gutter:[],children:[(0,l.jsxs)(F.ZP.Col,{span:7,align:"center",children:[n.requester&&(0,l.jsxs)(jr,{children:["Submitted by: ",n.requester]}),(0,l.jsx)(_t,{children:"Access to environment(s) will be provided in approx 20 min"}),(0,l.jsx)(Tt.Z,{integration:n})]}),(0,l.jsx)(F.ZP.Col,{span:1}),(0,l.jsxs)(F.ZP.Col,{span:7,align:"center",children:[(0,l.jsx)(rr,{integration:n,approvalContext:t}),(0,l.jsx)(dr,{integration:n,approvalContext:t})]})]})]})})},br)}({integration:n,approvalContext:k})),I.push(br)):"Completed"===x&&(P.push(function(e){var n=e.integration,t=e.approvalContext;return(0,l.jsx)(ke.OK,{tab:"Technical Details",children:(0,l.jsx)(gr,{short:!1,children:(0,l.jsx)(F.ZP,{cols:15,children:(0,l.jsxs)(F.ZP.Row,{gutter:[],children:[(0,l.jsx)(F.ZP.Col,{span:7,children:(0,l.jsx)(le,{integration:n})}),(0,l.jsx)(F.ZP.Col,{span:1}),(0,l.jsxs)(F.ZP.Col,{span:7,children:[(0,l.jsx)(rr,{integration:n,approvalContext:t}),(0,l.jsx)(dr,{integration:n,approvalContext:t})]})]})})})},br)}({integration:n,approvalContext:k}),function(e){var n=e.integration;return(0,l.jsx)(ke.OK,{tab:"Role Management",children:(0,l.jsxs)(gr,{children:[(0,l.jsx)("br",{}),(0,l.jsxs)("div",{children:["Please visit our"," ",(0,l.jsx)(re.default,{external:!0,href:"https://github.com/bcgov/sso-keycloak/wiki/Creating-a-Role",children:"wiki page"})," ","for more information on roles."]}),(0,l.jsx)(it,{integration:n})]})},yr)}({integration:n})),I.push(br,yr),Z&&C&&(P.push(function(e){var n=e.integration;return(0,l.jsx)(ke.OK,{tab:"Assign Users to Roles",children:(0,l.jsx)(gr,{children:(0,l.jsx)(At,{selectedRequest:n})})},wr)}({integration:n})),I.push(wr)),!Z||C&&!S||(P.push(function(e){var n=e.integration;return(0,l.jsx)(ke.OK,{tab:"Assign Service Account to Roles",children:(0,l.jsx)(gr,{children:(0,l.jsx)(mr,{selectedRequest:n})})},kr)}({integration:n})),I.push(kr)),n.publicAccess||(P.push(function(e){var n=e.integration;return(0,l.jsx)(ke.OK,{tab:"Secrets",children:(0,l.jsx)(gr,{short:!0,children:(0,l.jsx)(me,{selectedRequest:n})})},Zr)}({integration:n})),I.push(Zr)),P.push(function(e){var n=e.integration;return(0,l.jsx)(ke.OK,{tab:"Change History",children:(0,l.jsx)(gr,{short:!0,children:(0,l.jsx)(Lt,{requestId:n.id})})},Cr)}({integration:n})),I.push(Cr));var O=i;return I.includes(i)||(O=I[0]),(0,l.jsx)(Sr,{integration:n,children:(0,l.jsx)(ke.mQ,{activeKey:O,onChange:function(e){a(e)},tabBarGutter:30,destroyInactiveTabPane:!0,children:P})})},Rr=t(11163),Dr=t(25506),Er=t(69768),Ar=a.default.th(Pr||(Pr=(0,i.Z)(["\n  text-align: right;\n  min-width: 100px;\n"]))),Fr=a.default.td(Ir||(Ir=(0,i.Z)(["\n  float: right;\n  margin-top: 10px;\n"]))),Tr=a.default.p(Or||(Or=(0,i.Z)(["\n  margin: 0;\n"]))),Br=function(e){var n=e.handleNewIntegrationClick,t=e.integrations;return t&&0!=(null===t||void 0===t?void 0:t.length)?(0,l.jsx)(ke.zx,{size:"medium",onClick:n,variant:"callout",children:"+ Request SSO Integration"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"To request an integration for a Standard Realm, you\u2019ll need the following information:"})}),(0,l.jsxs)("div",{style:{background:"#D9EDFD",textAlign:"center",padding:"16px"},children:[(0,l.jsxs)(F.ZP,{cols:2,style:{textAlign:"left"},children:[(0,l.jsxs)(F.ZP.Row,{collapse:"992",gutter:[],align:"top",children:[(0,l.jsxs)(F.ZP.Col,{span:1,children:[(0,l.jsx)(ke.wk,{number:1,title:"Project Information",children:null}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Project Name"]}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Project Team Members (Optional)"]}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Product Owner or Technical Contact"]})]}),(0,l.jsxs)(F.ZP.Col,{span:1,children:[(0,l.jsx)(ke.wk,{number:2,title:"Technical Info",children:null}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Client type (",(0,l.jsx)(re.default,{href:"https://github.com/bcgov/sso-keycloak/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"Public or Confidential, learn more"}),")"]}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Identity Provider (IDIR, Azure, BCeID or Basic)"]}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Environments (Development, Test, Production)"]}),(0,l.jsxs)(Tr,{children:[(0,l.jsx)(E.G,{icon:A.LEp})," Redirect URIs for selected environments"]})]})]}),(0,l.jsx)("p",{style:{marginTop:"1.25rem"},children:"*You\u2019ll be able to save and return your integration request, anytime throughout the request form."})]}),(0,l.jsx)(ke.zx,{size:"medium",onClick:n,variant:"callout",children:"+ Request SSO Integration"})]})]})};function zr(e){var n,t=e.setIntegration,i=e.setIntegrationCount,a=(0,Rr.useRouter)(),o=a.query.integr,s=(0,r.useState)(!0),c=s[0],u=s[1],d=(0,r.useState)(!1),p=d[0],h=d[1],f=(0,r.useState)([]),x=f[0],v=f[1],m=(0,r.useState)(o&&Number(o)||void 0),g=m[0],j=m[1],b=function(){var e=(0,N.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.push("/request");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){j(e.id),t(e)},w=function(e){var n=e||[];if(v(n),i(n.length),g){var t=e.find((function(e){return(null===e||void 0===e?void 0:e.id)===g}));t?y(t):(null===e||void 0===e?void 0:e.length)>0&&y(e[0])}else(null===e||void 0===e?void 0:e.length)>0&&y(e[0])},k=function(){var e=(0,N.Z)(D().mark((function e(){var n,t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,(0,zn.XJ)();case 3:n=e.sent,t=(0,O.Z)(n,2),r=t[0],i=t[1],h(!!i),w(r||[]),u(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){k(),a.replace("/my-dashboard/integrations")}),[]),(0,r.useEffect)((function(){return(0,X.rn)(x||[])&&(clearInterval(n),n=setInterval((0,N.Z)(D().mark((function e(){var t,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,zn.XJ)();case 2:t=e.sent,r=(0,O.Z)(t,2),i=r[0],r[1]?clearInterval(n):w(i||[]);case 7:case"end":return e.stop()}}),e)}))),5e3)),function(){n&&clearInterval(n)}}),[x,g]);var Z=p?(0,l.jsx)(Er.q,{}):x&&0!==x.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ke.h4,{size:"lg",children:"INTEGRATIONS"}),(0,l.jsxs)(ke.iA,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Request ID"}),(0,l.jsx)("th",{children:"Project Name"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Usecase"}),(0,l.jsx)("th",{children:"Service Type"}),(0,l.jsx)(Ar,{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:null===x||void 0===x?void 0:x.map((function(e){return(0,l.jsxs)("tr",{className:g===e.id?"active":"",onClick:function(){return y(e)},children:[(0,l.jsx)("td",{children:Yt()(String(e.id),8,"0")}),(0,l.jsx)("td",{children:e.projectName}),(0,l.jsx)("td",{children:(0,Ft.n)(e.status||"draft")}),(0,l.jsx)("td",{children:Dr.F[e.authType||"browser-login"]}),(0,l.jsx)("td",{children:"gold"===e.serviceType?"Gold":"Silver"}),(0,l.jsx)(Fr,{children:(0,l.jsx)(un.ZP,{request:e,onDelete:function(){k()},defaultActiveColor:"#fff",delIconStyle:{marginLeft:"7px"}})})]},e.id)}))})]})]}):(0,l.jsx)(Er.V,{message:"No Requests Submitted"});return c?(0,l.jsx)(zt.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(Br,{handleNewIntegrationClick:b,integrations:x}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),Z]})}var Gr=t(2531);var Lr=function(e){e.session;var n=(0,r.useState)(null),t=n[0],i=n[1],a=(0,r.useState)(1),o=a[0],s=a[1];return(0,l.jsx)(Gr.Z,{tab:"integrations",leftPanel:function(){return(0,l.jsx)(zr,{setIntegration:i,setIntegrationCount:s})},rightPanel:function(){return t&&(0,l.jsx)(Nr,{integration:t})},showResizable:o>0})}},91929:function(e,n,t){"use strict";t.d(n,{Di:function(){return a},ON:function(){return r},TE:function(){return i}});var r=function(e){return JSON.stringify(e,void 0,2)},i=function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.focus(),n.select();try{return document.execCommand("copy"),document.body.removeChild(n),!0}catch(t){return document.body.removeChild(n),!1}},a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=window.URL.createObjectURL(new Blob([e],{type:t})),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},80382:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-dashboard/integrations",function(){return t(85545)}])}},function(e){e.O(0,[662,436,726,765,340,883,984,661,925,774,888,179],(function(){return n=80382,e(e.s=n);var n}));var n=e.O();_N_E=n}]);